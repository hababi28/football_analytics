/** whoscored.com ocm.js-build-2.20240102114401 **/

(()=>{var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Zi=H((Mc,Yi)=>{Yi.exports={log:!1,debug:!1,use_window_top:!0,uses_cmp:!0,site_categories:["IAB12-1","IAB12-2"],dont_touch_flag:!1,services:{cmp:{active:!1,debug:!1,network_id:"QCAyv1E8ZE9uQ"},iab_compliance:{active:!0,debug:!1},gpt:{active:!1,debug:!1,collapseEmptyDivs:[!1,!1],enableSingleRequest:!1,setCentering:!1,disableInitialLoad:!1},blockthrough:{active:!1,debug:!1},geolocation:{active:!0,debug:!1},injected_tags:{active:!1,debug:!1,tags:[]},lazyload:{active:!0,debug:!1,page_types:["ROS"],version:2,include_offset:"800",load_offset:"600",ad_load_offsets:[]},adblock:{active:!1,debug:!1,pairs:[]},outbrain:{active:!1,debug:!1,desktop:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"}},mobile:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"}}},fizz:{active:!0,debug:!1,page_types:["ROS"],interval:"32000",advertisers_whitelist:[{id:4871657930,name:"OCM Digital Media"},{id:41066461,name:"Google AdExchange"},{id:39517141,name:"Google AdSense"},{id:49979581,name:"House Ads - Who Scored"},{id:4623170339,name:"Gum Gum"},{id:4815055143,name:"Amazon"},{id:122335981,name:"StreamAMP"},{id:4413560837,name:"StreamAMP_Safeframe"},{id:4740420161,name:"StreamAMP BetAtHome"}],ads_whitelist:[{path:"/79450181/whoscored.com/billboard1"},{path:"/79450181/whoscored.com/rightsticky"},{path:"/79450181/whoscored.com/leftsticky"},{path:"/79450181/whoscored.com/sidebar1"},{path:"/79450181/whoscored.com/sidebar2"},{path:"/79450181/whoscored.com/sidebar3"},{path:"/79450181/whoscored.com/mobile_sticky"},{path:"/79450181/whoscored.com/infeed1"},{path:"/79450181/whoscored.com/infeed2"},{path:"/79450181/whoscored.com/infeed3"},{path:"/79450181/whoscored.com/inline1"},{path:"/79450181/whoscored.com/674x40"}]},header_bidding:{active:!0,debug:!1,page_types:["ROS"],adsqRTDModuleEnabled:!1,adServerCurrency:"GBP",bidderTimeout:"1800",custom_granularity:!0,amazon_sid:"21e3d7ee-4312-4deb-8ada-99c25a814bef",domain:null,adUnits:[{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[320,100],[320,50]]",floor:"0.01",inventoryCode:'"WhoScored_Mobile_Billboard1"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"776769"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"776768"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/billboard1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773230",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[320,100]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"599824"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192105"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1096047,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/billboard1",sizes:"[[320,100],[320,50]]",slotID:"billboard1",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,100],[320,50]]",window_size:"[0,0]"},{ad_sizes:"[[320,100],[320,50]]",window_size:"[340,0]"},{ad_sizes:"[[728,90]]",window_size:"[768,0]"},{ad_sizes:"[[970,250],[970,90],[728,90]]",window_size:"[984,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[160,600]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/rightsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[160, 600]]",tagid:'"776770"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/rightsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773231",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[160,600]",siteId:'"599827"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192106"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1096041,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/rightsticky",sizes:"[[160,600]]",slotID:"rightsticky",page_types:["ROS"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[160,600]]",window_size:"[1324,0]"},{ad_sizes:"[[160,600]]",window_size:"[1604,0]"},{ad_sizes:"[[160,600]]",window_size:"[2204,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[160,600]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/leftsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[160, 600]]",tagid:'"776778"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/leftsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773232",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[160,600]",siteId:'"599828"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192107"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1096040,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/leftsticky",sizes:"[[160,600]]",slotID:"leftsticky",page_types:["ROS"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[160,600]]",window_size:"[1324,0]"},{ad_sizes:"[[160,600]]",window_size:"[1604,0]"},{ad_sizes:"[[160,600]]",window_size:"[2204,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[300,250]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar1"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776771"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773233",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773242",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599829"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192108"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"openx",params:{unit:'"559461567"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/sidebar1_outstream"',publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/sidebar1_outstream"',publisherId:'"157884"'}},{bidder:"adform",params:{mid:1096042,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}},{bidder:"adform",params:{mid:1697188,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/sidebar1",sizes:"[[300,250]]",video:{context:"outstream",playerSize:"[[300,169]]"},slotID:"sidebar1",page_types:["ROS"],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250]]",window_size:"[984,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[300,250],[300,600]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar2"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776772"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 600]]",tagid:'"776773"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"vEbmjpCVyXJ2mY9seIxtVK9q"',size:"[300,600]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773234",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773243",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599830"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"599830"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192109"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"openx",params:{unit:'"559461568"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/sidebar2_outstream"',publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/sidebar2_outstream"',publisherId:'"157884"'}},{bidder:"adform",params:{mid:1096043,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}},{bidder:"adform",params:{mid:1697187,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/sidebar2",sizes:"[[300,250],[300,600]]",video:{context:"outstream",playerSize:"[[300,169]]"},slotID:"sidebar2",page_types:["ROS"],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[984,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[300,250],[300,600]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar3"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776774"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 600]]",tagid:'"776775"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar3"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"vEbmjpCVyXJ2mY9seIxtVK9q"',size:"[300,600]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599831"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"599831"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192110"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1096045,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/sidebar3",sizes:"[[300,250],[300,600]]",slotID:"sidebar3",page_types:["ROS"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[984,0]"}]},{bids:[{bidder:"triplelift",params:{size:"[[320,50],[320,100]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/mobile_sticky"}',pubId:"5e5558fade26a9e"}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"776776"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"776777"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/mobile_sticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773236",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[320,100]",siteId:'"599832"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"599832"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"541192111"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1096044,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/mobile_sticky",sizes:"[[320,100],[320,50]]",slotID:"mobile_sticky",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,100],[320,50]]",window_size:"[0,0]"},{ad_sizes:"[[320,100],[320,50]]",window_size:"[340,0]"},{ad_sizes:"[]",window_size:"[768,0]"},{ad_sizes:"[]",window_size:"[1024,0]"}]},{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed1"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/infeed1"}',pubId:"5e5558fade26a9e"}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072569"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072568"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773237",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887549"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887549"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"557946403"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1558751,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/infeed1",sizes:"[[320,50],[320,100]]",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,50],[320,100]]",window_size:"[0,0]"},{ad_sizes:"[]",window_size:"[768,0]"}]},{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed2"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072572"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072574"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887550"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887550"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"557946404"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1558756,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/infeed2",sizes:"[[320,50],[320,100]]",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,50],[320,100]]",window_size:"[0,0]"},{ad_sizes:"[]",window_size:"[768,0]"}]},{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed3"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072577"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072576"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed3"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887551"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887551"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"557946406"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1558755,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/infeed3",sizes:"[[320,50],[320,100]]",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,50],[320,100]]",window_size:"[0,0]"},{ad_sizes:"[]",window_size:"[768,0]"}]},{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[320,50]]",floor:"0.01",inventoryCode:'"79450181_whoscored"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072580"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/674x40"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887552"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"557946407"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"adform",params:{mid:1558752,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/674x40",sizes:"[[320,50]]",page_types:["ROS"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[[320,50]]",window_size:"[0,0]"},{ad_sizes:"[[674,40]]",window_size:"[700,0]"}]},{bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"triplelift",params:{size:"[[300,250],[320,100],[320,50],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_inline1"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/inline1"}',pubId:"5e5558fade26a9e"}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072587"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072589"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072588"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072584"',bidfloor:'"0.01"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/inline1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:199776,placementId:215708}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773241",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773244",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887553"'}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1772652,siteId:583611,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"openx",params:{unit:'"557946408"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"openx",params:{unit:'"559461569"',coppa:!1,delDomain:'"ocmdigitalmedia-d.openx.net"',doNotTrack:!1,customFloor:"0.01",customParams:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/inline1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/inline1_outstream"',publisherId:'"157884"'}},{bidder:"pubmatic",params:{adSlot:'"/79450181/whoscored.com/inline1_outstream"',publisherId:'"157884"'}},{bidder:"adform",params:{mid:1558754,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}},{bidder:"adform",params:{mid:1697189,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/79450181/whoscored.com/inline1",sizes:"[[300,250],[320,100],[320,50],[336,280]]",video:{context:"outstream",playerSize:"[[300,169]]"},page_types:["ROS"],visibility:{mobile:!0,desktop:!0},media_types:["banner","videoInArticle"],size_mapping:[{ad_sizes:"[[320,50],[320,100],[300,250]]",window_size:"[0,0]"},{ad_sizes:"[[320,50],[320,100],[300,250],[336,280]]",window_size:"[340,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[768,0]"}]}],analytics:["ocmpba"],bidders:[{geo:[],name:"triplelift",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"adyoulike",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"yahoossp",active:!1,bid_cpm_adjust:"1.00"},{geo:[],name:"adform",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"openx",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"rubicon",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"ix",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"unruly",active:!1,bid_cpm_adjust:"1.00"},{geo:[],name:"onetag",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"sovrn",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"pubmatic",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"criteo",active:!0,bid_cpm_adjust:"1.00"},{geo:["AU","BR","CA","FR","DE","MX","IT","ES","US","GB"],name:"sharethrough",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"teads",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"engageya",active:!1,bid_cpm_adjust:"1.00"},{geo:[],name:"smartadserver",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"appnexus",active:!0,bid_cpm_adjust:"1.00"}],functionality:"lazyload_v2",video_mediatype_in_300:!1},mobile_inread_sticky:{active:!1,debug:!1,show_text:!1,top:0,pairs:[]},mwi:{active:!1,debug:!1,page_types:["ROS"],code:null,safari:!1,desktop:!1,mobile:!0},sticky:{active:!0,debug:!1,ads:[{code:"/79450181/whoscored.com/mobile_sticky",sizes:"[[320,50],[320,100]]",active:!0,bg_color:"rgba(255, 255, 255, 0)",position:"bottom",conditions:{device:"mobile",retract:!1,min_width:1366,page_types:["Home"],exclude_urls:[],hide_if_skin:!1}}]},vi:{active:!1,debug:!1,iab:"IAB1",style:"margin: 10px auto;",mobile:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}},desktop:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}}},primis:{active:!1,debug:!1,src:null,style:"display:inline-block; width:100%; height:100%; margin: 10px auto;",mobile:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},geo_filtering:!1,geo_filtering_countries:[]},desktop:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},geo_filtering:!1,geo_filtering_countries:[]}},instream:{active:!1,debug:!1,color:"#f59e0b",ad_tag_url:null,dispose_after_ad:!1,video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},language:"el"},instream_hb:{active:!1,debug:!1,color:"#f59e0b",video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},adunits:[],mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}}},story_teller:{active:!1,debug:!1,ad_tag_url:null,delay_first_ad_request:0,load_offset:0,color:"#f59e0b",source:null,stories_type:"html",rss_url:null,video_url:null,captions_url:null,link_target:"_top",link_text:"READ MORE",mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},branding:{logo_url:null,title:null,site_name:null},language:"el"},story_teller_v2:{active:!1,debug:!1,midRollTime:20,playerTagId:null,publisherId:"62ed18128bb9d95dbe10e294",source:null,rss_url:null,redirect_target:"_top",enable_analytics:!1,mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},branding:{logo_url:null,title:null,color:"#f59e0b",textColor:"#fff"},language:"el",color:"#f59e0b",video_url:null,captions_url:null,stories_type:null},reaper:{active:!0,debug:!1,timeout:"1500",language:"el"},in_image:{active:!1,debug:!1,fc:100,withoutLeft:!1,tags:[],available_sizes:[{adSizes:"[[300,50]]",isActive:!1,isMobile:!1,widthImg:500,heightImg:100},{adSizes:"[[300,100]]",isActive:!1,isMobile:!1,widthImg:500,heightImg:300},{adSizes:"[[320,50]]",isActive:!1,isMobile:!1,widthImg:540,heightImg:100},{adSizes:"[[320,100]]",isActive:!1,isMobile:!1,widthImg:540,heightImg:250},{adSizes:"[[468,60]]",isActive:!1,isMobile:!1,widthImg:838,heightImg:180},{adSizes:"[[728,90]]",isActive:!0,isMobile:!1,widthImg:900,heightImg:180},{adSizes:"[[320,50]]",isActive:!0,isMobile:!0,widthImg:320,heightImg:100},{adSizes:"[[468,60]]",isActive:!0,isMobile:!0,widthImg:468,heightImg:100}],bg_color:"#ffffff00"},adlightning:{active:!0,debug:!1,site:"whoscoredcom"},teads_analytics:{active:!1,debug:!1,publisher_id:"16578"},user_engagement:{active:!0,debug:!1,interval:2e3},aniview:{active:!1,debug:!1,mobile:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!0},desktop:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!0}},uam:{debug:!1,pubID:"21e3d7ee-4312-4deb-8ada-99c25a814bef",active:!1,adServer:"googletag",bidTimeout:"1800",page_types:["ROS"]},engageya:{debug:!1,active:!1,mobile:{wid:null,pubid:null,webid:null,conditions:{place:"insertAfter",count_gt:0,position:0,selector:null,words_gt:0,page_types:["Article"],word_count:0,word_count_gt:0}},desktop:{wid:null,pubid:null,webid:null,conditions:{place:"insertAfter",count_gt:0,position:0,selector:null,words_gt:0,page_types:["Article"],word_count:0,word_count_gt:0}}},outstream:{debug:!1,active:!1,page_id:null,exclude_urls:[],article_identifier:null}},env:"prod",domain:"whoscored.com",script_tag:"whoscored.com",build:"2.20240102114401",seller_id:"193164ud8gp3qzoc",adops_seller_id:"6ec8f3ce7d838bb9246e426fa3701006",schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"orangeclickmedia.com",sid:"193164ud8gp3qzoc",hp:1}]}}}});var Qi=H(()=>{var Kt=navigator.userAgent||navigator.vendor||window.opera,jc=Kt.indexOf("FBAN")>-1||Kt.indexOf("FBAV")>-1,Lc=Kt.indexOf("iPhone")>-1,io=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,Hc=window.safari!==void 0,no=!!document.documentMode,zc=!no&&!!window.StyleMedia,ro=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),Vc=(ro||io)&&!!window.CSS});var en=H((Kc,wt)=>{"use strict";wt.exports=Gt;wt.exports.isMobile=Gt;wt.exports.default=Gt;var so=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,oo=/android|ipad|playbook|silk/i;function Gt(t){t||(t={});let e=t.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;let i=so.test(e)||!!t.tablet&&oo.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(i=!0),i}});var Wt=H((Gc,tn)=>{"use strict";tn.exports=function(e,i){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(i,r)}}});var Fe=H((Wc,sn)=>{"use strict";var ao=Wt(),Qe=Object.prototype.toString;function Xt(t){return Qe.call(t)==="[object Array]"}function Jt(t){return typeof t>"u"}function lo(t){return t!==null&&!Jt(t)&&t.constructor!==null&&!Jt(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function uo(t){return Qe.call(t)==="[object ArrayBuffer]"}function co(t){return typeof FormData<"u"&&t instanceof FormData}function ho(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function fo(t){return typeof t=="string"}function go(t){return typeof t=="number"}function nn(t){return t!==null&&typeof t=="object"}function St(t){if(Qe.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function po(t){return Qe.call(t)==="[object Date]"}function mo(t){return Qe.call(t)==="[object File]"}function vo(t){return Qe.call(t)==="[object Blob]"}function rn(t){return Qe.call(t)==="[object Function]"}function bo(t){return nn(t)&&rn(t.pipe)}function yo(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function wo(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function So(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Yt(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Xt(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function $t(){var t={};function e(r,s){St(t[s])&&St(r)?t[s]=$t(t[s],r):St(r)?t[s]=$t({},r):Xt(r)?t[s]=r.slice():t[s]=r}for(var i=0,n=arguments.length;i<n;i++)Yt(arguments[i],e);return t}function xo(t,e,i){return Yt(e,function(r,s){i&&typeof r=="function"?t[s]=ao(r,i):t[s]=r}),t}function _o(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}sn.exports={isArray:Xt,isArrayBuffer:uo,isBuffer:lo,isFormData:co,isArrayBufferView:ho,isString:fo,isNumber:go,isObject:nn,isPlainObject:St,isUndefined:Jt,isDate:po,isFile:mo,isBlob:vo,isFunction:rn,isStream:bo,isURLSearchParams:yo,isStandardBrowserEnv:So,forEach:Yt,merge:$t,extend:xo,trim:wo,stripBOM:_o}});var Zt=H((Jc,an)=>{"use strict";var it=Fe();function on(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}an.exports=function(e,i,n){if(!i)return e;var r;if(n)r=n(i);else if(it.isURLSearchParams(i))r=i.toString();else{var s=[];it.forEach(i,function(u,c){u===null||typeof u>"u"||(it.isArray(u)?c=c+"[]":u=[u],it.forEach(u,function(p){it.isDate(p)?p=p.toISOString():it.isObject(p)&&(p=JSON.stringify(p)),s.push(on(c)+"="+on(p))}))}),r=s.join("&")}if(r){var l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}});var un=H(($c,ln)=>{"use strict";var Eo=Fe();function xt(){this.handlers=[]}xt.prototype.use=function(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};xt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};xt.prototype.forEach=function(e){Eo.forEach(this.handlers,function(n){n!==null&&e(n)})};ln.exports=xt});var dn=H((Xc,cn)=>{"use strict";var Ao=Fe();cn.exports=function(e,i){Ao.forEach(e,function(r,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(e[i]=r,delete e[s])})}});var Qt=H((Yc,hn)=>{"use strict";hn.exports=function(e,i,n,r,s){return e.config=i,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var ei=H((Zc,fn)=>{"use strict";var Fo=Qt();fn.exports=function(e,i,n,r,s){var l=new Error(e);return Fo(l,i,n,r,s)}});var pn=H((Qc,gn)=>{"use strict";var Io=ei();gn.exports=function(e,i,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):i(Io("Request failed with status code "+n.status,n.config,null,n.request,n))}});var vn=H((ed,mn)=>{"use strict";var _t=Fe();mn.exports=_t.isStandardBrowserEnv()?function(){return{write:function(i,n,r,s,l,a){var u=[];u.push(i+"="+encodeURIComponent(n)),_t.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),_t.isString(s)&&u.push("path="+s),_t.isString(l)&&u.push("domain="+l),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var yn=H((td,bn)=>{"use strict";bn.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Sn=H((id,wn)=>{"use strict";wn.exports=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}});var _n=H((nd,xn)=>{"use strict";var Co=yn(),Po=Sn();xn.exports=function(e,i){return e&&!Co(i)?Po(e,i):i}});var An=H((rd,En)=>{"use strict";var ti=Fe(),To=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];En.exports=function(e){var i={},n,r,s;return e&&ti.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=ti.trim(a.substr(0,s)).toLowerCase(),r=ti.trim(a.substr(s+1)),n){if(i[n]&&To.indexOf(n)>=0)return;n==="set-cookie"?i[n]=(i[n]?i[n]:[]).concat([r]):i[n]=i[n]?i[n]+", "+r:r}}),i}});var Cn=H((sd,In)=>{"use strict";var Fn=Fe();In.exports=Fn.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function r(s){var l=s;return e&&(i.setAttribute("href",l),l=i.href),i.setAttribute("href",l),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(l){var a=Fn.isString(l)?r(l):l;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var ni=H((od,Pn)=>{"use strict";var Et=Fe(),Ro=pn(),Oo=vn(),Do=Zt(),ko=_n(),Bo=An(),No=Cn(),ii=ei();Pn.exports=function(e){return new Promise(function(n,r){var s=e.data,l=e.headers,a=e.responseType;Et.isFormData(s)&&delete l["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.Authorization="Basic "+btoa(c+":"+m)}var p=ko(e.baseURL,e.url);u.open(e.method.toUpperCase(),Do(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(u){var v="getAllResponseHeaders"in u?Bo(u.getAllResponseHeaders()):null,g=!a||a==="text"||a==="json"?u.responseText:u.response,y={data:g,status:u.status,statusText:u.statusText,headers:v,config:e,request:u};Ro(n,r,y),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(ii("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){r(ii("Network Error",e,null,u)),u=null},u.ontimeout=function(){var g="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),r(ii(g,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Et.isStandardBrowserEnv()){var f=(e.withCredentials||No(p))&&e.xsrfCookieName?Oo.read(e.xsrfCookieName):void 0;f&&(l[e.xsrfHeaderName]=f)}"setRequestHeader"in u&&Et.forEach(l,function(g,y){typeof s>"u"&&y.toLowerCase()==="content-type"?delete l[y]:u.setRequestHeader(y,g)}),Et.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(g){u&&(u.abort(),r(g),u=null)}),s||(s=null),u.send(s)})}});var Ft=H((ad,On)=>{"use strict";var we=Fe(),Tn=dn(),Mo=Qt(),jo={"Content-Type":"application/x-www-form-urlencoded"};function Rn(t,e){!we.isUndefined(t)&&we.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Lo(){var t;return typeof XMLHttpRequest<"u"?t=ni():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=ni()),t}function Ho(t,e,i){if(we.isString(t))try{return(e||JSON.parse)(t),we.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}var At={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Lo(),transformRequest:[function(e,i){return Tn(i,"Accept"),Tn(i,"Content-Type"),we.isFormData(e)||we.isArrayBuffer(e)||we.isBuffer(e)||we.isStream(e)||we.isFile(e)||we.isBlob(e)?e:we.isArrayBufferView(e)?e.buffer:we.isURLSearchParams(e)?(Rn(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):we.isObject(e)||i&&i["Content-Type"]==="application/json"?(Rn(i,"application/json"),Ho(e)):e}],transformResponse:[function(e){var i=this.transitional,n=i&&i.silentJSONParsing,r=i&&i.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||r&&we.isString(e)&&e.length)try{return JSON.parse(e)}catch(l){if(s)throw l.name==="SyntaxError"?Mo(l,this,"E_JSON_PARSE"):l}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};At.headers={common:{Accept:"application/json, text/plain, */*"}};we.forEach(["delete","get","head"],function(e){At.headers[e]={}});we.forEach(["post","put","patch"],function(e){At.headers[e]=we.merge(jo)});On.exports=At});var kn=H((ld,Dn)=>{"use strict";var zo=Fe(),Vo=Ft();Dn.exports=function(e,i,n){var r=this||Vo;return zo.forEach(n,function(l){e=l.call(r,e,i)}),e}});var ri=H((ud,Bn)=>{"use strict";Bn.exports=function(e){return!!(e&&e.__CANCEL__)}});var jn=H((cd,Mn)=>{"use strict";var Nn=Fe(),si=kn(),qo=ri(),Uo=Ft();function oi(t){t.cancelToken&&t.cancelToken.throwIfRequested()}Mn.exports=function(e){oi(e),e.headers=e.headers||{},e.data=si.call(e,e.data,e.headers,e.transformRequest),e.headers=Nn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Nn.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var i=e.adapter||Uo.adapter;return i(e).then(function(r){return oi(e),r.data=si.call(e,r.data,r.headers,e.transformResponse),r},function(r){return qo(r)||(oi(e),r&&r.response&&(r.response.data=si.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})}});var ai=H((dd,Ln)=>{"use strict";var Se=Fe();Ln.exports=function(e,i){i=i||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],l=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(h,f){return Se.isPlainObject(h)&&Se.isPlainObject(f)?Se.merge(h,f):Se.isPlainObject(f)?Se.merge({},f):Se.isArray(f)?f.slice():f}function c(h){Se.isUndefined(i[h])?Se.isUndefined(e[h])||(n[h]=u(void 0,e[h])):n[h]=u(e[h],i[h])}Se.forEach(r,function(f){Se.isUndefined(i[f])||(n[f]=u(void 0,i[f]))}),Se.forEach(s,c),Se.forEach(l,function(f){Se.isUndefined(i[f])?Se.isUndefined(e[f])||(n[f]=u(void 0,e[f])):n[f]=u(void 0,i[f])}),Se.forEach(a,function(f){f in i?n[f]=u(e[f],i[f]):f in e&&(n[f]=u(void 0,e[f]))});var m=r.concat(s).concat(l).concat(a),p=Object.keys(e).concat(Object.keys(i)).filter(function(f){return m.indexOf(f)===-1});return Se.forEach(p,c),n}});var Hn=H((hd,Ko)=>{Ko.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Kn=H((fd,Un)=>{"use strict";var Vn=Hn(),li={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){li[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var zn={},Go=Vn.version.split(".");function qn(t,e){for(var i=e?e.split("."):Go,n=t.split("."),r=0;r<3;r++){if(i[r]>n[r])return!0;if(i[r]<n[r])return!1}return!1}li.transitional=function(e,i,n){var r=i&&qn(i);function s(l,a){return"[Axios v"+Vn.version+"] Transitional option '"+l+"'"+a+(n?". "+n:"")}return function(l,a,u){if(e===!1)throw new Error(s(a," has been removed in "+i));return r&&!zn[a]&&(zn[a]=!0,console.warn(s(a," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(l,a,u):!0}};function Wo(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),r=n.length;r-- >0;){var s=n[r],l=e[s];if(l){var a=t[s],u=a===void 0||l(a,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(i!==!0)throw Error("Unknown option "+s)}}Un.exports={isOlderVersion:qn,assertOptions:Wo,validators:li}});var Yn=H((gd,Xn)=>{"use strict";var Jn=Fe(),Jo=Zt(),Gn=un(),Wn=jn(),It=ai(),$n=Kn(),nt=$n.validators;function ht(t){this.defaults=t,this.interceptors={request:new Gn,response:new Gn}}ht.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=It(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var i=e.transitional;i!==void 0&&$n.assertOptions(i,{silentJSONParsing:nt.transitional(nt.boolean,"1.0.0"),forcedJSONParsing:nt.transitional(nt.boolean,"1.0.0"),clarifyTimeoutError:nt.transitional(nt.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(r=r&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var l;if(!r){var a=[Wn,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),l=Promise.resolve(e);a.length;)l=l.then(a.shift(),a.shift());return l}for(var u=e;n.length;){var c=n.shift(),m=n.shift();try{u=c(u)}catch(p){m(p);break}}try{l=Wn(u)}catch(p){return Promise.reject(p)}for(;s.length;)l=l.then(s.shift(),s.shift());return l};ht.prototype.getUri=function(e){return e=It(this.defaults,e),Jo(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Jn.forEach(["delete","get","head","options"],function(e){ht.prototype[e]=function(i,n){return this.request(It(n||{},{method:e,url:i,data:(n||{}).data}))}});Jn.forEach(["post","put","patch"],function(e){ht.prototype[e]=function(i,n,r){return this.request(It(r||{},{method:e,url:i,data:n}))}});Xn.exports=ht});var ci=H((pd,Zn)=>{"use strict";function ui(t){this.message=t}ui.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ui.prototype.__CANCEL__=!0;Zn.exports=ui});var er=H((md,Qn)=>{"use strict";var $o=ci();function Ct(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var i=this;t(function(r){i.reason||(i.reason=new $o(r),e(i.reason))})}Ct.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ct.source=function(){var e,i=new Ct(function(r){e=r});return{token:i,cancel:e}};Qn.exports=Ct});var ir=H((vd,tr)=>{"use strict";tr.exports=function(e){return function(n){return e.apply(null,n)}}});var rr=H((bd,nr)=>{"use strict";nr.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var ar=H((yd,di)=>{"use strict";var sr=Fe(),Xo=Wt(),Pt=Yn(),Yo=ai(),Zo=Ft();function or(t){var e=new Pt(t),i=Xo(Pt.prototype.request,e);return sr.extend(i,Pt.prototype,e),sr.extend(i,e),i}var Ne=or(Zo);Ne.Axios=Pt;Ne.create=function(e){return or(Yo(Ne.defaults,e))};Ne.Cancel=ci();Ne.CancelToken=er();Ne.isCancel=ri();Ne.all=function(e){return Promise.all(e)};Ne.spread=ir();Ne.isAxiosError=rr();di.exports=Ne;di.exports.default=Ne});var ur=H((wd,lr)=>{lr.exports=ar()});var Br=H(L=>{var ft={};ft.userAgent=!1;var rt={};var z=z||function(t,e){var i={},n=i.lib={},r=n.Base=function(){function f(){}return{extend:function(v){f.prototype=this;var g=new f;return v&&g.mixIn(v),g.hasOwnProperty("init")||(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var g in v)v.hasOwnProperty(g)&&(this[g]=v[g]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=n.WordArray=r.extend({init:function(f,v){f=this.words=f||[],v!=e?this.sigBytes=v:this.sigBytes=f.length*4},toString:function(f){return(f||a).stringify(this)},concat:function(f){var v=this.words,g=f.words,y=this.sigBytes,b=f.sigBytes;if(this.clamp(),y%4)for(var S=0;S<b;S++){var w=g[S>>>2]>>>24-S%4*8&255;v[y+S>>>2]|=w<<24-(y+S)%4*8}else for(var S=0;S<b;S+=4)v[y+S>>>2]=g[S>>>2];return this.sigBytes+=b,this},clamp:function(){var f=this.words,v=this.sigBytes;f[v>>>2]&=4294967295<<32-v%4*8,f.length=t.ceil(v/4)},clone:function(){var f=r.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var v=[],g=0;g<f;g+=4)v.push(t.random()*4294967296|0);return new s.init(v,f)}}),l=i.enc={},a=l.Hex={stringify:function(f){for(var v=f.words,g=f.sigBytes,y=[],b=0;b<g;b++){var S=v[b>>>2]>>>24-b%4*8&255;y.push((S>>>4).toString(16)),y.push((S&15).toString(16))}return y.join("")},parse:function(f){for(var v=f.length,g=[],y=0;y<v;y+=2)g[y>>>3]|=parseInt(f.substr(y,2),16)<<24-y%8*4;return new s.init(g,v/2)}},u=l.Latin1={stringify:function(f){for(var v=f.words,g=f.sigBytes,y=[],b=0;b<g;b++){var S=v[b>>>2]>>>24-b%4*8&255;y.push(String.fromCharCode(S))}return y.join("")},parse:function(f){for(var v=f.length,g=[],y=0;y<v;y++)g[y>>>2]|=(f.charCodeAt(y)&255)<<24-y%4*8;return new s.init(g,v)}},c=l.Utf8={stringify:function(f){try{return decodeURIComponent(escape(u.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return u.parse(unescape(encodeURIComponent(f)))}},m=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=c.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var v=this._data,g=v.words,y=v.sigBytes,b=this.blockSize,S=b*4,w=y/S;f?w=t.ceil(w):w=t.max((w|0)-this._minBufferSize,0);var _=w*b,A=t.min(_*4,y);if(_){for(var C=0;C<_;C+=b)this._doProcessBlock(g,C);var x=g.splice(0,_);v.sigBytes-=A}return new s.init(x,A)},clone:function(){var f=r.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0}),p=n.Hasher=m.extend({cfg:r.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(f){return function(v,g){return new f.init(g).finalize(v)}},_createHmacHelper:function(f){return function(v,g){return new h.HMAC.init(f,g).finalize(v)}}}),h=i.algo={};return i}(Math);(function(t){var r=z,e=r.lib,i=e.Base,n=e.WordArray,r=r.x64={};r.Word=i.extend({init:function(s,l){this.high=s,this.low=l}}),r.WordArray=i.extend({init:function(s,l){s=this.words=s||[],this.sigBytes=l!=t?l:8*s.length},toX32:function(){for(var s=this.words,l=s.length,a=[],u=0;u<l;u++){var c=s[u];a.push(c.high),a.push(c.low)}return n.create(a,this.sigBytes)},clone:function(){for(var s=i.clone.call(this),l=s.words=this.words.slice(0),a=l.length,u=0;u<a;u++)l[u]=l[u].clone();return s}})})();z.lib.Cipher||function(t){var f=z,e=f.lib,i=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,s=f.enc.Base64,l=f.algo.EvpKDF,a=e.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(g,y){return this.create(this._ENC_XFORM_MODE,g,y)},createDecryptor:function(g,y){return this.create(this._DEC_XFORM_MODE,g,y)},init:function(g,y,b){this.cfg=this.cfg.extend(b),this._xformMode=g,this._key=y,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(g){return this._append(g),this._process()},finalize:function(g){return g&&this._append(g),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(g){return{encrypt:function(y,b,S){return(typeof b=="string"?v:h).encrypt(g,y,b,S)},decrypt:function(y,b,S){return(typeof b=="string"?v:h).decrypt(g,y,b,S)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var p=f.mode={},u=function(g,y,b){var S=this._iv;S?this._iv=t:S=this._prevBlock;for(var w=0;w<b;w++)g[y+w]^=S[w]},c=(e.BlockCipherMode=i.extend({createEncryptor:function(g,y){return this.Encryptor.create(g,y)},createDecryptor:function(g,y){return this.Decryptor.create(g,y)},init:function(g,y){this._cipher=g,this._iv=y}})).extend();c.Encryptor=c.extend({processBlock:function(g,y){var b=this._cipher,S=b.blockSize;u.call(this,g,y,S),b.encryptBlock(g,y),this._prevBlock=g.slice(y,y+S)}}),c.Decryptor=c.extend({processBlock:function(g,y){var b=this._cipher,S=b.blockSize,w=g.slice(y,y+S);b.decryptBlock(g,y),u.call(this,g,y,S),this._prevBlock=w}}),p=p.CBC=c,c=(f.pad={}).Pkcs7={pad:function(g,y){for(var b=4*y,b=b-g.sigBytes%b,S=b<<24|b<<16|b<<8|b,w=[],_=0;_<b;_+=4)w.push(S);b=n.create(w,b),g.concat(b)},unpad:function(g){g.sigBytes-=g.words[g.sigBytes-1>>>2]&255}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:p,padding:c}),reset:function(){a.reset.call(this);var y=this.cfg,g=y.iv,y=y.mode;if(this._xformMode==this._ENC_XFORM_MODE)var b=y.createEncryptor;else b=y.createDecryptor,this._minBufferSize=1;this._mode=b.call(y,this,g&&g.words)},_doProcessBlock:function(g,y){this._mode.processBlock(g,y)},_doFinalize:function(){var g=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){g.pad(this._data,this.blockSize);var y=this._process(!0)}else y=this._process(!0),g.unpad(y);return y},blockSize:4});var m=e.CipherParams=i.extend({init:function(g){this.mixIn(g)},toString:function(g){return(g||this.formatter).stringify(this)}}),p=(f.format={}).OpenSSL={stringify:function(g){var y=g.ciphertext;return g=g.salt,(g?n.create([1398893684,1701076831]).concat(g).concat(y):y).toString(s)},parse:function(g){g=s.parse(g);var y=g.words;if(y[0]==1398893684&&y[1]==1701076831){var b=n.create(y.slice(2,4));y.splice(0,4),g.sigBytes-=16}return m.create({ciphertext:g,salt:b})}},h=e.SerializableCipher=i.extend({cfg:i.extend({format:p}),encrypt:function(g,y,b,S){S=this.cfg.extend(S);var w=g.createEncryptor(b,S);return y=w.finalize(y),w=w.cfg,m.create({ciphertext:y,key:b,iv:w.iv,algorithm:g,mode:w.mode,padding:w.padding,blockSize:g.blockSize,formatter:S.format})},decrypt:function(g,y,b,S){return S=this.cfg.extend(S),y=this._parse(y,S.format),g.createDecryptor(b,S).finalize(y.ciphertext)},_parse:function(g,y){return typeof g=="string"?y.parse(g,this):g}}),f=(f.kdf={}).OpenSSL={execute:function(g,y,b,S){return S||(S=n.random(8)),g=l.create({keySize:y+b}).compute(g,S),b=n.create(g.words.slice(y),4*b),g.sigBytes=4*y,m.create({key:g,iv:b,salt:S})}},v=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:f}),encrypt:function(g,y,b,S){return S=this.cfg.extend(S),b=S.kdf.execute(b,g.keySize,g.ivSize),S.iv=b.iv,g=h.encrypt.call(this,g,y,b.key,S),g.mixIn(b),g},decrypt:function(g,y,b,S){return S=this.cfg.extend(S),y=this._parse(y,S.format),b=S.kdf.execute(b,g.keySize,g.ivSize,y.salt),S.iv=b.iv,h.decrypt.call(this,g,y,b.key,S)}})}();(function(){for(var t=z,e=t.lib.BlockCipher,C=t.algo,i=[],n=[],r=[],s=[],l=[],a=[],u=[],c=[],m=[],p=[],h=[],f=0;256>f;f++)h[f]=128>f?f<<1:f<<1^283;for(var v=0,g=0,f=0;256>f;f++){var y=g^g<<1^g<<2^g<<3^g<<4,y=y>>>8^y&255^99;i[v]=y,n[y]=v;var b=h[v],S=h[b],w=h[S],_=257*h[y]^16843008*y;r[v]=_<<24|_>>>8,s[v]=_<<16|_>>>16,l[v]=_<<8|_>>>24,a[v]=_,_=16843009*w^65537*S^257*b^16843008*v,u[y]=_<<24|_>>>8,c[y]=_<<16|_>>>16,m[y]=_<<8|_>>>24,p[y]=_,v?(v=b^h[h[h[w^b]]],g^=h[h[g]]):v=g=1}var A=[0,1,2,4,8,16,32,64,128,27,54],C=C.AES=e.extend({_doReset:function(){for(var F=this._key,x=F.words,E=F.sigBytes/4,F=4*((this._nRounds=E+6)+1),I=this._keySchedule=[],P=0;P<F;P++)if(P<E)I[P]=x[P];else{var R=I[P-1];P%E?6<E&&P%E==4&&(R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255]):(R=R<<8|R>>>24,R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255],R^=A[P/E|0]<<24),I[P]=I[P-E]^R}for(x=this._invKeySchedule=[],E=0;E<F;E++)P=F-E,R=E%4?I[P]:I[P-4],x[E]=4>E||4>=P?R:u[i[R>>>24]]^c[i[R>>>16&255]]^m[i[R>>>8&255]]^p[i[R&255]]},encryptBlock:function(x,E){this._doCryptBlock(x,E,this._keySchedule,r,s,l,a,i)},decryptBlock:function(x,E){var F=x[E+1];x[E+1]=x[E+3],x[E+3]=F,this._doCryptBlock(x,E,this._invKeySchedule,u,c,m,p,n),F=x[E+1],x[E+1]=x[E+3],x[E+3]=F},_doCryptBlock:function(x,E,F,I,P,R,M,T){for(var B=this._nRounds,$=x[E]^F[0],de=x[E+1]^F[1],ne=x[E+2]^F[2],J=x[E+3]^F[3],D=4,k=1;k<B;k++)var K=I[$>>>24]^P[de>>>16&255]^R[ne>>>8&255]^M[J&255]^F[D++],V=I[de>>>24]^P[ne>>>16&255]^R[J>>>8&255]^M[$&255]^F[D++],G=I[ne>>>24]^P[J>>>16&255]^R[$>>>8&255]^M[de&255]^F[D++],J=I[J>>>24]^P[$>>>16&255]^R[de>>>8&255]^M[ne&255]^F[D++],$=K,de=V,ne=G;K=(T[$>>>24]<<24|T[de>>>16&255]<<16|T[ne>>>8&255]<<8|T[J&255])^F[D++],V=(T[de>>>24]<<24|T[ne>>>16&255]<<16|T[J>>>8&255]<<8|T[$&255])^F[D++],G=(T[ne>>>24]<<24|T[J>>>16&255]<<16|T[$>>>8&255]<<8|T[de&255])^F[D++],J=(T[J>>>24]<<24|T[$>>>16&255]<<16|T[de>>>8&255]<<8|T[ne&255])^F[D++],x[E]=K,x[E+1]=V,x[E+2]=G,x[E+3]=J},keySize:8});t.AES=e._createHelper(C)})();(function(){function t(h,f){var v=(this._lBlock>>>h^this._rBlock)&f;this._rBlock^=v,this._lBlock^=v<<h}function e(h,f){var v=(this._rBlock>>>h^this._lBlock)&f;this._lBlock^=v,this._rBlock^=v<<h}var i=z,r=i.lib,n=r.WordArray,r=r.BlockCipher,s=i.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=r.extend({_doReset:function(){for(var h=this._key.words,f=[],v=0;56>v;v++){var g=l[v]-1;f[v]=h[g>>>5]>>>31-g%32&1}for(h=this._subKeys=[],g=0;16>g;g++){for(var y=h[g]=[],b=u[g],v=0;24>v;v++)y[v/6|0]|=f[(a[v]-1+b)%28]<<31-v%6,y[4+(v/6|0)]|=f[28+(a[v+24]-1+b)%28]<<31-v%6;for(y[0]=y[0]<<1|y[0]>>>31,v=1;7>v;v++)y[v]>>>=4*(v-1)+3;y[7]=y[7]<<5|y[7]>>>27}for(f=this._invSubKeys=[],v=0;16>v;v++)f[v]=h[15-v]},encryptBlock:function(h,f){this._doCryptBlock(h,f,this._subKeys)},decryptBlock:function(h,f){this._doCryptBlock(h,f,this._invSubKeys)},_doCryptBlock:function(h,f,v){this._lBlock=h[f],this._rBlock=h[f+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var g=0;16>g;g++){for(var y=v[g],b=this._lBlock,S=this._rBlock,w=0,_=0;8>_;_++)w|=c[_][((S^y[_])&m[_])>>>0];this._lBlock=S,this._rBlock=b^w}v=this._lBlock,this._lBlock=this._rBlock,this._rBlock=v,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),h[f]=this._lBlock,h[f+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=r._createHelper(p),s=s.TripleDES=r.extend({_doReset:function(){var h=this._key.words;this._des1=p.createEncryptor(n.create(h.slice(0,2))),this._des2=p.createEncryptor(n.create(h.slice(2,4))),this._des3=p.createEncryptor(n.create(h.slice(4,6)))},encryptBlock:function(h,f){this._des1.encryptBlock(h,f),this._des2.decryptBlock(h,f),this._des3.encryptBlock(h,f)},decryptBlock:function(h,f){this._des3.decryptBlock(h,f),this._des2.encryptBlock(h,f),this._des1.decryptBlock(h,f)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=r._createHelper(s)})();(function(){var t=z,e=t.lib.WordArray;t.enc.Base64={stringify:function(i){var n=i.words,r=i.sigBytes,s=this._map;i.clamp(),i=[];for(var l=0;l<r;l+=3)for(var a=(n[l>>>2]>>>24-8*(l%4)&255)<<16|(n[l+1>>>2]>>>24-8*((l+1)%4)&255)<<8|n[l+2>>>2]>>>24-8*((l+2)%4)&255,u=0;4>u&&l+.75*u<r;u++)i.push(s.charAt(a>>>6*(3-u)&63));if(n=s.charAt(64))for(;i.length%4;)i.push(n);return i.join("")},parse:function(i){var n=i.length,r=this._map,s=r.charAt(64);s&&(s=i.indexOf(s),s!=-1&&(n=s));for(var s=[],l=0,a=0;a<n;a++)if(a%4){var u=r.indexOf(i.charAt(a-1))<<2*(a%4),c=r.indexOf(i.charAt(a))>>>6-2*(a%4);s[l>>>2]|=(u|c)<<24-8*(l%4),l++}return e.create(s,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(t){function e(p,h,f,v,g,y,b){return p=p+(h&f|~h&v)+g+b,(p<<y|p>>>32-y)+h}function i(p,h,f,v,g,y,b){return p=p+(h&v|f&~v)+g+b,(p<<y|p>>>32-y)+h}function n(p,h,f,v,g,y,b){return p=p+(h^f^v)+g+b,(p<<y|p>>>32-y)+h}function r(p,h,f,v,g,y,b){return p=p+(f^(h|~v))+g+b,(p<<y|p>>>32-y)+h}for(var s=z,u=s.lib,l=u.WordArray,a=u.Hasher,u=s.algo,c=[],m=0;64>m;m++)c[m]=4294967296*t.abs(t.sin(m+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,h){for(var f=0;16>f;f++){var v=h+f,g=p[v];p[v]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var f=this._hash.words,v=p[h+0],g=p[h+1],y=p[h+2],b=p[h+3],S=p[h+4],w=p[h+5],_=p[h+6],A=p[h+7],C=p[h+8],x=p[h+9],E=p[h+10],F=p[h+11],I=p[h+12],P=p[h+13],R=p[h+14],M=p[h+15],T=f[0],k=f[1],D=f[2],B=f[3],T=e(T,k,D,B,v,7,c[0]),B=e(B,T,k,D,g,12,c[1]),D=e(D,B,T,k,y,17,c[2]),k=e(k,D,B,T,b,22,c[3]),T=e(T,k,D,B,S,7,c[4]),B=e(B,T,k,D,w,12,c[5]),D=e(D,B,T,k,_,17,c[6]),k=e(k,D,B,T,A,22,c[7]),T=e(T,k,D,B,C,7,c[8]),B=e(B,T,k,D,x,12,c[9]),D=e(D,B,T,k,E,17,c[10]),k=e(k,D,B,T,F,22,c[11]),T=e(T,k,D,B,I,7,c[12]),B=e(B,T,k,D,P,12,c[13]),D=e(D,B,T,k,R,17,c[14]),k=e(k,D,B,T,M,22,c[15]),T=i(T,k,D,B,g,5,c[16]),B=i(B,T,k,D,_,9,c[17]),D=i(D,B,T,k,F,14,c[18]),k=i(k,D,B,T,v,20,c[19]),T=i(T,k,D,B,w,5,c[20]),B=i(B,T,k,D,E,9,c[21]),D=i(D,B,T,k,M,14,c[22]),k=i(k,D,B,T,S,20,c[23]),T=i(T,k,D,B,x,5,c[24]),B=i(B,T,k,D,R,9,c[25]),D=i(D,B,T,k,b,14,c[26]),k=i(k,D,B,T,C,20,c[27]),T=i(T,k,D,B,P,5,c[28]),B=i(B,T,k,D,y,9,c[29]),D=i(D,B,T,k,A,14,c[30]),k=i(k,D,B,T,I,20,c[31]),T=n(T,k,D,B,w,4,c[32]),B=n(B,T,k,D,C,11,c[33]),D=n(D,B,T,k,F,16,c[34]),k=n(k,D,B,T,R,23,c[35]),T=n(T,k,D,B,g,4,c[36]),B=n(B,T,k,D,S,11,c[37]),D=n(D,B,T,k,A,16,c[38]),k=n(k,D,B,T,E,23,c[39]),T=n(T,k,D,B,P,4,c[40]),B=n(B,T,k,D,v,11,c[41]),D=n(D,B,T,k,b,16,c[42]),k=n(k,D,B,T,_,23,c[43]),T=n(T,k,D,B,x,4,c[44]),B=n(B,T,k,D,I,11,c[45]),D=n(D,B,T,k,M,16,c[46]),k=n(k,D,B,T,y,23,c[47]),T=r(T,k,D,B,v,6,c[48]),B=r(B,T,k,D,A,10,c[49]),D=r(D,B,T,k,R,15,c[50]),k=r(k,D,B,T,w,21,c[51]),T=r(T,k,D,B,I,6,c[52]),B=r(B,T,k,D,b,10,c[53]),D=r(D,B,T,k,E,15,c[54]),k=r(k,D,B,T,g,21,c[55]),T=r(T,k,D,B,C,6,c[56]),B=r(B,T,k,D,M,10,c[57]),D=r(D,B,T,k,_,15,c[58]),k=r(k,D,B,T,P,21,c[59]),T=r(T,k,D,B,S,6,c[60]),B=r(B,T,k,D,F,10,c[61]),D=r(D,B,T,k,y,15,c[62]),k=r(k,D,B,T,x,21,c[63]);f[0]=f[0]+T|0,f[1]=f[1]+k|0,f[2]=f[2]+D|0,f[3]=f[3]+B|0},_doFinalize:function(){var p=this._data,h=p.words,f=8*this._nDataBytes,v=8*p.sigBytes;h[v>>>5]|=128<<24-v%32;var g=t.floor(f/4294967296);for(h[(v+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,h[(v+64>>>9<<4)+14]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,p.sigBytes=4*(h.length+1),this._process(),p=this._hash,h=p.words,f=0;4>f;f++)v=h[f],h[f]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360;return p},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)})(Math);(function(){var t=z,r=t.lib,e=r.WordArray,i=r.Hasher,n=[],r=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,l){for(var a=this._hash.words,u=a[0],c=a[1],m=a[2],p=a[3],h=a[4],f=0;80>f;f++){if(16>f)n[f]=s[l+f]|0;else{var v=n[f-3]^n[f-8]^n[f-14]^n[f-16];n[f]=v<<1|v>>>31}v=(u<<5|u>>>27)+h+n[f],v=20>f?v+((c&m|~c&p)+1518500249):40>f?v+((c^m^p)+1859775393):60>f?v+((c&m|c&p|m&p)-1894007588):v+((c^m^p)-899497514),h=p,p=m,m=c<<30|c>>>2,c=u,u=v}a[0]=a[0]+u|0,a[1]=a[1]+c|0,a[2]=a[2]+m|0,a[3]=a[3]+p|0,a[4]=a[4]+h|0},_doFinalize:function(){var s=this._data,l=s.words,a=8*this._nDataBytes,u=8*s.sigBytes;return l[u>>>5]|=128<<24-u%32,l[(u+64>>>9<<4)+14]=Math.floor(a/4294967296),l[(u+64>>>9<<4)+15]=a,s.sigBytes=4*l.length,this._process(),this._hash},clone:function(){var s=i.clone.call(this);return s._hash=this._hash.clone(),s}});t.SHA1=i._createHelper(r),t.HmacSHA1=i._createHmacHelper(r)})();(function(t){for(var e=z,f=e.lib,i=f.WordArray,n=f.Hasher,f=e.algo,r=[],s=[],l=function(g){return 4294967296*(g-(g|0))|0},a=2,u=0;64>u;){var c;e:{c=a;for(var m=t.sqrt(c),p=2;p<=m;p++)if(!(c%p)){c=!1;break e}c=!0}c&&(8>u&&(r[u]=l(t.pow(a,.5))),s[u]=l(t.pow(a,1/3)),u++),a++}var h=[],f=f.SHA256=n.extend({_doReset:function(){this._hash=new i.init(r.slice(0))},_doProcessBlock:function(v,g){for(var y=this._hash.words,b=y[0],S=y[1],w=y[2],_=y[3],A=y[4],C=y[5],x=y[6],E=y[7],F=0;64>F;F++){if(16>F)h[F]=v[g+F]|0;else{var I=h[F-15],P=h[F-2];h[F]=((I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3)+h[F-7]+((P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10)+h[F-16]}I=E+((A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25))+(A&C^~A&x)+s[F]+h[F],P=((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+(b&S^b&w^S&w),E=x,x=C,C=A,A=_+I|0,_=w,w=S,S=b,b=I+P|0}y[0]=y[0]+b|0,y[1]=y[1]+S|0,y[2]=y[2]+w|0,y[3]=y[3]+_|0,y[4]=y[4]+A|0,y[5]=y[5]+C|0,y[6]=y[6]+x|0,y[7]=y[7]+E|0},_doFinalize:function(){var v=this._data,g=v.words,y=8*this._nDataBytes,b=8*v.sigBytes;return g[b>>>5]|=128<<24-b%32,g[(b+64>>>9<<4)+14]=t.floor(y/4294967296),g[(b+64>>>9<<4)+15]=y,v.sigBytes=4*g.length,this._process(),this._hash},clone:function(){var v=n.clone.call(this);return v._hash=this._hash.clone(),v}});e.SHA256=n._createHelper(f),e.HmacSHA256=n._createHmacHelper(f)})(Math);(function(){var t=z,e=t.lib.WordArray,n=t.algo,i=n.SHA256,n=n.SHA224=i.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var r=i._doFinalize.call(this);return r.sigBytes-=4,r}});t.SHA224=i._createHelper(n),t.HmacSHA224=i._createHmacHelper(n)})();(function(){function t(){return n.create.apply(n,arguments)}for(var e=z,i=e.lib.Hasher,s=e.x64,n=s.Word,r=s.WordArray,s=e.algo,l=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();s=s.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(c,m){for(var S=this._hash.words,p=S[0],h=S[1],f=S[2],v=S[3],g=S[4],y=S[5],b=S[6],S=S[7],w=p.high,_=p.low,A=h.high,C=h.low,x=f.high,E=f.low,F=v.high,I=v.low,P=g.high,R=g.low,M=y.high,T=y.low,B=b.high,D=b.low,k=S.high,K=S.low,V=w,G=_,J=A,$=C,de=x,ne=E,fe=F,ae=I,he=P,le=R,pe=M,ke=T,Ye=B,ct=D,qt=k,dt=K,Be=0;80>Be;Be++){var Ge=a[Be];if(16>Be)var Pe=Ge.high=c[m+2*Be]|0,te=Ge.low=c[m+2*Be+1]|0;else{var Pe=a[Be-15],te=Pe.high,Le=Pe.low,Pe=(te>>>1|Le<<31)^(te>>>8|Le<<24)^te>>>7,Le=(Le>>>1|te<<31)^(Le>>>8|te<<24)^(Le>>>7|te<<25),Ze=a[Be-2],te=Ze.high,ue=Ze.low,Ze=(te>>>19|ue<<13)^(te<<3|ue>>>29)^te>>>6,ue=(ue>>>19|te<<13)^(ue<<3|te>>>29)^(ue>>>6|te<<26),te=a[Be-7],Ut=te.high,Ke=a[Be-16],He=Ke.high,Ke=Ke.low,te=Le+te.low,Pe=Pe+Ut+(te>>>0<Le>>>0?1:0),te=te+ue,Pe=Pe+Ze+(te>>>0<ue>>>0?1:0),te=te+Ke,Pe=Pe+He+(te>>>0<Ke>>>0?1:0);Ge.high=Pe,Ge.low=te}var Ut=he&pe^~he&Ye,Ke=le&ke^~le&ct,Ge=V&J^V&de^J&de,eo=G&$^G&ne^$&ne,Le=(V>>>28|G<<4)^(V<<30|G>>>2)^(V<<25|G>>>7),Ze=(G>>>28|V<<4)^(G<<30|V>>>2)^(G<<25|V>>>7),ue=l[Be],to=ue.high,Xi=ue.low,ue=dt+((le>>>14|he<<18)^(le>>>18|he<<14)^(le<<23|he>>>9)),He=qt+((he>>>14|le<<18)^(he>>>18|le<<14)^(he<<23|le>>>9))+(ue>>>0<dt>>>0?1:0),ue=ue+Ke,He=He+Ut+(ue>>>0<Ke>>>0?1:0),ue=ue+Xi,He=He+to+(ue>>>0<Xi>>>0?1:0),ue=ue+te,He=He+Pe+(ue>>>0<te>>>0?1:0),te=Ze+eo,Ge=Le+Ge+(te>>>0<Ze>>>0?1:0),qt=Ye,dt=ct,Ye=pe,ct=ke,pe=he,ke=le,le=ae+ue|0,he=fe+He+(le>>>0<ae>>>0?1:0)|0,fe=de,ae=ne,de=J,ne=$,J=V,$=G,G=ue+te|0,V=He+Ge+(G>>>0<ue>>>0?1:0)|0}_=p.low=_+G,p.high=w+V+(_>>>0<G>>>0?1:0),C=h.low=C+$,h.high=A+J+(C>>>0<$>>>0?1:0),E=f.low=E+ne,f.high=x+de+(E>>>0<ne>>>0?1:0),I=v.low=I+ae,v.high=F+fe+(I>>>0<ae>>>0?1:0),R=g.low=R+le,g.high=P+he+(R>>>0<le>>>0?1:0),T=y.low=T+ke,y.high=M+pe+(T>>>0<ke>>>0?1:0),D=b.low=D+ct,b.high=B+Ye+(D>>>0<ct>>>0?1:0),K=S.low=K+dt,S.high=k+qt+(K>>>0<dt>>>0?1:0)},_doFinalize:function(){var c=this._data,m=c.words,p=8*this._nDataBytes,h=8*c.sigBytes;return m[h>>>5]|=128<<24-h%32,m[(h+128>>>10<<5)+30]=Math.floor(p/4294967296),m[(h+128>>>10<<5)+31]=p,c.sigBytes=4*m.length,this._process(),this._hash.toX32()},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},blockSize:32}),e.SHA512=i._createHelper(s),e.HmacSHA512=i._createHmacHelper(s)})();(function(){var t=z,r=t.x64,e=r.Word,i=r.WordArray,r=t.algo,n=r.SHA512,r=r.SHA384=n.extend({_doReset:function(){this._hash=new i.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var s=n._doFinalize.call(this);return s.sigBytes-=16,s}});t.SHA384=n._createHelper(r),t.HmacSHA384=n._createHmacHelper(r)})();(function(){var t=z,c=t.lib,e=c.WordArray,i=c.Hasher,c=t.algo,n=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),r=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=e.create([0,1518500249,1859775393,2400959708,2840853838]),u=e.create([1352829926,1548603684,1836072691,2053994217,0]),c=c.RIPEMD160=i.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,p){for(var h=0;16>h;h++){var f=p+h,v=m[f];m[f]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var f=this._hash.words,v=a.words,g=u.words,y=n.words,b=r.words,S=s.words,w=l.words,_,A,C,x,E,F,I,P,R,M;F=_=f[0],I=A=f[1],P=C=f[2],R=x=f[3],M=E=f[4];for(var T,h=0;80>h;h+=1)T=_+m[p+y[h]]|0,T=16>h?T+((A^C^x)+v[0]):32>h?T+((A&C|~A&x)+v[1]):48>h?T+(((A|~C)^x)+v[2]):64>h?T+((A&x|C&~x)+v[3]):T+((A^(C|~x))+v[4]),T|=0,T=T<<S[h]|T>>>32-S[h],T=T+E|0,_=E,E=x,x=C<<10|C>>>22,C=A,A=T,T=F+m[p+b[h]]|0,T=16>h?T+((I^(P|~R))+g[0]):32>h?T+((I&R|P&~R)+g[1]):48>h?T+(((I|~P)^R)+g[2]):64>h?T+((I&P|~I&R)+g[3]):T+((I^P^R)+g[4]),T|=0,T=T<<w[h]|T>>>32-w[h],T=T+M|0,F=M,M=R,R=P<<10|P>>>22,P=I,I=T;T=f[1]+C+R|0,f[1]=f[2]+x+M|0,f[2]=f[3]+E+F|0,f[3]=f[4]+_+I|0,f[4]=f[0]+A+P|0,f[0]=T},_doFinalize:function(){var m=this._data,p=m.words,h=8*this._nDataBytes,f=8*m.sigBytes;for(p[f>>>5]|=128<<24-f%32,p[(f+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,m.sigBytes=4*(p.length+1),this._process(),m=this._hash,p=m.words,h=0;5>h;h++)f=p[h],p[h]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360;return m},clone:function(){var m=i.clone.call(this);return m._hash=this._hash.clone(),m}});t.RIPEMD160=i._createHelper(c),t.HmacRIPEMD160=i._createHmacHelper(c)})(Math);(function(){var t=z,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(i,n){i=this._hasher=new i.init,typeof n=="string"&&(n=e.parse(n));var r=i.blockSize,s=4*r;n.sigBytes>s&&(n=i.finalize(n)),n.clamp();for(var l=this._oKey=n.clone(),a=this._iKey=n.clone(),u=l.words,c=a.words,m=0;m<r;m++)u[m]^=1549556828,c[m]^=909522486;l.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var n=this._hasher;return i=n.finalize(i),n.reset(),n.finalize(this._oKey.clone().concat(i))}})})();(function(){var t=z,n=t.lib,e=n.Base,i=n.WordArray,n=t.algo,r=n.HMAC,s=n.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,a){for(var v=this.cfg,u=r.create(v.hasher,l),c=i.create(),m=i.create([1]),p=c.words,h=m.words,f=v.keySize,v=v.iterations;p.length<f;){var g=u.update(a).finalize(m);u.reset();for(var y=g.words,b=y.length,S=g,w=1;w<v;w++){S=u.finalize(S),u.reset();for(var _=S.words,A=0;A<b;A++)y[A]^=_[A]}c.concat(g),h[0]++}return c.sigBytes=4*f,c}});t.PBKDF2=function(l,a,u){return s.create(u).compute(l,a)}})();var st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pi="=";function Ve(t){var e,i,n="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),n+=st.charAt(i>>6)+st.charAt(i&63);if(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),n+=st.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),n+=st.charAt(i>>2)+st.charAt((i&3)<<4)),pi)for(;(n.length&3)>0;)n+=pi;return n}function at(t){var e="",i,n=0,r,s;for(i=0;i<t.length&&t.charAt(i)!=pi;++i)s=st.indexOf(t.charAt(i)),!(s<0)&&(n==0?(e+=ze(s>>2),r=s&3,n=1):n==1?(e+=ze(r<<2|s>>4),r=s&15,n=2):n==2?(e+=ze(r),e+=ze(s>>2),r=s&3,n=3):(e+=ze(r<<2|s>>4),e+=ze(s&15),n=0));return n==1&&(e+=ze(r<<2)),e}function pr(t){var e=at(t),i,n=new Array;for(i=0;2*i<e.length;++i)n[i]=parseInt(e.substring(2*i,2*i+2),16);return n}var Je,Qo=0xdeadbeefcafe,cr=(Qo&16777215)==15715070;function O(t,e,i){t!=null&&(typeof t=="number"?this.fromNumber(t,e,i):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function X(){return new O(null)}function ea(t,e,i,n,r,s){for(;--s>=0;){var l=e*this[t++]+i[n]+r;r=Math.floor(l/67108864),i[n++]=l&67108863}return r}function ta(t,e,i,n,r,s){for(var l=e&32767,a=e>>15;--s>=0;){var u=this[t]&32767,c=this[t++]>>15,m=a*u+c*l;u=l*u+((m&32767)<<15)+i[n]+(r&1073741823),r=(u>>>30)+(m>>>15)+a*c+(r>>>30),i[n++]=u&1073741823}return r}function ia(t,e,i,n,r,s){for(var l=e&16383,a=e>>14;--s>=0;){var u=this[t]&16383,c=this[t++]>>14,m=a*u+c*l;u=l*u+((m&16383)<<14)+i[n]+r,r=(u>>28)+(m>>14)+a*c,i[n++]=u&268435455}return r}cr&&ft.appName=="Microsoft Internet Explorer"?(O.prototype.am=ta,Je=30):cr&&ft.appName!="Netscape"?(O.prototype.am=ea,Je=26):(O.prototype.am=ia,Je=28);O.prototype.DB=Je;O.prototype.DM=(1<<Je)-1;O.prototype.DV=1<<Je;var wi=52;O.prototype.FV=Math.pow(2,wi);O.prototype.F1=wi-Je;O.prototype.F2=2*Je-wi;var na="0123456789abcdefghijklmnopqrstuvwxyz",kt=new Array,lt,Re;lt="0".charCodeAt(0);for(Re=0;Re<=9;++Re)kt[lt++]=Re;lt="a".charCodeAt(0);for(Re=10;Re<36;++Re)kt[lt++]=Re;lt="A".charCodeAt(0);for(Re=10;Re<36;++Re)kt[lt++]=Re;function ze(t){return na.charAt(t)}function mr(t,e){var i=kt[t.charCodeAt(e)];return i??-1}function ra(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function sa(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function We(t){var e=X();return e.fromInt(t),e}function oa(t,e){var i;if(e==16)i=4;else if(e==8)i=3;else if(e==256)i=8;else if(e==2)i=1;else if(e==32)i=5;else if(e==4)i=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,r=!1,s=0;--n>=0;){var l=i==8?t[n]&255:mr(t,n);if(l<0){t.charAt(n)=="-"&&(r=!0);continue}r=!1,s==0?this[this.t++]=l:s+i>this.DB?(this[this.t-1]|=(l&(1<<this.DB-s)-1)<<s,this[this.t++]=l>>this.DB-s):this[this.t-1]|=l<<s,s+=i,s>=this.DB&&(s-=this.DB)}i==8&&t[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&O.ZERO.subTo(this,this)}function aa(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function la(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var i=(1<<e)-1,n,r=!1,s="",l=this.t,a=this.DB-l*this.DB%e;if(l-- >0)for(a<this.DB&&(n=this[l]>>a)>0&&(r=!0,s=ze(n));l>=0;)a<e?(n=(this[l]&(1<<a)-1)<<e-a,n|=this[--l]>>(a+=this.DB-e)):(n=this[l]>>(a-=e)&i,a<=0&&(a+=this.DB,--l)),n>0&&(r=!0),r&&(s+=ze(n));return r?s:"0"}function ua(){var t=X();return O.ZERO.subTo(this,t),t}function ca(){return this.s<0?this.negate():this}function da(t){var e=this.s-t.s;if(e!=0)return e;var i=this.t;if(e=i-t.t,e!=0)return this.s<0?-e:e;for(;--i>=0;)if((e=this[i]-t[i])!=0)return e;return 0}function Bt(t){var e=1,i;return(i=t>>>16)!=0&&(t=i,e+=16),(i=t>>8)!=0&&(t=i,e+=8),(i=t>>4)!=0&&(t=i,e+=4),(i=t>>2)!=0&&(t=i,e+=2),(i=t>>1)!=0&&(t=i,e+=1),e}function ha(){return this.t<=0?0:this.DB*(this.t-1)+Bt(this[this.t-1]^this.s&this.DM)}function fa(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function ga(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function pa(t,e){var i=t%this.DB,n=this.DB-i,r=(1<<n)-1,s=Math.floor(t/this.DB),l=this.s<<i&this.DM,a;for(a=this.t-1;a>=0;--a)e[a+s+1]=this[a]>>n|l,l=(this[a]&r)<<i;for(a=s-1;a>=0;--a)e[a]=0;e[s]=l,e.t=this.t+s+1,e.s=this.s,e.clamp()}function ma(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t){e.t=0;return}var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var l=i+1;l<this.t;++l)e[l-i-1]|=(this[l]&s)<<r,e[l-i]=this[l]>>n;n>0&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,e.clamp()}function va(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function ba(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&O.ZERO.subTo(e,e)}function ya(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function wa(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t){e?.fromInt(0),i!=null&&this.copyTo(i);return}i==null&&(i=X());var s=X(),l=this.s,a=t.s,u=this.DB-Bt(n[n.t-1]);u>0?(n.lShiftTo(u,s),r.lShiftTo(u,i)):(n.copyTo(s),r.copyTo(i));var c=s.t,m=s[c-1];if(m!=0){var p=m*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),h=this.FV/p,f=(1<<this.F1)/p,v=1<<this.F2,g=i.t,y=g-c,b=e??X();for(s.dlShiftTo(y,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),O.ONE.dlShiftTo(c,b),b.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--y>=0;){var S=i[--g]==m?this.DM:Math.floor(i[g]*h+(i[g-1]+v)*f);if((i[g]+=s.am(0,S,i,y,0,c))<S)for(s.dlShiftTo(y,b),i.subTo(b,i);i[g]<--S;)i.subTo(b,i)}e!=null&&(i.drShiftTo(c,e),l!=a&&O.ZERO.subTo(e,e)),i.t=c,i.clamp(),u>0&&i.rShiftTo(u,i),l<0&&O.ZERO.subTo(i,i)}}}function Sa(t){var e=X();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(O.ZERO)>0&&t.subTo(e,e),e}function et(t){this.m=t}function xa(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function _a(t){return t}function Ea(t){t.divRemTo(this.m,null,t)}function Aa(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Fa(t,e){t.squareTo(e),this.reduce(e)}et.prototype.convert=xa;et.prototype.revert=_a;et.prototype.reduce=Ea;et.prototype.mulTo=Aa;et.prototype.sqrTo=Fa;function Ia(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function tt(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Ca(t){var e=X();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(O.ZERO)>0&&this.m.subTo(e,e),e}function Pa(t){var e=X();return t.copyTo(e),this.reduce(e),e}function Ta(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=t[e]&32767,n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Ra(t,e){t.squareTo(e),this.reduce(e)}function Oa(t,e,i){t.multiplyTo(e,i),this.reduce(i)}tt.prototype.convert=Ca;tt.prototype.revert=Pa;tt.prototype.reduce=Ta;tt.prototype.mulTo=Oa;tt.prototype.sqrTo=Ra;function Da(){return(this.t>0?this[0]&1:this.s)==0}function ka(t,e){if(t>4294967295||t<1)return O.ONE;var i=X(),n=X(),r=e.convert(this),s=Bt(t)-1;for(r.copyTo(i);--s>=0;)if(e.sqrTo(i,n),(t&1<<s)>0)e.mulTo(n,r,i);else{var l=i;i=n,n=l}return e.revert(i)}function Ba(t,e){var i;return t<256||e.isEven()?i=new et(e):i=new tt(e),this.exp(t,i)}O.prototype.copyTo=ra;O.prototype.fromInt=sa;O.prototype.fromString=oa;O.prototype.clamp=aa;O.prototype.dlShiftTo=fa;O.prototype.drShiftTo=ga;O.prototype.lShiftTo=pa;O.prototype.rShiftTo=ma;O.prototype.subTo=va;O.prototype.multiplyTo=ba;O.prototype.squareTo=ya;O.prototype.divRemTo=wa;O.prototype.invDigit=Ia;O.prototype.isEven=Da;O.prototype.exp=ka;O.prototype.toString=la;O.prototype.negate=ua;O.prototype.abs=ca;O.prototype.compareTo=da;O.prototype.bitLength=ha;O.prototype.mod=Sa;O.prototype.modPowInt=Ba;O.ZERO=We(0);O.ONE=We(1);function Na(){var t=X();return this.copyTo(t),t}function Ma(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ja(){return this.t==0?this.s:this[0]<<24>>24}function La(){return this.t==0?this.s:this[0]<<16>>16}function Ha(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function za(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Va(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=We(i),r=X(),s=X(),l="";for(this.divRemTo(n,r,s);r.signum()>0;)l=(i+s.intValue()).toString(t).substr(1)+l,r.divRemTo(n,r,s);return s.intValue().toString(t)+l}function qa(t,e){this.fromInt(0),e==null&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,s=0,l=0,a=0;a<t.length;++a){var u=mr(t,a);if(u<0){t.charAt(a)=="-"&&this.signum()==0&&(r=!0);continue}l=e*l+u,++s>=i&&(this.dMultiply(n),this.dAddOffset(l,0),s=0,l=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(l,0)),r&&O.ZERO.subTo(this,this)}function Ua(t,e,i){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(O.ONE.shiftLeft(t-1),Si,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(O.ONE.shiftLeft(t-1),this);else{var n=new Array,r=t&7;n.length=(t>>3)+1,e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function Ka(){var t=this.t,e=new Array;e[0]=this.s;var i=this.DB-t*this.DB%8,n,r=0;if(t-- >0)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[r++]=n|this.s<<this.DB-i);t>=0;)i<8?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),n&128&&(n|=-256),r==0&&(this.s&128)!=(n&128)&&++r,(r>0||n!=this.s)&&(e[r++]=n);return e}function Ga(t){return this.compareTo(t)==0}function Wa(t){return this.compareTo(t)<0?this:t}function Ja(t){return this.compareTo(t)>0?this:t}function $a(t,e,i){var n,r,s=Math.min(t.t,this.t);for(n=0;n<s;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=s;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=s;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function Xa(t,e){return t&e}function Ya(t){var e=X();return this.bitwiseTo(t,Xa,e),e}function Si(t,e){return t|e}function Za(t){var e=X();return this.bitwiseTo(t,Si,e),e}function vr(t,e){return t^e}function Qa(t){var e=X();return this.bitwiseTo(t,vr,e),e}function br(t,e){return t&~e}function el(t){var e=X();return this.bitwiseTo(t,br,e),e}function tl(){for(var t=X(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function il(t){var e=X();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function nl(t){var e=X();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function rl(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function sl(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+rl(this[t]);return this.s<0?this.t*this.DB:-1}function ol(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function al(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=ol(this[i]^e);return t}function ll(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function ul(t,e){var i=O.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function cl(t){return this.changeBit(t,Si)}function dl(t){return this.changeBit(t,br)}function hl(t){return this.changeBit(t,vr)}function fl(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function gl(t){var e=X();return this.addTo(t,e),e}function pl(t){var e=X();return this.subTo(t,e),e}function ml(t){var e=X();return this.multiplyTo(t,e),e}function vl(){var t=X();return this.squareTo(t),t}function bl(t){var e=X();return this.divRemTo(t,e,null),e}function yl(t){var e=X();return this.divRemTo(t,null,e),e}function wl(t){var e=X(),i=X();return this.divRemTo(t,e,i),new Array(e,i)}function Sl(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function xl(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function pt(){}function yr(t){return t}function _l(t,e,i){t.multiplyTo(e,i)}function El(t,e){t.squareTo(e)}pt.prototype.convert=yr;pt.prototype.revert=yr;pt.prototype.mulTo=_l;pt.prototype.sqrTo=El;function Al(t){return this.exp(t,new pt)}function Fl(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var r;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function Il(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function ut(t){this.r2=X(),this.q3=X(),O.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Cl(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=X();return t.copyTo(e),this.reduce(e),e}function Pl(t){return t}function Tl(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Rl(t,e){t.squareTo(e),this.reduce(e)}function Ol(t,e,i){t.multiplyTo(e,i),this.reduce(i)}ut.prototype.convert=Cl;ut.prototype.revert=Pl;ut.prototype.reduce=Tl;ut.prototype.mulTo=Ol;ut.prototype.sqrTo=Rl;function Dl(t,e){var i=t.bitLength(),n,r=We(1),s;if(i<=0)return r;i<18?n=1:i<48?n=3:i<144?n=4:i<768?n=5:n=6,i<8?s=new et(e):e.isEven()?s=new ut(e):s=new tt(e);var l=new Array,a=3,u=n-1,c=(1<<n)-1;if(l[1]=s.convert(this),n>1){var m=X();for(s.sqrTo(l[1],m);a<=c;)l[a]=X(),s.mulTo(m,l[a-2],l[a]),a+=2}var p=t.t-1,h,f=!0,v=X(),g;for(i=Bt(t[p])-1;p>=0;){for(i>=u?h=t[p]>>i-u&c:(h=(t[p]&(1<<i+1)-1)<<u-i,p>0&&(h|=t[p-1]>>this.DB+i-u)),a=n;!(h&1);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),f)l[h].copyTo(r),f=!1;else{for(;a>1;)s.sqrTo(r,v),s.sqrTo(v,r),a-=2;a>0?s.sqrTo(r,v):(g=r,r=v,v=g),s.mulTo(v,l[h],r)}for(;p>=0&&!(t[p]&1<<i);)s.sqrTo(r,v),g=r,r=v,v=g,--i<0&&(i=this.DB-1,--p)}return s.revert(r)}function kl(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(r<s&&(s=r),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i}function Bl(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(e==0)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function Nl(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return O.ZERO;for(var i=t.clone(),n=this.clone(),r=We(1),s=We(0),l=We(0),a=We(1);i.signum()!=0;){for(;i.isEven();)i.rShiftTo(1,i),e?((!r.isEven()||!s.isEven())&&(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!l.isEven()||!a.isEven())&&(l.addTo(this,l),a.subTo(t,a)),l.rShiftTo(1,l)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(l,r),s.subTo(a,s)):(n.subTo(i,n),e&&l.subTo(r,l),a.subTo(s,a))}if(n.compareTo(O.ONE)!=0)return O.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ml=(1<<26)/Ae[Ae.length-1];function jl(t){var e,i=this.abs();if(i.t==1&&i[0]<=Ae[Ae.length-1]){for(e=0;e<Ae.length;++e)if(i[0]==Ae[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Ae.length;){for(var n=Ae[e],r=e+1;r<Ae.length&&n<Ml;)n*=Ae[r++];for(n=i.modInt(n);e<r;)if(n%Ae[e++]==0)return!1}return i.millerRabin(t)}function Ll(t){var e=this.subtract(O.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);t=t+1>>1,t>Ae.length&&(t=Ae.length);for(var r=X(),s=0;s<t;++s){r.fromInt(Ae[Math.floor(Math.random()*Ae.length)]);var l=r.modPow(n,this);if(l.compareTo(O.ONE)!=0&&l.compareTo(e)!=0){for(var a=1;a++<i&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(O.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}O.prototype.chunkSize=Ha;O.prototype.toRadix=Va;O.prototype.fromRadix=qa;O.prototype.fromNumber=Ua;O.prototype.bitwiseTo=$a;O.prototype.changeBit=ul;O.prototype.addTo=fl;O.prototype.dMultiply=Sl;O.prototype.dAddOffset=xl;O.prototype.multiplyLowerTo=Fl;O.prototype.multiplyUpperTo=Il;O.prototype.modInt=Bl;O.prototype.millerRabin=Ll;O.prototype.clone=Na;O.prototype.intValue=Ma;O.prototype.byteValue=ja;O.prototype.shortValue=La;O.prototype.signum=za;O.prototype.toByteArray=Ka;O.prototype.equals=Ga;O.prototype.min=Wa;O.prototype.max=Ja;O.prototype.and=Ya;O.prototype.or=Za;O.prototype.xor=Qa;O.prototype.andNot=el;O.prototype.not=tl;O.prototype.shiftLeft=il;O.prototype.shiftRight=nl;O.prototype.getLowestSetBit=sl;O.prototype.bitCount=al;O.prototype.testBit=ll;O.prototype.setBit=cl;O.prototype.clearBit=dl;O.prototype.flipBit=hl;O.prototype.add=gl;O.prototype.subtract=pl;O.prototype.multiply=ml;O.prototype.divide=bl;O.prototype.remainder=yl;O.prototype.divideAndRemainder=wl;O.prototype.modPow=Dl;O.prototype.modInverse=Nl;O.prototype.pow=Al;O.prototype.gcd=kl;O.prototype.isProbablePrime=jl;O.prototype.square=vl;function xi(){this.i=0,this.j=0,this.S=new Array}function Hl(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0}function zl(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}xi.prototype.init=Hl;xi.prototype.next=zl;function Vl(){return new xi}var mi=256;var Tt,Ce,ye;function ql(t){Ce[ye++]^=t&255,Ce[ye++]^=t>>8&255,Ce[ye++]^=t>>16&255,Ce[ye++]^=t>>24&255,ye>=mi&&(ye-=mi)}function _i(){ql(new Date().getTime())}if(Ce==null){if(Ce=new Array,ye=0,rt!==void 0&&(rt.crypto!==void 0||rt.msCrypto!==void 0)){if(hi=rt.crypto||rt.msCrypto,hi.getRandomValues)for(fi=new Uint8Array(32),hi.getRandomValues(fi),Te=0;Te<32;++Te)Ce[ye++]=fi[Te];else if(ft.appName=="Netscape"&&ft.appVersion<"5")for(gi=rt.crypto.random(32),Te=0;Te<gi.length;++Te)Ce[ye++]=gi.charCodeAt(Te)&255}for(;ye<mi;)Te=Math.floor(65536*Math.random()),Ce[ye++]=Te>>>8,Ce[ye++]=Te&255;ye=0,_i()}var Te,hi,fi,gi;function Ul(){if(Tt==null){for(_i(),Tt=Vl(),Tt.init(Ce),ye=0;ye<Ce.length;++ye)Ce[ye]=0;ye=0}return Tt.next()}function Kl(t){var e;for(e=0;e<t.length;++e)t[e]=Ul()}function $e(){}$e.prototype.nextBytes=Kl;function xe(t,e){return new O(t,e)}function Gl(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var i=new Array,n=t.length-1;n>=0&&e>0;){var r=t.charCodeAt(n--);r<128?i[--e]=r:r>127&&r<2048?(i[--e]=r&63|128,i[--e]=r>>6|192):(i[--e]=r&63|128,i[--e]=r>>6&63|128,i[--e]=r>>12|224)}i[--e]=0;for(var s=new $e,l=new Array;e>2;){for(l[0]=0;l[0]==0;)s.nextBytes(l);i[--e]=l[0]}return i[--e]=2,i[--e]=0,new O(i)}function dr(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))),r+=1;return n}function Wl(t,e,i,n){var r=d.crypto.MessageDigest,s=d.crypto.Util,l=null;if(i||(i="sha1"),typeof i=="string"&&(l=r.getCanonicalAlgName(i),n=r.getHashLength(l),i=function(g){return _e(s.hashHex(Oe(g),l))}),t.length+2*n+2>e)throw"Message too long for RSA";var a="",u;for(u=0;u<e-t.length-2*n-2;u+=1)a+="\0";var c=i("")+a+""+t,m=new Array(n);new $e().nextBytes(m);var p=dr(m,c.length,i),h=[];for(u=0;u<c.length;u+=1)h[u]=c.charCodeAt(u)^p.charCodeAt(u);var f=dr(h,m.length,i),v=[0];for(u=0;u<m.length;u+=1)v[u+1]=m[u]^f.charCodeAt(u);return new O(v.concat(h))}function q(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Jl(t,e){if(this.isPublic=!0,this.isPrivate=!1,typeof t!="string")this.n=t,this.e=e;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=xe(t,16),this.e=parseInt(e,16);else throw"Invalid RSA public key"}function $l(t){return t.modPowInt(this.e,this.n)}function Xl(t){var e=Gl(t,this.n.bitLength()+7>>3);if(e==null)return null;var i=this.doPublic(e);if(i==null)return null;var n=i.toString(16);return n.length&1?"0"+n:n}function Yl(t,e,i){var n=Wl(t,this.n.bitLength()+7>>3,e,i);if(n==null)return null;var r=this.doPublic(n);if(r==null)return null;var s=r.toString(16);return s.length&1?"0"+s:s}q.prototype.doPublic=$l;q.prototype.setPublic=Jl;q.prototype.encrypt=Xl;q.prototype.encryptOAEP=Yl;q.prototype.type="RSA";function Zl(t,e){for(var i=t.toByteArray(),n=0;n<i.length&&i[n]==0;)++n;if(i.length-n!=e-1||i[n]!=2)return null;for(++n;i[n]!=0;)if(++n>=i.length)return null;for(var r="";++n<i.length;){var s=i[n]&255;s<128?r+=String.fromCharCode(s):s>191&&s<224?(r+=String.fromCharCode((s&31)<<6|i[n+1]&63),++n):(r+=String.fromCharCode((s&15)<<12|(i[n+1]&63)<<6|i[n+2]&63),n+=2)}return r}function hr(t,e,i){for(var n="",r=0;n.length<e;)n+=i(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])),r+=1;return n}function Ql(t,e,i,n){var r=d.crypto.MessageDigest,s=d.crypto.Util,l=null;i||(i="sha1"),typeof i=="string"&&(l=r.getCanonicalAlgName(i),n=r.getHashLength(l),i=function(y){return _e(s.hashHex(Oe(y),l))}),t=t.toByteArray();var p;for(p=0;p<t.length;p+=1)t[p]&=255;for(;t.length<e;)t.unshift(0);if(t=String.fromCharCode.apply(String,t),t.length<2*n+2)throw"Cipher too short";var a=t.substr(1,n),u=t.substr(n+1),c=hr(u,n,i),m=[],p;for(p=0;p<a.length;p+=1)m[p]=a.charCodeAt(p)^c.charCodeAt(p);var h=hr(String.fromCharCode.apply(String,m),t.length-n,i),f=[];for(p=0;p<u.length;p+=1)f[p]=u.charCodeAt(p)^h.charCodeAt(p);if(f=String.fromCharCode.apply(String,f),f.substr(0,n)!==i(""))throw"Hash mismatch";f=f.substr(n);var v=f.indexOf(""),g=v!=-1?f.substr(0,v).lastIndexOf("\0"):-1;if(g+1!=v)throw"Malformed data";return f.substr(v+1)}function eu(t,e,i){if(this.isPrivate=!0,typeof t!="string")this.n=t,this.e=e,this.d=i;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=xe(t,16),this.e=parseInt(e,16),this.d=xe(i,16);else throw"Invalid RSA private key"}function tu(t,e,i,n,r,s,l,a){if(this.isPrivate=!0,this.isPublic=!1,t==null)throw"RSASetPrivateEx N == null";if(e==null)throw"RSASetPrivateEx E == null";if(t.length==0)throw"RSASetPrivateEx N.length == 0";if(e.length==0)throw"RSASetPrivateEx E.length == 0";if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=xe(t,16),this.e=parseInt(e,16),this.d=xe(i,16),this.p=xe(n,16),this.q=xe(r,16),this.dmp1=xe(s,16),this.dmq1=xe(l,16),this.coeff=xe(a,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function iu(t,e){var i=new $e,n=t>>1;this.e=parseInt(e,16);for(var r=new O(e,16),s=t/2-100,l=O.ONE.shiftLeft(s);;){for(;this.p=new O(t-n,1,i),!(this.p.subtract(O.ONE).gcd(r).compareTo(O.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new O(n,1,i),!(this.q.subtract(O.ONE).gcd(r).compareTo(O.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var u=this.q.subtract(this.p).abs();if(!(u.bitLength()<s||u.compareTo(l)<=0)){var c=this.p.subtract(O.ONE),m=this.q.subtract(O.ONE),p=c.multiply(m);if(p.gcd(r).compareTo(O.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=r.modInverse(p),this.dmp1=this.d.mod(c),this.dmq1=this.d.mod(m),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function nu(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function ru(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=xe(t,16),i=this.doPrivate(e);return i==null?null:Zl(i,this.n.bitLength()+7>>3)}function su(t,e,i){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=xe(t,16),r=this.doPrivate(n);return r==null?null:Ql(r,this.n.bitLength()+7>>3,e,i)}q.prototype.doPrivate=nu;q.prototype.setPrivate=eu;q.prototype.setPrivateEx=tu;q.prototype.generate=iu;q.prototype.decrypt=ru;q.prototype.decryptOAEP=su;function ve(t,e){this.x=e,this.q=t}function ou(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function au(){return this.x}function lu(){return new ve(this.q,this.x.negate().mod(this.q))}function uu(t){return new ve(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function cu(t){return new ve(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function du(t){return new ve(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function hu(){return new ve(this.q,this.x.square().mod(this.q))}function fu(t){return new ve(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}ve.prototype.equals=ou;ve.prototype.toBigInteger=au;ve.prototype.negate=lu;ve.prototype.add=uu;ve.prototype.subtract=cu;ve.prototype.multiply=du;ve.prototype.square=hu;ve.prototype.divide=fu;ve.prototype.sqrt=function(){return new ve(this.q,this.x.sqrt().mod(this.q))};function Q(t,e,i,n){this.curve=t,this.x=e,this.y=i,n==null?this.z=O.ONE:this.z=n,this.zinv=null}function gu(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pu(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function mu(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,i;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e.equals(O.ZERO)?(i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),i.equals(O.ZERO)):!1}function vu(){return this.x==null&&this.y==null?!0:this.z.equals(O.ZERO)&&!this.y.toBigInteger().equals(O.ZERO)}function bu(){return new Q(this.curve,this.x,this.y.negate(),this.z)}function yu(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(O.ZERO.equals(i))return O.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new O("3"),r=this.x.toBigInteger(),s=this.y.toBigInteger(),l=t.x.toBigInteger(),a=t.y.toBigInteger(),u=i.square(),c=u.multiply(i),m=r.multiply(u),p=e.square().multiply(this.z),h=p.subtract(m.shiftLeft(1)).multiply(t.z).subtract(c).multiply(i).mod(this.curve.q),f=m.multiply(n).multiply(e).subtract(s.multiply(c)).subtract(p.multiply(e)).multiply(t.z).add(e.multiply(c)).mod(this.curve.q),v=c.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(f),v)}function wu(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new O("3"),e=this.x.toBigInteger(),i=this.y.toBigInteger(),n=i.multiply(this.z),r=n.multiply(i).mod(this.curve.q),s=this.curve.a.toBigInteger(),l=e.square().multiply(t);O.ZERO.equals(s)||(l=l.add(this.z.square().multiply(s))),l=l.mod(this.curve.q);var a=l.square().subtract(e.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),u=l.multiply(t).multiply(e).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(l.square().multiply(l)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)}function Su(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new O("3")),n=this.negate(),r=this,s=this.curve.q.subtract(t),l=s.multiply(new O("3")),a=new Q(this.curve,this.x,this.y),u=a.negate(),c;for(c=i.bitLength()-2;c>0;--c){r=r.twice();var m=i.testBit(c),p=e.testBit(c);m!=p&&(r=r.add(m?this:n))}for(c=l.bitLength()-2;c>0;--c){a=a.twice();var h=l.testBit(c),f=s.testBit(c);h!=f&&(a=a.add(h?a:u))}return r}function xu(t,e,i){var n;t.bitLength()>i.bitLength()?n=t.bitLength()-1:n=i.bitLength()-1;for(var r=this.curve.getInfinity(),s=this.add(e);n>=0;)r=r.twice(),t.testBit(n)?i.testBit(n)?r=r.add(s):r=r.add(this):i.testBit(n)&&(r=r.add(e)),--n;return r}Q.prototype.getX=gu;Q.prototype.getY=pu;Q.prototype.equals=mu;Q.prototype.isInfinity=vu;Q.prototype.negate=bu;Q.prototype.add=yu;Q.prototype.twice=wu;Q.prototype.multiply=Su;Q.prototype.multiplyTwo=xu;function qe(t,e,i){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(i),this.infinity=new Q(this,null,null)}function _u(){return this.q}function Eu(){return this.a}function Au(){return this.b}function Fu(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function Iu(){return this.infinity}function Cu(t){return new ve(this.q,t)}function Pu(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),i=t.substr(2),n=this.fromBigInteger(new O(c,16)),r=this.getA(),s=this.getB(),l=n.square().add(r).multiply(n).add(s),a=l.sqrt();return e=="03"&&(a=a.negate()),new Q(this,n,a);case 4:case 6:case 7:var u=(t.length-2)/2,c=t.substr(2,u),m=t.substr(u+2,u);return new Q(this,this.fromBigInteger(new O(c,16)),this.fromBigInteger(new O(m,16)));default:return null}}qe.prototype.getQ=_u;qe.prototype.getA=Eu;qe.prototype.getB=Au;qe.prototype.equals=Fu;qe.prototype.getInfinity=Iu;qe.prototype.fromBigInteger=Cu;qe.prototype.decodePointHex=Pu;ve.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};Q.prototype.getEncoded=function(t){var e=function(s,l){var a=s.toByteArrayUnsigned();if(l<a.length)a=a.slice(a.length-l);else for(;l>a.length;)a.unshift(0);return a},i=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=e(i,32);return t?n.isEven()?r.unshift(2):r.unshift(3):(r.unshift(4),r=r.concat(e(n,32))),r};Q.decodeFrom=function(t,e){var i=e[0],n=e.length-1,r=e.slice(1,1+n/2),s=e.slice(1+n/2,1+n);r.unshift(0),s.unshift(0);var l=new O(r),a=new O(s);return new Q(t,t.fromBigInteger(l),t.fromBigInteger(a))};Q.decodeFromHex=function(t,e){var i=e.substr(0,2),n=e.length-2,r=e.substr(2,n/2),s=e.substr(2+n/2,n/2),l=new O(r,16),a=new O(s,16);return new Q(t,t.fromBigInteger(l),t.fromBigInteger(a))};Q.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),i=t.y.subtract(this.y),n=i.divide(e),r=n.square().subtract(this.x).subtract(t.x),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new Q(this.curve,r,s)};Q.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=this.curve.fromBigInteger(O.valueOf(2)),e=this.curve.fromBigInteger(O.valueOf(3)),i=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=i.square().subtract(this.x.multiply(t)),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new Q(this.curve,n,r)};Q.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new O("3")),n=this.negate(),r=this,s;for(s=i.bitLength()-2;s>0;--s){r=r.twice();var l=i.testBit(s),a=e.testBit(s);l!=a&&(r=r.add2D(l?this:n))}return r};Q.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),r=this.curve.getQ(),s=e.multiply(e).mod(r),l=t.multiply(t).multiply(t).add(i.multiply(t)).add(n).mod(r);return s.equals(l)};Q.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};Q.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(e.compareTo(O.ONE)<0||e.compareTo(t.subtract(O.ONE))>0)throw new Error("x coordinate out of bounds");if(i.compareTo(O.ONE)<0||i.compareTo(t.subtract(O.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var wr=function(){var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",e='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',i='(?:"'+e+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+i+")","g"),r=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function l(p,h,f){return h?s[h]:String.fromCharCode(parseInt(f,16))}var a=new String(""),u="\\",c={"{":Object,"[":Array},m=Object.hasOwnProperty;return function(p,h){var f=p.match(n),v,g=f[0],y=!1;g==="{"?v={}:g==="["?v=[]:(v=[],y=!0);for(var b,S=[v],w=1-y,_=f.length;w<_;++w){g=f[w];var A;switch(g.charCodeAt(0)){default:A=S[0],A[b||A.length]=+g,b=void 0;break;case 34:if(g=g.substring(1,g.length-1),g.indexOf(u)!==-1&&(g=g.replace(r,l)),A=S[0],!b)if(A instanceof Array)b=A.length;else{b=g||a;break}A[b]=g,b=void 0;break;case 91:A=S[0],S.unshift(A[b||A.length]=[]),b=void 0;break;case 93:S.shift();break;case 102:A=S[0],A[b||A.length]=!1,b=void 0;break;case 110:A=S[0],A[b||A.length]=null,b=void 0;break;case 116:A=S[0],A[b||A.length]=!0,b=void 0;break;case 123:A=S[0],S.unshift(A[b||A.length]={}),b=void 0;break;case 125:S.shift();break}}if(y){if(S.length!==1)throw new Error;v=v[0]}else if(S.length)throw new Error;if(h){var C=function(x,E){var F=x[E];if(F&&typeof F=="object"){var I=null;for(var P in F)if(m.call(F,P)&&F!==x){var R=C(F,P);R!==void 0?F[P]=R:(I||(I=[]),I.push(P))}if(I)for(var M=I.length;--M>=0;)delete F[I[M]]}return h.call(x,E,F)};v=C({"":v},"")}return v}}();(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});d.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if(e.substr(0,1)!="-")e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1),n=i.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",s=0;s<n;s++)r+="f";var l=new O(r,16),a=l.xor(t).add(O.ONE);e=a.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return be(t,e)},this.newObject=function(t){var e=d,i=e.asn1,n=i.ASN1Object,r=i.DERBoolean,s=i.DERInteger,l=i.DERBitString,a=i.DEROctetString,u=i.DERNull,c=i.DERObjectIdentifier,m=i.DEREnumerated,p=i.DERUTF8String,h=i.DERNumericString,f=i.DERPrintableString,v=i.DERTeletexString,g=i.DERIA5String,y=i.DERUTCTime,b=i.DERGeneralizedTime,S=i.DERVisibleString,w=i.DERBMPString,_=i.DERSequence,A=i.DERSet,C=i.DERTaggedObject,x=i.ASN1Util.newObject;if(t instanceof i.ASN1Object)return t;var E=Object.keys(t);if(E.length!=1)throw new Error("key of param shall be only one.");var F=E[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+F+":")==-1)throw new Error("undefined key: "+F);if(F=="bool")return new r(t[F]);if(F=="int")return new s(t[F]);if(F=="bitstr")return new l(t[F]);if(F=="octstr")return new a(t[F]);if(F=="null")return new u(t[F]);if(F=="oid")return new c(t[F]);if(F=="enum")return new m(t[F]);if(F=="utf8str")return new p(t[F]);if(F=="numstr")return new h(t[F]);if(F=="prnstr")return new f(t[F]);if(F=="telstr")return new v(t[F]);if(F=="ia5str")return new g(t[F]);if(F=="utctime")return new y(t[F]);if(F=="gentime")return new b(t[F]);if(F=="visstr")return new S(t[F]);if(F=="bmpstr")return new w(t[F]);if(F=="asn1")return new n(t[F]);if(F=="seq"){for(var I=t[F],P=[],R=0;R<I.length;R++){var M=x(I[R]);P.push(M)}return new _({array:P})}if(F=="set"){for(var I=t[F],P=[],R=0;R<I.length;R++){var M=x(I[R]);P.push(M)}return new A({array:P})}if(F=="tag"){var T=t[F];if(Object.prototype.toString.call(T)==="[object Array]"&&T.length==3){var B=x(T[2]);return new C({tag:T[0],explicit:T[1],obj:B})}else return new C(T)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.tohex()}};d.asn1.ASN1Util.oidHexToInt=function(t){for(var r="",e=parseInt(t.substr(0,2),16),i=Math.floor(e/40),n=e%40,r=i+"."+n,s="",l=2;l<t.length;l+=2){var a=parseInt(t.substr(l,2),16),u=("00000000"+a.toString(2)).slice(-8);if(s=s+u.substr(1,7),u.substr(0,1)=="0"){var c=new O(s,2);r=r+"."+c.toString(10),s=""}}return r};d.asn1.ASN1Util.oidIntToHex=function(t){var e=function(a){var u=a.toString(16);return u.length==1&&(u="0"+u),u},i=function(a){var u="",c=new O(a,10),m=c.toString(2),p=7-m.length%7;p==7&&(p=0);for(var h="",f=0;f<p;f++)h+="0";m=h+m;for(var f=0;f<m.length-1;f+=7){var v=m.substr(f,7);f!=m.length-7&&(v="1"+v),u+=e(parseInt(v,2))}return u};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),s=parseInt(r[0])*40+parseInt(r[1]);n+=e(s),r.splice(0,2);for(var l=0;l<r.length;l++)n+=i(r[l]);return n};d.asn1.ASN1Object=function(t){var e=!0,i=null,n="00",r="00",s="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+s.length+",v="+this.hV);var l=this.hV.length/2,a=l.toString(16);if(a.length%2==1&&(a="0"+a),l<128)return a;var u=a.length/2;if(u>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+l.toString(16));var c=128+u;return c.toString(16)+a},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(l){this.params=l},t!=null&&t.tlv!=null&&(this.hTLV=t.tlv,this.isModified=!1)};d.asn1.DERAbstractString=function(t){d.asn1.DERAbstractString.superclass.constructor.call(this);var e=null,i=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=Mt(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"?this.setString(t):typeof t.str<"u"?this.setString(t.str):typeof t.hex<"u"&&this.setStringHex(t.hex))};N(d.asn1.DERAbstractString,d.asn1.ASN1Object);d.asn1.DERAbstractTime=function(t){d.asn1.DERAbstractTime.superclass.constructor.call(this);var e=null,i=null;this.localDateToUTC=function(n){var r=n.getTime()+n.getTimezoneOffset()*6e4,s=new Date(r);return s},this.formatDate=function(n,r,s){var l=this.zeroPadding,a=this.localDateToUTC(n),u=String(a.getFullYear());r=="utc"&&(u=u.substr(2,2));var c=l(String(a.getMonth()+1),2),m=l(String(a.getDate()),2),p=l(String(a.getHours()),2),h=l(String(a.getMinutes()),2),f=l(String(a.getSeconds()),2),v=u+c+m+p+h+f;if(s===!0){var g=a.getMilliseconds();if(g!=0){var y=l(String(g),3);y=y.replace(/[0]+$/,""),v=v+"."+y}}return v+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,r,s,l,a,u){var c=new Date(Date.UTC(n,r-1,s,l,a,u,0));this.setByDate(c)},this.getFreshValueHex=function(){return this.hV}};N(d.asn1.DERAbstractTime,d.asn1.ASN1Object);d.asn1.DERAbstractStructured=function(t){d.asn1.DERAbstractString.superclass.constructor.call(this);var e=null;this.setByASN1ObjectArray=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array=i},this.appendASN1Object=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array.push(i)},this.asn1Array=new Array,typeof t<"u"&&typeof t.array<"u"&&(this.asn1Array=t.array)};N(d.asn1.DERAbstractStructured,d.asn1.ASN1Object);d.asn1.DERBoolean=function(t){d.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",t==!1?this.hTLV="010100":this.hTLV="0101ff"};N(d.asn1.DERBoolean,d.asn1.ASN1Object);d.asn1.DERInteger=function(t){d.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=d.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new O(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.bigint<"u"?this.setByBigInteger(t.bigint):typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};N(d.asn1.DERInteger,d.asn1.ASN1Object);d.asn1.DERBitString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=d.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}d.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(i){this.hTLV=null,this.isModified=!0,this.hV=i},this.setUnusedBitsAndHexValue=function(i,n){if(i<0||7<i)throw"unused bits shall be from 0 to 7: u = "+i;var r="0"+i;this.hTLV=null,this.isModified=!0,this.hV=r+n},this.setByBinaryString=function(i){i=i.replace(/0+$/,"");var n=8-i.length%8;n==8&&(n=0),i+="0000000".substr(0,n);for(var r="",s=0;s<i.length-1;s+=8){var l=i.substr(s,8),a=parseInt(l,2).toString(16);a.length==1&&(a="0"+a),r+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+n+r},this.setByBooleanArray=function(i){for(var n="",r=0;r<i.length;r++)i[r]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(i){for(var n=new Array(i),r=0;r<i;r++)n[r]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):typeof t.hex<"u"?this.setHexValueIncludingUnusedBits(t.hex):typeof t.bin<"u"?this.setByBinaryString(t.bin):typeof t.array<"u"&&this.setByBooleanArray(t.array))};N(d.asn1.DERBitString,d.asn1.ASN1Object);d.asn1.DEROctetString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=d.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}d.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"};N(d.asn1.DEROctetString,d.asn1.DERAbstractString);d.asn1.DERNull=function(){d.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};N(d.asn1.DERNull,d.asn1.ASN1Object);d.asn1.DERObjectIdentifier=function(t){d.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var i=Cr(e);if(i==null)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(e){var i=d.asn1.x509.OID.name2oid(e);if(i!=="")this.setValueOidString(i);else throw new Error("DERObjectIdentifier oidName undefined: "+e)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){typeof e=="string"?this.setValueNameOrOid(e):e.oid!==void 0?this.setValueNameOrOid(e.oid):e.name!==void 0?this.setValueNameOrOid(e.name):e.hex!==void 0&&this.setValueHex(e.hex)},t!==void 0&&this.setByParam(t)};N(d.asn1.DERObjectIdentifier,d.asn1.ASN1Object);d.asn1.DEREnumerated=function(t){d.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=d.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new O(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};N(d.asn1.DEREnumerated,d.asn1.ASN1Object);d.asn1.DERUTF8String=function(t){d.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"};N(d.asn1.DERUTF8String,d.asn1.DERAbstractString);d.asn1.DERNumericString=function(t){d.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"};N(d.asn1.DERNumericString,d.asn1.DERAbstractString);d.asn1.DERPrintableString=function(t){d.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"};N(d.asn1.DERPrintableString,d.asn1.DERAbstractString);d.asn1.DERTeletexString=function(t){d.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"};N(d.asn1.DERTeletexString,d.asn1.DERAbstractString);d.asn1.DERIA5String=function(t){d.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"};N(d.asn1.DERIA5String,d.asn1.DERAbstractString);d.asn1.DERVisibleString=function(t){d.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"};N(d.asn1.DERVisibleString,d.asn1.DERAbstractString);d.asn1.DERBMPString=function(t){d.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"};N(d.asn1.DERBMPString,d.asn1.DERAbstractString);d.asn1.DERUTCTime=function(t){d.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Ie(e);else throw new Error("malformed string for UTCTime: "+e);else if(e.str!=null)this.hV=Ie(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Ie(this.formatDate(i,"utc",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Ie(this.formatDate(e.date,"utc",n))}else e instanceof Date&&(this.hV=Ie(this.formatDate(e,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},t!=null&&this.setByParam(t)};N(d.asn1.DERUTCTime,d.asn1.DERAbstractTime);d.asn1.DERGeneralizedTime=function(t){d.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{14}Z$/)||e.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Ie(e);else throw new Error("malformed string for GeneralizedTime: "+e);else if(e.str!=null)this.hV=Ie(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Ie(this.formatDate(i,"gen",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Ie(this.formatDate(e.date,"gen",n))}else e instanceof Date&&(this.hV=Ie(this.formatDate(e,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},t!=null&&this.setByParam(t)};N(d.asn1.DERGeneralizedTime,d.asn1.DERAbstractTime);d.asn1.DERSequence=function(t){d.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var e="",i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e+=n.tohex()}return this.hV=e,this.hV}};N(d.asn1.DERSequence,d.asn1.DERAbstractStructured);d.asn1.DERSet=function(t){d.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e.push(n.tohex())}return this.sortFlag==!0&&e.sort(),this.hV=e.join(""),this.hV},typeof t<"u"&&typeof t.sortflag<"u"&&t.sortflag==!1&&(this.sortFlag=!1)};N(d.asn1.DERSet,d.asn1.DERAbstractStructured);d.asn1.DERTaggedObject=function(t){d.asn1.DERTaggedObject.superclass.constructor.call(this);var e=d.asn1,i=j,n=i.getV,r=i.isASN1HEX,s=e.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(l,a,u){this.params={tag:a,explicit:l,obj:u}},this.getFreshValueHex=function(){var l=this.params;if(l.explicit==null&&(l.explicit=!0),l.tage!=null&&(l.tag=l.tage,l.explicit=!0),l.tagi!=null&&(l.tag=l.tagi,l.explicit=!1),l.str!=null)this.hV=Mt(l.str);else if(l.hex!=null)this.hV=l.hex;else if(l.obj!=null){var a;l.obj instanceof e.ASN1Object?a=l.obj.tohex():typeof l.obj=="object"&&(a=s(l.obj).tohex()),l.explicit?this.hV=a:this.hV=n(a,0)}else throw new Error("str, hex nor obj not specified");return l.tag==null&&(l.tag="a0"),this.hT=l.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(l){this.params=l},t!==void 0&&this.setByParam(t)};N(d.asn1.DERTaggedObject,d.asn1.ASN1Object);var j=new function(){};j.getLblen=function(t,e){if(t.substr(e+2,1)!="8")return 1;var i=parseInt(t.substr(e+3,1));return i==0?-1:0<i&&i<10?i+1:-2};j.getL=function(t,e){var i=j.getLblen(t,e);return i<1?"":t.substr(e+2,i*2)};j.getVblen=function(t,e){var i,n;return i=j.getL(t,e),i==""?-1:(i.substr(0,1)==="8"?n=new O(i.substr(2),16):n=new O(i,16),n.intValue())};j.getVidx=function(t,e){var i=j.getLblen(t,e);return i<0?i:e+(i+1)*2};j.getV=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return t.substr(i,n*2)};j.getTLV=function(t,e){return t.substr(e,2)+j.getL(t,e)+j.getV(t,e)};j.getTLVblen=function(t,e){return 2+j.getLblen(t,e)*2+j.getVblen(t,e)*2};j.getNextSiblingIdx=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return i+n*2};j.getChildIdx=function(t,e){var i=j,n=[],r,s,l;r=i.getVidx(t,e),s=i.getVblen(t,e)*2,t.substr(e,2)=="03"&&(r+=2,s-=2),l=0;for(var a=r;l<=s;){var u=i.getTLVblen(t,a);if(l+=u,l<=s&&n.push(a),a+=u,l>=s)break}return n};j.getNthChildIdx=function(t,e,i){var n=j.getChildIdx(t,e);return n[i]};j.getIdxbyList=function(t,e,i,n){var r=j,s,l;return i.length==0?n!==void 0&&t.substr(e,2)!==n?-1:e:(s=i.shift(),l=r.getChildIdx(t,e),s>=l.length?-1:r.getIdxbyList(t,l[s],i,n))};j.getIdxbyListEx=function(t,e,i,n){var r=j,s,l;if(i.length==0)return n!==void 0&&t.substr(e,2)!==n?-1:e;s=i.shift(),l=r.getChildIdx(t,e);for(var a=0,u=0;u<l.length;u++){var c=t.substr(l[u],2);if(typeof s=="number"&&!r.isContextTag(c)&&a==s||typeof s=="string"&&r.isContextTag(c,s))return r.getIdxbyListEx(t,l[u],i,n);r.isContextTag(c)||a++}return-1};j.getTLVbyList=function(t,e,i,n){var r=j,s=r.getIdxbyList(t,e,i,n);return s==-1||s>=t.length?null:r.getTLV(t,s)};j.getTLVbyListEx=function(t,e,i,n){var r=j,s=r.getIdxbyListEx(t,e,i,n);return s==-1?null:r.getTLV(t,s)};j.getVbyList=function(t,e,i,n,r){var s=j,l,a;return l=s.getIdxbyList(t,e,i,n),l==-1||l>=t.length?null:(a=s.getV(t,l),r===!0&&(a=a.substr(2)),a)};j.getVbyListEx=function(t,e,i,n,r){var s=j,l,a,u;return l=s.getIdxbyListEx(t,e,i,n),l==-1?null:(u=s.getV(t,l),t.substr(l,2)=="03"&&r!==!1&&(u=u.substr(2)),u)};j.getInt=function(t,e,i){i==null&&(i=-1);try{var n=t.substr(e,2);if(n!="02"&&n!="03")return i;var r=j.getV(t,e);return n=="02"?parseInt(r,16):Pr(r)}catch{return i}};j.getOID=function(t,e,i){i==null&&(i=null);try{if(t.substr(e,2)!="06")return i;var n=j.getV(t,e);return zt(n)}catch{return i}};j.getOIDName=function(t,e,i){i==null&&(i=null);try{var n=j.getOID(t,e,i);if(n==i)return i;var r=d.asn1.x509.OID.oid2name(n);return r==""?n:r}catch{return i}};j.getString=function(t,e,i){i==null&&(i=null);try{var n=j.getV(t,e);return _e(n)}catch{return i}};j.hextooidstr=function(t){var e=function(p,h){return p.length>=h?p:new Array(h-p.length+1).join("0")+p},i=[],n=t.substr(0,2),r=parseInt(n,16);i[0]=new String(Math.floor(r/40)),i[1]=new String(r%40);for(var s=t.substr(2),l=[],a=0;a<s.length/2;a++)l.push(parseInt(s.substr(a*2,2),16));for(var u=[],c="",a=0;a<l.length;a++)l[a]&128?c=c+e((l[a]&127).toString(2),7):(c=c+e((l[a]&127).toString(2),7),u.push(new String(parseInt(c,2))),c="");var m=i.join(".");return u.length>0&&(m=m+"."+u.join(".")),m};j.dump=function(t,e,i,n){var r=j,s=r.getV,l=r.dump,a=r.getChildIdx,u=t;t instanceof d.asn1.ASN1Object&&(u=t.tohex());var c=function(x,E){if(x.length<=E*2)return x;var F=x.substr(0,E)+"..(total "+x.length/2+"bytes).."+x.substr(x.length-E,E);return F};e===void 0&&(e={ommit_long_octet:32}),i===void 0&&(i=0),n===void 0&&(n="");var m=e.ommit_long_octet,A=u.substr(i,2);if(A=="01"){var p=s(u,i);return p=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(A=="02"){var p=s(u,i);return n+"INTEGER "+c(p,m)+`
`}if(A=="03"){var p=s(u,i);if(r.isASN1HEX(p.substr(2))){var h=n+`BITSTRING, encapsulates
`;return h=h+l(p.substr(2),e,0,n+"  "),h}else return n+"BITSTRING "+c(p,m)+`
`}if(A=="04"){var p=s(u,i);if(r.isASN1HEX(p)){var h=n+`OCTETSTRING, encapsulates
`;return h=h+l(p,e,0,n+"  "),h}else return n+"OCTETSTRING "+c(p,m)+`
`}if(A=="05")return n+`NULL
`;if(A=="06"){var f=s(u,i),v=d.asn1.ASN1Util.oidHexToInt(f),g=d.asn1.x509.OID.oid2name(v),y=v.replace(/\./g," ");return g!=""?n+"ObjectIdentifier "+g+" ("+y+`)
`:n+"ObjectIdentifier ("+y+`)
`}if(A=="0a")return n+"ENUMERATED "+parseInt(s(u,i))+`
`;if(A=="0c")return n+"UTF8String '"+ie(s(u,i))+`'
`;if(A=="13")return n+"PrintableString '"+ie(s(u,i))+`'
`;if(A=="14")return n+"TeletexString '"+ie(s(u,i))+`'
`;if(A=="16")return n+"IA5String '"+ie(s(u,i))+`'
`;if(A=="17")return n+"UTCTime "+ie(s(u,i))+`
`;if(A=="18")return n+"GeneralizedTime "+ie(s(u,i))+`
`;if(A=="1a")return n+"VisualString '"+ie(s(u,i))+`'
`;if(A=="1e")return n+"BMPString '"+Fi(s(u,i))+`'
`;if(A=="30"){if(u.substr(i,4)=="3000")return n+`SEQUENCE {}
`;var h=n+`SEQUENCE
`,b=a(u,i),S=e;if((b.length==2||b.length==3)&&u.substr(b[0],2)=="06"&&u.substr(b[b.length-1],2)=="04"){var g=r.oidname(s(u,b[0])),w=JSON.parse(JSON.stringify(e));w.x509ExtName=g,S=w}for(var _=0;_<b.length;_++)h=h+l(u,S,b[_],n+"  ");return h}if(A=="31"){for(var h=n+`SET
`,b=a(u,i),_=0;_<b.length;_++)h=h+l(u,e,b[_],n+"  ");return h}var A=parseInt(A,16);if(A&128){var C=A&31;if(A&32){for(var h=n+"["+C+`]
`,b=a(u,i),_=0;_<b.length;_++)h=h+l(u,e,b[_],n+"  ");return h}else{var p=s(u,i);if(j.isASN1HEX(p)){var h=n+"["+C+`]
`;return h=h+l(p,e,0,n+"  "),h}else(p.substr(0,8)=="68747470"||e.x509ExtName==="subjectAltName"&&C==2)&&(p=ie(p));var h=n+"["+C+"] "+p+`
`;return h}}return n+"UNKNOWN("+A+") "+s(u,i)+`
`};j.parse=function(t){var e=j,i=e.parse,n=e.isASN1HEX,r=e.getV,s=e.getTLV,l=e.getChildIdx,a=d.asn1,u=a.ASN1Util.oidHexToInt,c=a.x509.OID.oid2name,m=ie,p=Fi,h=Bu,f={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},v=function(F){for(var I=[],P=l(F,0),R=0;R<P.length;R++){var M=P[R],T=s(F,M),B=i(T);I.push(B)}return I},g=t.substr(0,2),y={},b=r(t,0);if(g=="01")return t=="0101ff"?{bool:!0}:{bool:!1};if(g=="02")return{int:{hex:b}};if(g=="03")try{if(b.substr(0,2)!="00")throw"not encap";var S=b.substr(2);if(!n(S))throw"not encap";return{bitstr:{obj:i(S)}}}catch{var w=null;return b.length<=10&&(w=Rr(b)),w==null?{bitstr:{hex:b}}:{bitstr:{bin:w}}}else if(g=="04")try{if(!n(b))throw"not encap";return{octstr:{obj:i(b)}}}catch{return{octstr:{hex:b}}}else{if(g=="05")return{null:""};if(g=="06"){var _=u(b),A=c(_);return A==""?{oid:_}:{oid:A}}else{if(g=="0a")return b.length>4?{enum:{hex:b}}:{enum:parseInt(b,16)};if(g=="30"||g=="31")return y[f[g]]=v(t),y;if(g=="14"){var C=h(b);return y[f[g]]={str:C},y}else if(g=="1e"){var C=p(b);return y[f[g]]={str:C},y}else if(":0c:12:13:16:17:18:1a:".indexOf(g)!=-1){var C=m(b);return y[f[g]]={str:C},y}else if(g.match(/^8[0-9]$/)){var C=m(b);return C==null|C==""?{tag:{tag:g,explicit:!1,hex:b}}:C.match(/[\x00-\x1F\x7F-\x9F]/)!=null||C.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:g,explicit:!1,hex:b}}:{tag:{tag:g,explicit:!1,str:C}}}else if(g.match(/^a[0-9]$/))try{if(!n(b))throw new Error("not encap");return{tag:{tag:g,explicit:!0,obj:i(b)}}}catch{return{tag:{tag:g,explicit:!0,hex:b}}}else{var x=new d.asn1.ASN1Object;x.hV=b;var E=x.getLengthHexFromValue();return{asn1:{tlv:g+E+b}}}}}};j.isContextTag=function(t,e){t=t.toLowerCase();var i,n;try{i=parseInt(t,16)}catch{return-1}if(e===void 0)return(i&192)==128;try{var r=e.match(/^\[[0-9]+\]$/);return r==null||(n=parseInt(e.substr(1,e.length-1),10),n>31)?!1:(i&192)==128&&(i&31)==n}catch{return!1}};j.isASN1HEX=function(t){var e=j;if(t.length%2==1)return!1;var i=e.getVblen(t,0),n=t.substr(0,2),r=e.getL(t,0),s=t.length-n.length-r.length;return s==i*2};j.checkStrictDER=function(t,e,i,n,r){var s=j;if(i===void 0){if(typeof t!="string")throw new Error("not hex string");if(t=t.toLowerCase(),!d.lang.String.isHex(t))throw new Error("not hex string");i=t.length,n=t.length/2,n<128?r=1:r=Math.ceil(n.toString(16))+1}var l=s.getL(t,e);if(l.length>r*2)throw new Error("L of TLV too long: idx="+e);var a=s.getVblen(t,e);if(a>n)throw new Error("value of L too long than hex: idx="+e);var u=s.getTLV(t,e),c=u.length-2-s.getL(t,e).length;if(c!==a*2)throw new Error("V string length and L's value not the same:"+c+"/"+a*2);if(e===0&&t.length!=u.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+u.length);var m=t.substr(e,2);if(m==="02"){var p=s.getVidx(t,e);if(t.substr(p,2)=="00"&&t.charCodeAt(p+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(m,16)&32){for(var h=s.getVblen(t,e),f=0,v=s.getChildIdx(t,e),g=0;g<v.length;g++){var y=s.getTLV(t,v[g]);f+=y.length,s.checkStrictDER(t,v[g],i,n,r)}if(h*2!=f)throw new Error("sum of children's TLV length and L unmatch: "+h*2+"!="+f)}};j.oidname=function(t){var e=d.asn1;d.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var i=e.x509.OID.oid2name(t);return i===""&&(i=t),i};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.x509>"u"||!d.asn1.x509)&&(d.asn1.x509={});d.asn1.x509.Certificate=function(t){d.asn1.x509.Certificate.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.x509,l=s.TBSCertificate,a=s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(u){this.params=u},this.sign=function(){var u=this.params,c=u.sigalg;u.sigalg.name!=null&&(c=u.sigalg.name);var m=u.tbsobj.tohex(),p=new d.crypto.Signature({alg:c});p.init(u.cakey),p.updateHex(m),u.sighex=p.sign()},this.getPEM=function(){return be(this.tohex(),"CERTIFICATE")},this.tohex=function(){var u=this.params;if((u.tbsobj==null||u.tbsobj==null)&&(u.tbsobj=new l(u)),u.sighex==null&&u.cakey!=null&&this.sign(),u.sighex==null)throw new Error("sighex or cakey parameter not defined");var c=[];c.push(u.tbsobj),c.push(new a({name:u.sigalg})),c.push(new n({hex:"00"+u.sighex}));var m=new r({array:c});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};N(d.asn1.x509.Certificate,d.asn1.ASN1Object);d.asn1.x509.TBSCertificate=function(t){d.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.x509,r=i.DERTaggedObject,s=i.DERInteger,l=i.DERSequence,a=n.AlgorithmIdentifier,u=n.Time,c=n.X500Name,m=n.Extensions,p=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(h){this.params=h},this.tohex=function(){var h=[],f=this.params;if(f.version!=null||f.version!=1){var v=2;f.version!=null&&(v=f.version-1);var g=new r({obj:new s({int:v})});h.push(g)}h.push(new s(f.serial)),h.push(new a({name:f.sigalg})),h.push(new c(f.issuer)),h.push(new l({array:[new u(f.notbefore),new u(f.notafter)]})),h.push(new c(f.subject)),h.push(new p(Y.getKey(f.sbjpubkey))),f.ext!==void 0&&f.ext.length>0&&h.push(new r({tag:"a3",obj:new m(f.ext)}));var y=new d.asn1.DERSequence({array:h});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.TBSCertificate,d.asn1.ASN1Object);d.asn1.x509.Extensions=function(t){d.asn1.x509.Extensions.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERSequence,r=i.x509;this.aParam=[],this.setByParam=function(s){this.aParam=s},this.tohex=function(){for(var s=[],l=0;l<this.aParam.length;l++){var a=this.aParam[l],u=a.extname,c=null;if(a.extn!=null)c=new r.PrivateExtension(a);else if(u=="subjectKeyIdentifier")c=new r.SubjectKeyIdentifier(a);else if(u=="keyUsage")c=new r.KeyUsage(a);else if(u=="subjectAltName")c=new r.SubjectAltName(a);else if(u=="issuerAltName")c=new r.IssuerAltName(a);else if(u=="basicConstraints")c=new r.BasicConstraints(a);else if(u=="nameConstraints")c=new r.NameConstraints(a);else if(u=="cRLDistributionPoints")c=new r.CRLDistributionPoints(a);else if(u=="certificatePolicies")c=new r.CertificatePolicies(a);else if(u=="authorityKeyIdentifier")c=new r.AuthorityKeyIdentifier(a);else if(u=="extKeyUsage")c=new r.ExtKeyUsage(a);else if(u=="authorityInfoAccess")c=new r.AuthorityInfoAccess(a);else if(u=="cRLNumber")c=new r.CRLNumber(a);else if(u=="cRLReason")c=new r.CRLReason(a);else if(u=="ocspNonce")c=new r.OCSPNonce(a);else if(u=="ocspNoCheck")c=new r.OCSPNoCheck(a);else if(u=="adobeTimeStamp")c=new r.AdobeTimeStamp(a);else if(u=="subjectDirectoryAttributes")c=new r.SubjectDirectoryAttributes(a);else throw new Error("extension not supported:"+JSON.stringify(a));c!=null&&s.push(c)}var m=new n({array:s});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.x509.Extensions,d.asn1.ASN1Object);d.asn1.x509.Extension=function(t){d.asn1.x509.Extension.superclass.constructor.call(this);var e=null,i=d,n=i.asn1,r=n.DERObjectIdentifier,s=n.DEROctetString,l=n.DERBitString,a=n.DERBoolean,u=n.DERSequence;this.tohex=function(){var c=new r({oid:this.oid}),m=new s({hex:this.getExtnValueHex()}),p=new Array;p.push(c),this.critical&&p.push(new a),p.push(m);var h=new u({array:p});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,t!==void 0&&t.critical!==void 0&&(this.critical=t.critical)};N(d.asn1.x509.Extension,d.asn1.ASN1Object);d.asn1.x509.KeyUsage=function(t){d.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,i={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new d.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new e("parameter not yet set");if(n.names!=null)return Dt(n.names,i);if(n.bin!=null)return n.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",t!==void 0&&(this.params=t)};N(d.asn1.x509.KeyUsage,d.asn1.x509.Extension);d.asn1.x509.BasicConstraints=function(t){d.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERBoolean,n=e.DERInteger,r=e.DERSequence,s=!1,l=-1;this.getExtnValueHex=function(){var a=new Array;this.cA&&a.push(new i),this.pathLen>-1&&a.push(new n({int:this.pathLen}));var u=new r({array:a});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,t!==void 0&&(t.cA!==void 0&&(this.cA=t.cA),t.pathLen!==void 0&&(this.pathLen=t.pathLen))};N(d.asn1.x509.BasicConstraints,d.asn1.x509.Extension);d.asn1.x509.CRLDistributionPoints=function(t){d.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(r){for(var s=[],l=0;l<r.length;l++)if(r[l]instanceof d.asn1.ASN1Object)s.push(r[l]);else{var a=new n.DistributionPoint(r[l]);s.push(a)}this.asn1ExtnValue=new i.DERSequence({array:s})},this.setByOneURI=function(r){var s=new n.DistributionPoint({fulluri:r});this.setByDPArray([s])},this.oid="2.5.29.31",t!==void 0&&(t.array!==void 0?this.setByDPArray(t.array):t.uri!==void 0&&this.setByOneURI(t.uri))};N(d.asn1.x509.CRLDistributionPoints,d.asn1.x509.Extension);d.asn1.x509.DistributionPoint=function(t){d.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=null,i=d,n=i.asn1,r=n.x509.DistributionPointName;this.tohex=function(){var s=new n.DERSequence;if(this.asn1DP!=null){var l=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});s.appendASN1Object(l)}return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.dpobj!==void 0?this.asn1DP=t.dpobj:t.dpname!==void 0?this.asn1DP=new r(t.dpname):t.fulluri!==void 0&&(this.asn1DP=new r({full:[{uri:t.fulluri}]})))};N(d.asn1.x509.DistributionPoint,d.asn1.ASN1Object);d.asn1.x509.DistributionPointName=function(t){d.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=null,i=null,n=null,r=null,s=d,l=s.asn1,a=l.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new a({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0)if(l.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else if(t.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new l.x509.GeneralNames(t.full);else throw new Error("This class supports GeneralNames only as argument")};N(d.asn1.x509.DistributionPointName,d.asn1.ASN1Object);d.asn1.x509.CertificatePolicies=function(t){d.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509,r=i.DERSequence,s=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var l=[],a=0;a<this.params.array.length;a++)l.push(new s(this.params.array[a]));var u=new r({array:l});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",t!==void 0&&(this.params=t)};N(d.asn1.x509.CertificatePolicies,d.asn1.x509.Extension);d.asn1.x509.PolicyInformation=function(t){d.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var s=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var l=[],a=0;a<this.params.array.length;a++)l.push(new r(this.params.array[a]));l.length>0&&s.push(new i({array:l}))}var u=new i({array:s});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};N(d.asn1.x509.PolicyInformation,d.asn1.ASN1Object);d.asn1.x509.PolicyQualifierInfo=function(t){d.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.DERIA5String,r=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var l=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return l.tohex()}if(this.params.unotice!=null){var l=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]});return l.tohex()}},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};N(d.asn1.x509.PolicyQualifierInfo,d.asn1.ASN1Object);d.asn1.x509.UserNotice=function(t){d.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=d.asn1.DERSequence,i=d.asn1.DERInteger,n=d.asn1.x509.DisplayText,r=d.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var s=[];this.params.noticeref!==void 0&&s.push(new r(this.params.noticeref)),this.params.exptext!==void 0&&s.push(new n(this.params.exptext));var l=new e({array:s});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};N(d.asn1.x509.UserNotice,d.asn1.ASN1Object);d.asn1.x509.NoticeReference=function(t){d.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=d.asn1.DERSequence,i=d.asn1.DERInteger,n=d.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var r=[];if(this.params.org!==void 0&&r.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var s=[],l=this.params.noticenum,a=0;a<l.length;a++)s.push(new i(l[a]));r.push(new e({array:s}))}if(r.length==0)throw new Error("parameter is empty");var u=new e({array:r});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};N(d.asn1.x509.NoticeReference,d.asn1.ASN1Object);d.asn1.x509.DisplayText=function(t){d.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",t!==void 0&&(t.type==="ia5"?this.hT="16":t.type==="vis"?this.hT="1a":t.type==="bmp"&&(this.hT="1e"))};N(d.asn1.x509.DisplayText,d.asn1.DERAbstractString);d.asn1.x509.NameConstraints=function(t){d.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509,r=i.ASN1Util.newObject,s=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var l=this.params,a=[];if(l.permit!=null&&l.permit.length!=null){for(var u=[],c=0;c<l.permit.length;c++)u.push(new s(l.permit[c]));a.push({tag:{tagi:"a0",obj:{seq:u}}})}if(l.exclude!=null&&l.exclude.length!=null){for(var m=[],c=0;c<l.exclude.length;c++)m.push(new s(l.exclude[c]));a.push({tag:{tagi:"a1",obj:{seq:m}}})}return this.asn1ExtnValue=r({seq:a}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",t!==void 0&&(this.params=t)};N(d.asn1.x509.NameConstraints,d.asn1.x509.Extension);d.asn1.x509.GeneralSubtree=function(t){d.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=d.asn1,i=e.x509,n=i.GeneralName,r=e.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,l=[new n(s)];s.min!=null&&l.push({tag:{tagi:"80",obj:{int:s.min}}}),s.max!=null&&l.push({tag:{tagi:"81",obj:{int:s.max}}});var a=r({seq:l});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.GeneralSubtree,d.asn1.ASN1Object);d.asn1.x509.ExtKeyUsage=function(t){d.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=d,i=e.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new i.DERSequence;for(var r=0;r<n.length;r++){var s=new i.DERObjectIdentifier(n[r]);this.asn1ExtnValue.appendASN1Object(s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",t!==void 0&&t.array!==void 0&&this.setPurposeArray(t.array)};N(d.asn1.x509.ExtKeyUsage,d.asn1.x509.Extension);d.asn1.x509.AuthorityKeyIdentifier=function(t){d.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.x509.GeneralNames,s=e.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var l=new Array;this.asn1KID&&l.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&l.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&l.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var a=new i.DERSequence({array:l});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(l){if(l.str!==void 0||l.hex!==void 0)this.asn1KID=new d.asn1.DEROctetString(l);else if(typeof l=="object"&&d.crypto.Util.isKey(l)||typeof l=="string"&&l.indexOf("BEGIN ")!=-1){var a=l;typeof l=="string"&&(a=Y.getKey(l));var u=Y.getKeyID(a);this.asn1KID=new d.asn1.DEROctetString({hex:u})}},this.setCertIssuerByParam=function(l){l.str!==void 0||l.ldapstr!==void 0||l.hex!==void 0||l.certsubject!==void 0||l.certissuer!==void 0?this.asn1CertIssuer=new d.asn1.x509.X500Name(l):typeof l=="string"&&l.indexOf("BEGIN ")!=-1&&l.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new d.asn1.x509.X500Name({certissuer:l}))},this.setCertSNByParam=function(l){if(l.str!==void 0||l.bigint!==void 0||l.hex!==void 0)this.asn1CertSN=new d.asn1.DERInteger(l);else if(typeof l=="string"&&l.indexOf("BEGIN ")!=-1&&l.indexOf("CERTIFICATE")){var a=new W;a.readCertPEM(l);var u=a.getSerialNumberHex();this.asn1CertSN=new d.asn1.DERInteger({hex:u})}},this.oid="2.5.29.35",t!==void 0&&(t.kid!==void 0&&this.setKIDByParam(t.kid),t.issuer!==void 0&&this.setCertIssuerByParam(t.issuer),t.sn!==void 0&&this.setCertSNByParam(t.sn),t.issuersn!==void 0&&typeof t.issuersn=="string"&&t.issuersn.indexOf("BEGIN ")!=-1&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))};N(d.asn1.x509.AuthorityKeyIdentifier,d.asn1.x509.Extension);d.asn1.x509.SubjectKeyIdentifier=function(t){d.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(r){if(r.str!==void 0||r.hex!==void 0)this.asn1KID=new n(r);else if(typeof r=="object"&&d.crypto.Util.isKey(r)||typeof r=="string"&&r.indexOf("BEGIN")!=-1){var s=r;typeof r=="string"&&(s=Y.getKey(r));var l=Y.getKeyID(s);this.asn1KID=new d.asn1.DEROctetString({hex:l})}},this.oid="2.5.29.14",t!==void 0&&t.kid!==void 0&&this.setKIDByParam(t.kid)};N(d.asn1.x509.SubjectKeyIdentifier,d.asn1.x509.Extension);d.asn1.x509.AuthorityInfoAccess=function(t){d.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(e){for(var i=new Array,n=d,r=n.asn1,s=r.DERSequence,l=r.DERObjectIdentifier,a=r.x509.GeneralName,u=0;u<e.length;u++){var c,m=e[u];if(m.ocsp!==void 0)c=new s({array:[new l({oid:"1.3.6.1.5.5.7.48.1"}),new a({uri:m.ocsp})]});else if(m.caissuer!==void 0)c=new s({array:[new l({oid:"1.3.6.1.5.5.7.48.2"}),new a({uri:m.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(m));i.push(c)}this.asn1ExtnValue=new s({array:i})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",t!==void 0&&t.array!==void 0&&this.setAccessDescriptionArray(t.array)};N(d.asn1.x509.AuthorityInfoAccess,d.asn1.x509.Extension);d.asn1.x509.SubjectAltName=function(t){d.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new d.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};N(d.asn1.x509.SubjectAltName,d.asn1.x509.Extension);d.asn1.x509.IssuerAltName=function(t){d.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new d.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};N(d.asn1.x509.IssuerAltName,d.asn1.x509.Extension);d.asn1.x509.SubjectDirectoryAttributes=function(t){d.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.ASN1Util.newObject,r=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var s=[],l=0;l<this.params.array.length;l++){var a=this.params.array[l],u={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(a.attr=="dateOfBirth")u.seq[0].oid=r(a.attr),u.seq[1].set[0]={gentime:a.str};else if(a.attr=="placeOfBirth")u.seq[0].oid=r(a.attr),u.seq[1].set[0]={utf8str:a.str};else if(a.attr=="gender")u.seq[0].oid=r(a.attr),u.seq[1].set[0]={prnstr:a.str};else if(a.attr=="countryOfCitizenship")u.seq[0].oid=r(a.attr),u.seq[1].set[0]={prnstr:a.str};else if(a.attr=="countryOfResidence")u.seq[0].oid=r(a.attr),u.seq[1].set[0]={prnstr:a.str};else throw new Error("unsupported attribute: "+a.attr);s.push(new n(u))}var c=new i({array:s});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",t!==void 0&&(this.params=t)};N(d.asn1.x509.SubjectDirectoryAttributes,d.asn1.x509.Extension);d.asn1.x509.PrivateExtension=function(t){d.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=d,i=e.lang.String.isHex,n=e.asn1,r=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(l){this.oid=r(l.extname),this.params=l},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var l=this.params.extn;if(typeof l=="string"&&i(l))return l;if(typeof l=="object")try{return s(l).tohex()}catch{}throw new Error("unsupported extn value")},t!=null&&this.setByParam(t)};N(d.asn1.x509.PrivateExtension,d.asn1.x509.Extension);d.asn1.x509.CRL=function(t){d.asn1.x509.CRL.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERSequence,r=i.DERBitString,s=i.x509,l=s.AlgorithmIdentifier,a=s.TBSCertList;this.params=void 0,this.setByParam=function(u){this.params=u},this.sign=function(){var u=new a(this.params).tohex(),c=new d.crypto.Signature({alg:this.params.sigalg});c.init(this.params.cakey),c.updateHex(u);var m=c.sign();this.params.sighex=m},this.getPEM=function(){return be(this.tohex(),"X509 CRL")},this.tohex=function(){var u=this.params;if(u.tbsobj==null&&(u.tbsobj=new a(u)),u.sighex==null&&u.cakey!=null&&this.sign(),u.sighex==null)throw new Error("sighex or cakey parameter not defined");var c=[];c.push(u.tbsobj),c.push(new l({name:u.sigalg})),c.push(new r({hex:"00"+u.sighex}));var m=new n({array:c});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};N(d.asn1.x509.CRL,d.asn1.ASN1Object);d.asn1.x509.TBSCertList=function(t){d.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.DERTaggedObject,l=i.DERObjectIdentifier,a=i.x509,u=a.AlgorithmIdentifier,c=a.Time,m=a.Extensions,p=a.X500Name;this.params=null,this.setByParam=function(h){this.params=h},this.getRevCertSequence=function(){for(var h=[],f=this.params.revcert,v=0;v<f.length;v++){var g=[new n(f[v].sn),new c(f[v].date)];f[v].ext!=null&&g.push(new m(f[v].ext)),h.push(new r({array:g}))}return new r({array:h})},this.tohex=function(){var h=[],f=this.params;if(f.version!=null){var v=f.version-1,g=new n({int:v});h.push(g)}if(h.push(new u({name:f.sigalg})),h.push(new p(f.issuer)),h.push(new c(f.thisupdate)),f.nextupdate!=null&&h.push(new c(f.nextupdate)),f.revcert!=null&&h.push(this.getRevCertSequence()),f.ext!=null){var y=new m(f.ext);h.push(new s({tag:"a0",explicit:!0,obj:y}))}var b=new r({array:h});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.TBSCertList,d.asn1.ASN1Object);d.asn1.x509.CRLEntry=function(t){d.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1;this.setCertSerial=function(s){this.sn=new r.DERInteger(s)},this.setRevocationDate=function(s){this.time=new r.x509.Time(s)},this.tohex=function(){var s=new r.DERSequence({array:[this.sn,this.time]});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.time!==void 0&&this.setRevocationDate(t.time),t.sn!==void 0&&this.setCertSerial(t.sn))};N(d.asn1.x509.CRLEntry,d.asn1.ASN1Object);d.asn1.x509.CRLNumber=function(t){d.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",t!=null&&(this.params=t)};N(d.asn1.x509.CRLNumber,d.asn1.x509.Extension);d.asn1.x509.CRLReason=function(t){d.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",t!=null&&(this.params=t)};N(d.asn1.x509.CRLReason,d.asn1.x509.Extension);d.asn1.x509.OCSPNonce=function(t){d.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",t!=null&&(this.params=t)};N(d.asn1.x509.OCSPNonce,d.asn1.x509.Extension);d.asn1.x509.OCSPNoCheck=function(t){d.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",t!=null&&(this.params=t)};N(d.asn1.x509.OCSPNoCheck,d.asn1.x509.Extension);d.asn1.x509.AdobeTimeStamp=function(t){d.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DERInteger,r=i.DERBoolean,s=i.DERSequence,l=i.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var a=this.params,u=[new n(1)];return u.push(new l({uri:a.uri})),a.reqauth!=null&&u.push(new r(a.reqauth)),this.asn1ExtnValue=new s({array:u}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",t!==void 0&&this.setByParam(t)};N(d.asn1.x509.AdobeTimeStamp,d.asn1.x509.Extension);d.asn1.x509.X500Name=function(t){d.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=d,i=e.asn1,n=i.x509,r=n.RDN,s=ge;this.setByString=function(l,a){a!==void 0&&(this.sRule=a);var u=l.split("/");u.shift();for(var c=[],m=0;m<u.length;m++)if(u[m].match(/^[^=]+=.+$/))c.push(u[m]);else{var p=c.length-1;c[p]=c[p]+"/"+u[m]}for(var m=0;m<c.length;m++)this.asn1Array.push(new r({str:c[m],rule:this.sRule}))},this.setByLdapString=function(l,a){a!==void 0&&(this.sRule=a);var u=n.X500Name.ldapToCompat(l);this.setByString(u,a)},this.setByObject=function(l,a){a!==void 0&&(this.sRule=a);for(var u in l)if(l.hasOwnProperty(u)){var c=new r({str:u+"="+l[u],rule:this.sRule});this.asn1Array?this.asn1Array.push(c):this.asn1Array=[c]}},this.setByParam=function(l){if(l.rule!==void 0&&(this.sRule=l.rule),l.array!==void 0)this.paramArray=l.array;else if(l.str!==void 0)this.setByString(l.str);else if(l.ldapstr!==void 0)this.setByLdapString(l.ldapstr);else if(l.hex!==void 0)this.hTLV=l.hex;else if(l.certissuer!==void 0){var a=new W;a.readCertPEM(l.certissuer),this.hTLV=a.getIssuerHex()}else if(l.certsubject!==void 0){var a=new W;a.readCertPEM(l.certsubject),this.hTLV=a.getSubjectHex()}else typeof l=="object"&&l.certsubject===void 0&&l.certissuer===void 0&&this.setByObject(l)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var l=0;l<this.paramArray.length;l++){var a={array:this.paramArray[l]};this.sRule!="utf8"&&(a.rule=this.sRule);var u=new r(a);this.asn1Array.push(u)}var c=new i.DERSequence({array:this.asn1Array});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.X500Name,d.asn1.ASN1Object);d.asn1.x509.X500Name.compatToLDAP=function(t){if(t.substr(0,1)!=="/")throw"malformed input";var e="";t=t.substr(1);var i=t.split("/");return i.reverse(),i=i.map(function(n){return n.replace(/,/,"\\,")}),i.join(",")};d.asn1.x509.X500Name.onelineToLDAP=function(t){return d.asn1.x509.X500Name.compatToLDAP(t)};d.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var l=n.pop(),a=(l+","+s).replace(/\\,/g,",");n.push(a),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}return n=n.map(function(u){return u.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};d.asn1.x509.X500Name.ldapToOneline=function(t){return d.asn1.x509.X500Name.ldapToCompat(t)};d.asn1.x509.RDN=function(t){d.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=d.asn1.x509.AttributeTypeAndValue;this.setByParam=function(i){i.rule!==void 0&&(this.sRule=i.rule),i.str!==void 0&&this.addByMultiValuedString(i.str),i.array!==void 0&&(this.paramArray=i.array)},this.addByString=function(i){this.asn1Array.push(new d.asn1.x509.AttributeTypeAndValue({str:i,rule:this.sRule}))},this.addByMultiValuedString=function(i){for(var n=d.asn1.x509.RDN.parseString(i),r=0;r<n.length;r++)this.addByString(n[r])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var i=0;i<this.paramArray.length;i++){var n=this.paramArray[i];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var r=new e(n);this.asn1Array.push(r)}var s=new d.asn1.DERSet({array:this.asn1Array});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.RDN,d.asn1.ASN1Object);d.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var l=n.pop(),a=(l+"+"+s).replace(/\\\+/g,"+");n.push(a),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}for(var u=!1,c=[],r=0;n.length>0;r++){var s=n.shift();if(u===!0){var m=c.pop();if(s.match(/"$/)){var a=(m+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(a),u=!1}else c.push(m+"+"+s)}else c.push(s);s.match(/^[^=]+="/)&&(u=!0)}return c};d.asn1.x509.AttributeTypeAndValue=function(t){d.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=d,i=e.asn1,n=i.DERSequence,r=i.DERUTF8String,s=i.DERPrintableString,l=i.DERTeletexString,a=i.DERIA5String,u=i.DERVisibleString,c=i.DERBMPString,m=e.lang.String.isMail,p=e.lang.String.isPrintable;this.setByParam=function(h){if(h.rule!==void 0&&(this.sRule=h.rule),h.ds!==void 0&&(this.dsType=h.ds),h.value===void 0&&h.str!==void 0){var f=h.str,v=f.match(/^([^=]+)=(.+)$/);if(v)this.sType=v[1],this.sValue=v[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=h.type,this.sValue=h.value},this.setByString=function(h,f){f!==void 0&&(this.sRule=f);var v=h.match(/^([^=]+)=(.+)$/);if(v)this.setByAttrTypeAndValueStr(v[1],v[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var h=this.sType,f=this.sValue,v=this.sRule;return v==="prn"?h=="CN"&&m(f)?"ia5":p(f)?"prn":"utf8":v==="utf8"?h=="CN"&&m(f)?"ia5":h=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(h,f,v){v!==void 0&&(this.sRule=v),this.sType=h,this.sValue=f},this.getValueObj=function(h,f){if(h=="utf8")return new r({str:f});if(h=="prn")return new s({str:f});if(h=="tel")return new l({str:f});if(h=="ia5")return new a({str:f});if(h=="vis")return new u({str:f});if(h=="bmp")return new c({str:f});throw new Error("unsupported directory string type: type="+h+" value="+f)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var h=d.asn1.x509.OID.atype2obj(this.sType),f=this.getValueObj(this.dsType,this.sValue),v=new n({array:[h,f]});return this.TLV=v.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.AttributeTypeAndValue,d.asn1.ASN1Object);d.asn1.x509.SubjectPublicKeyInfo=function(t){d.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERInteger,l=r.DERBitString,a=r.DERObjectIdentifier,u=r.DERSequence,c=r.ASN1Util.newObject,m=r.x509,p=m.AlgorithmIdentifier,h=n.crypto,f=h.ECDSA,v=h.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var g=new u({array:[this.asn1AlgId,this.asn1SubjPKey]});return g},this.tohex=function(){var g=this.getASN1Object();return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(g){try{if(g instanceof q){var y=c({seq:[{int:{bigint:g.n}},{int:{int:g.e}}]}),b=y.tohex();this.asn1AlgId=new p({name:"rsaEncryption"}),this.asn1SubjPKey=new l({hex:"00"+b})}}catch{}try{if(g instanceof d.crypto.ECDSA){var S=new a({name:g.curveName});this.asn1AlgId=new p({name:"ecPublicKey",asn1params:S}),this.asn1SubjPKey=new l({hex:"00"+g.pubKeyHex})}}catch{}try{if(g instanceof d.crypto.DSA){var S=new c({seq:[{int:{bigint:g.p}},{int:{bigint:g.q}},{int:{bigint:g.g}}]});this.asn1AlgId=new p({name:"dsa",asn1params:S});var w=new s({bigint:g.y});this.asn1SubjPKey=new l({hex:"00"+w.tohex()})}}catch{}},t!==void 0&&this.setPubKey(t)};N(d.asn1.x509.SubjectPublicKeyInfo,d.asn1.ASN1Object);d.asn1.x509.Time=function(t){d.asn1.x509.Time.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERUTCTime,l=r.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(a){this.timeParams=a},this.setByParam=function(a){this.params=a},this.getType=function(a){return a.match(/^[0-9]{12}Z$/)?"utc":a.match(/^[0-9]{14}Z$/)?"gen":a.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":a.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var a=this.params,u=null;if(typeof a=="string"&&(a={str:a}),a!=null&&a.str&&(a.type==null||a.type==null)&&(a.type=this.getType(a.str)),a!=null&&a.str?(a.type=="utc"&&(u=new s(a.str)),a.type=="gen"&&(u=new l(a.str))):this.type=="gen"?u=new l:u=new s,u==null)throw new Error("wrong setting for Time");return this.TLV=u.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};d.asn1.x509.Time_bak=function(t){d.asn1.x509.Time_bak.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERUTCTime,l=r.DERGeneralizedTime;this.setTimeParams=function(a){this.timeParams=a},this.tohex=function(){var a=null;return this.timeParams!=null?this.type=="utc"?a=new s(this.timeParams):a=new l(this.timeParams):this.type=="utc"?a=new s:a=new l,this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",t!==void 0&&(t.type!==void 0?this.type=t.type:t.str!==void 0&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)};N(d.asn1.x509.Time,d.asn1.ASN1Object);d.asn1.x509.AlgorithmIdentifier=function(t){d.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=d,i=e.asn1,n=i.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var s=null;for(var l in n)l===this.nameAlg&&(s=n[l]);if(s!==null)return this.hTLV=s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=i.x509.OID.name2obj(this.nameAlg));var a=[this.asn1Alg];this.asn1Params!==null&&a.push(this.asn1Params);var u=new i.DERSequence({array:a});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.name!==void 0&&(this.nameAlg=t.name),t.asn1params!==void 0&&(this.asn1Params=t.asn1params),t.paramempty!==void 0&&(this.paramEmpty=t.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();r.substr(-7,7)!=="withdsa"&&r.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new i.DERNull)}};N(d.asn1.x509.AlgorithmIdentifier,d.asn1.ASN1Object);d.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};d.asn1.x509.GeneralName=function(t){d.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},i=d,n=i.asn1,r=n.x509,s=r.X500Name,l=r.OtherName,a=n.DERIA5String,u=n.DERPrintableString,c=n.DEROctetString,m=n.DERTaggedObject,p=n.ASN1Object,h=Error;this.params=null,this.setByParam=function(f){this.params=f},this.tohex=function(){var f=this.params,v,y,g,y=!1;if(f.other!==void 0)v="a0",g=new l(f.other);else if(f.rfc822!==void 0)v="81",g=new a({str:f.rfc822});else if(f.dns!==void 0)v="82",g=new a({str:f.dns});else if(f.dn!==void 0)v="a4",y=!0,typeof f.dn=="string"?g=new s({str:f.dn}):f.dn instanceof d.asn1.x509.X500Name?g=f.dn:g=new s(f.dn);else if(f.ldapdn!==void 0)v="a4",y=!0,g=new s({ldapstr:f.ldapdn});else if(f.certissuer!==void 0||f.certsubj!==void 0){v="a4",y=!0;var b,S,w=null;if(f.certsubj!==void 0?(b=!1,S=f.certsubj):(b=!0,S=f.certissuer),S.match(/^[0-9A-Fa-f]+$/)&&w==S,S.indexOf("-----BEGIN ")!=-1&&(w=ge(S)),w==null)throw new Error("certsubj/certissuer not cert");var _=new W;_.hex=w;var A;b?A=_.getIssuerHex():A=_.getSubjectHex(),g=new p,g.hTLV=A}else if(f.uri!==void 0)v="86",g=new a({str:f.uri});else if(f.ip!==void 0){v="87";var C,x=f.ip;try{if(x.match(/^[0-9a-f]+$/)){var E=x.length;if(E==8||E==16||E==32||E==64)C=x;else throw"err"}else C=Ai(x)}catch(I){throw new h("malformed IP address: "+f.ip+":"+I.message)}g=new c({hex:C})}else throw new h("improper params");var F=new m({tag:v,explicit:y,obj:g});return F.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.GeneralName,d.asn1.ASN1Object);d.asn1.x509.GeneralNames=function(t){d.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=null,i=d,n=i.asn1;this.setByParamArray=function(r){for(var s=0;s<r.length;s++){var l=new n.x509.GeneralName(r[s]);this.asn1Array.push(l)}},this.tohex=function(){var r=new n.DERSequence({array:this.asn1Array});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof t<"u"&&this.setByParamArray(t)};N(d.asn1.x509.GeneralNames,d.asn1.ASN1Object);d.asn1.x509.OtherName=function(t){d.asn1.x509.OtherName.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERObjectIdentifier,l=r.DERSequence,a=r.ASN1Util.newObject;this.params=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(u.oid==null||u.value==null)throw new Error("oid or value not specified");var c=new s({oid:u.oid}),m=a({tag:{tag:"a0",explicit:!0,obj:u.value}}),p=new l({array:[c,m]});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.x509.OtherName,d.asn1.ASN1Object);d.asn1.x509.OID=new function(){var t=d.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(typeof this.objCache[e]<"u")return this.objCache[e];if(typeof this.name2oidList[e]>"u")throw"Name of ObjectIdentifier not defined: "+e;var i=this.name2oidList[e],n=new t({oid:i});return this.objCache[e]=n,n},this.atype2obj=function(e){if(this.objCache[e]!==void 0)return this.objCache[e];var i;if(e.match(/^\d+\.\d+\.[0-9.]+$/))i=e;else if(this.atype2oidList[e]!==void 0)i=this.atype2oidList[e];else if(this.name2oidList[e]!==void 0)i=this.name2oidList[e];else throw new Error("AttributeType name undefined: "+e);var n=new t({oid:i});return this.objCache[e]=n,n},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var i in e)this.name2oidList[i]=e[i]},this.checkOIDs=function(e){try{var i=Object.keys(e);return i.length==0?!1:(i.map(function(n,r,s){var l=this[n];if(!l.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},e),!0)}catch{return!1}}};d.asn1.x509.OID.oid2name=function(t){var e=d.asn1.x509.OID.name2oidList;for(var i in e)if(e[i]==t)return i;return""};d.asn1.x509.OID.oid2atype=function(t){var e=d.asn1.x509.OID.atype2oidList;for(var i in e)if(e[i]==t)return i;return t};d.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=d.asn1.x509.OID.name2oidList;return e[t]===void 0?"":e[t]};d.asn1.x509.X509Util={};d.asn1.x509.X509Util.newCertPEM=function(t){var e=d.asn1.x509,i=e.TBSCertificate,n=e.Certificate,r=new n(t);return r.getPEM()};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.cms>"u"||!d.asn1.cms)&&(d.asn1.cms={});d.asn1.cms.Attribute=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERSet,l=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(a){this.params=a},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var a=new l({oid:this.typeOid}),u=new s({array:this.getValueArray()}),c=new r({array:[a,u]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()}};N(d.asn1.cms.Attribute,d.asn1.ASN1Object);d.asn1.cms.ContentType=function(t){var e=d,i=e.asn1;i.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new i.DERObjectIdentifier(this.params.type);return[n]},t!=null&&this.setByParam(t)};N(d.asn1.cms.ContentType,d.asn1.cms.Attribute);d.asn1.cms.MessageDigest=function(t){var e=d,i=e.asn1,n=i.DEROctetString,r=i.cms;r.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var s=new n(this.params);return[s]},t!=null&&this.setByParam(t)};N(d.asn1.cms.MessageDigest,d.asn1.cms.Attribute);d.asn1.cms.SigningTime=function(t){var e=d,i=e.asn1;i.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new i.x509.Time(this.params);return[n]},t!=null&&this.setByParam(t)};N(d.asn1.cms.SigningTime,d.asn1.cms.Attribute);d.asn1.cms.SigningCertificate=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.cms,l=s.ESSCertID,a=i.crypto;s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var u=this.params.array,c=[],m=0;m<u.length;m++){var p=u[m];t.hasis==!1&&typeof p=="string"&&(p.indexOf("-----BEGIN")!=-1||j.isASN1HEX(p))&&(p={cert:p}),p.hasis!=!1&&t.hasis==!1&&(p.hasis=!1),c.push(new l(p))}var h=new r({array:c}),f=new r({array:[h]});return[f]},t!=null&&this.setByParam(t)};N(d.asn1.cms.SigningCertificate,d.asn1.cms.Attribute);d.asn1.cms.ESSCertID=function(t){d.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,l=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(a,u){if(a.hash!=null)return a.hash;if(typeof a=="string"&&a.indexOf("-----BEGIN")==-1&&!j.isASN1HEX(a))return a;var c;if(typeof a=="string")c=a;else if(a.cert!=null)c=a.cert;else throw new e("hash nor cert unspecified");var m;c.indexOf("-----BEGIN")!=-1?m=ge(c):m=c,typeof a=="string"&&(a.indexOf("-----BEGIN")!=-1?m=ge(a):j.isASN1HEX(a)&&(m=a));var p;if(a.alg!=null)p=a.alg;else if(u!=null)p=u;else throw new e("hash alg unspecified");return i.crypto.Util.hashHex(m,p)},this.tohex=function(){var a=this.params,u=this.getCertHash(a,"sha1"),c=[];c.push(new r({hex:u})),(typeof a=="string"&&a.indexOf("-----BEGIN")!=-1||a.cert!=null&&a.hasis!=!1||a.issuer!=null&&a.serial!=null)&&c.push(new l(a));var m=new s({array:c});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.ESSCertID,d.asn1.ASN1Object);d.asn1.cms.SigningCertificateV2=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.x509,l=n.cms,a=l.ESSCertIDv2,u=i.crypto;l.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var c=this.params.array,m=[],p=0;p<c.length;p++){var h=c[p];(t.alg!=null||t.hasis==!1)&&typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1||j.isASN1HEX(h))&&(h={cert:h}),h.alg==null&&t.alg!=null&&(h.alg=t.alg),h.hasis!=!1&&t.hasis==!1&&(h.hasis=!1),m.push(new a(h))}var f=new r({array:m}),v=new r({array:[f]});return[v]},t!=null&&this.setByParam(t)};N(d.asn1.cms.SigningCertificateV2,d.asn1.cms.Attribute);d.asn1.cms.ESSCertIDv2=function(t){d.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,l=n.cms.IssuerSerial,a=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var u=this.params,c=this.getCertHash(u,"sha256"),m=[];u.alg!=null&&u.alg!="sha256"&&m.push(new a({name:u.alg})),m.push(new r({hex:c})),(typeof u=="string"&&u.indexOf("-----BEGIN")!=-1||u.cert!=null&&u.hasis!=!1||u.issuer!=null&&u.serial!=null)&&m.push(new l(u));var p=new s({array:m});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.ESSCertIDv2,d.asn1.cms.ESSCertID);d.asn1.cms.IssuerSerial=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.DERSequence,l=n.cms,a=n.x509,u=a.GeneralNames,c=W;l.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(m){this.params=m},this.tohex=function(){var m=this.params,p,h;if(typeof m=="string"&&m.indexOf("-----BEGIN")!=-1||m.cert!=null){var f;m.cert!=null?f=m.cert:f=m;var v=new c;v.readCertPEM(f),p=v.getIssuer(),h={hex:v.getSerialNumberHex()}}else if(m.issuer!=null&&m.serial)p=m.issuer,h=m.serial;else throw new e("cert or issuer and serial parameter not specified");var g=new u([{dn:p}]),y=new r(h),b=new s({array:[g,y]});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.IssuerSerial,d.asn1.ASN1Object);d.asn1.cms.SignerIdentifier=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,l=s.IssuerAndSerialNumber,a=s.SubjectKeyIdentifier,u=i.x509,c=u.X500Name,m=W,p=Error;s.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(h.type=="isssn"){var f=new l(h);return f.tohex()}else if(h.type=="skid"){var v=new a(h);return v.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.SignerIdentifier,d.asn1.ASN1Object);d.asn1.cms.IssuerAndSerialNumber=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,l=i.x509,a=l.X500Name,u=W,c=Error;s.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params,p,h;if(typeof m=="string"&&m.indexOf("-----BEGIN")!=-1||m.cert!=null){var f;m.cert!=null?f=m.cert:f=m;var v=new u;v.readCertPEM(f),p=v.getIssuer(),h={hex:v.getSerialNumberHex()}}else if(m.issuer!=null&&m.serial)p=m.issuer,h=m.serial;else throw new c("cert or issuer and serial parameter not specified");var g=new a(p),y=new n(h),b=new r({array:[g,y]});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(m){this.params=m},t!=null&&this.setByParam(t)};N(d.asn1.cms.IssuerAndSerialNumber,d.asn1.ASN1Object);d.asn1.cms.SubjectKeyIdentifier=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.ASN1Util.newObject,l=i.cms,a=l.IssuerAndSerialName,u=l.SubjectKeyIdentifier,c=i.x509,m=c.X500Name,p=W,h=Error;l.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var f=this.params;if(f.cert==null&&f.skid==null)throw new h("property cert nor skid undefined");var v;if(f.cert!=null){var g=new p(f.cert),y=g.getExtSubjectKeyIdentifier();v=y.kid.hex}else f.skid!=null&&(v=f.skid);var b=s({tag:{tage:"a0",obj:{octstr:{hex:v}}}});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.SubjectKeyIdentifier,d.asn1.ASN1Object);d.asn1.cms.AttributeList=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSet,s=n.cms;s.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(l){this.params=l},this.tohex=function(){var l=this.params;if(this.hTLV!=null)return this.hTLV;var a=!0;l.sortflag!=null&&(a=l.sortflag);for(var u=l.array,c=[],m=0;m<u.length;m++){var p=u[m],h=p.attr;if(h=="contentType")c.push(new s.ContentType(p));else if(h=="messageDigest")c.push(new s.MessageDigest(p));else if(h=="signingTime")c.push(new s.SigningTime(p));else if(h=="signingCertificate")c.push(new s.SigningCertificate(p));else if(h=="signingCertificateV2")c.push(new s.SigningCertificateV2(p));else if(h=="signaturePolicyIdentifier")c.push(new d.asn1.cades.SignaturePolicyIdentifier(p));else if(h=="signatureTimeStamp"||h=="timeStampToken")c.push(new d.asn1.cades.SignatureTimeStamp(p));else throw new e("unknown attr: "+h)}var f=new r({array:c,sortflag:a});return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.AttributeList,d.asn1.ASN1Object);d.asn1.cms.SignerInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.DEROctetString,l=n.DERSequence,a=n.DERTaggedObject,u=n.cms,c=u.SignerIdentifier,m=u.AttributeList,p=u.ContentType,h=u.EncapsulatedContentInfo,f=u.MessageDigest,v=u.SignedData,g=n.x509,y=g.AlgorithmIdentifier,b=i.crypto,S=Y;u.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var w=this.params,_=w.sigalg,A=new m(w.sattrs).tohex(),C=S.getKey(w.signkey),x=new b.Signature({alg:_});x.init(C),x.updateHex(A);var E=x.sign();w.sighex=E},this.tohex=function(){var w=this.params,_=[];if(_.push(new r({int:w.version})),_.push(new c(w.id)),_.push(new y({name:w.hashalg})),w.sattrs!=null){var A=new m(w.sattrs);try{_.push(new a({tag:"a0",explicit:!1,obj:A}))}catch(x){throw new e("si sattr error: "+x)}}if(w.sigalgfield!=null?_.push(new y({name:w.sigalgfield})):_.push(new y({name:w.sigalg})),w.sighex==null&&w.signkey!=null&&this.sign(),_.push(new s({hex:w.sighex})),w.uattrs!=null){var A=new m(w.uattrs);try{_.push(new a({tag:"a1",explicit:!1,obj:A}))}catch(E){throw new e("si uattr error: "+E)}}var C=new l({array:_});return C.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.SignerInfo,d.asn1.ASN1Object);d.asn1.cms.EncapsulatedContentInfo=function(t){var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,l=i.DEROctetString,a=i.cms;a.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,c=[];if(c.push(new s(u.type)),u.content!=null&&(u.content.hex!=null||u.content.str!=null)&&u.isDetached!=!0){var m=new l(u.content),p=new n({tag:"a0",explicit:!0,obj:m});c.push(p)}var h=new r({array:c});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},t!=null&&this.setByParam(t)};N(d.asn1.cms.EncapsulatedContentInfo,d.asn1.ASN1Object);d.asn1.cms.ContentInfo=function(t){var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,l=i.x509,a=l.OID.name2obj;d.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,c=[];c.push(new s(u.type));var m=new n({tag:"a0",explicit:!0,obj:u.obj});c.push(m);var p=new r({array:c});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},t!=null&&this.setByParam(t)};N(d.asn1.cms.ContentInfo,d.asn1.ASN1Object);d.asn1.cms.SignedData=function(t){var e=Error,i=d,n=i.asn1,r=n.ASN1Object,s=n.DERInteger,l=n.DERSet,a=n.DERSequence,u=n.DERTaggedObject,c=n.cms,m=c.EncapsulatedContentInfo,p=c.SignerInfo,h=c.ContentInfo,f=c.CertificateSet,v=c.RevocationInfoChoices,g=n.x509,y=g.AlgorithmIdentifier;d.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var b=this.params;this._setDigestAlgs(b),this._setContentTypeByEContent(b),this._setMessageDigestByEContent(b),this._setSignerInfoVersion(b),this._setSignedDataVersion(b)},this._setDigestAlgs=function(b){for(var S={},w=b.sinfos,_=0;_<w.length;_++){var A=w[_];S[A.hashalg]=1}b.hashalgs=Object.keys(S).sort()},this._setContentTypeByEContent=function(b){for(var S=b.econtent.type,w=b.sinfos,_=0;_<w.length;_++){var A=w[_],C=this._getAttrParamByName(A,"contentType");C.type=S}},this._setMessageDigestByEContent=function(b){var S=b.econtent,w=b.econtent.type,_=S.content.hex;_==null&&S.type=="data"&&S.content.str!=null&&(_=Oe(S.content.str));for(var A=b.sinfos,C=0;C<A.length;C++){var x=A[C],E=x.hashalg,F=this._getAttrParamByName(x,"messageDigest"),I=d.crypto.Util.hashHex(_,E);F.hex=I}},this._getAttrParamByName=function(b,S){for(var w=b.sattrs.array,_=0;_<w.length;_++)if(w[_].attr==S)return w[_]},this._setSignerInfoVersion=function(b){for(var S=b.sinfos,w=0;w<S.length;w++){var _=S[w],A=1;_.id.type=="skid"&&(A=3),_.version=A}},this._setSignedDataVersion=function(b){var S=this._getSignedDataVersion(b);b.version=S},this._getSignedDataVersion=function(b){if(b.revinfos!=null)for(var S=b.revinfos,w=0;w<S.length;w++){var _=S[w];if(_.ocsp!=null)return 5}for(var A=b.sinfos,w=0;w<A.length;w++){var C=b.sinfos[w];if(C.version==3)return 3}return b.econtent.type!="data"?3:1},this.tohex=function(){var b=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),b.fixed!=!0&&this.checkAndFixParam();var S=[];S.push(new s({int:b.version}));for(var w=[],_=0;_<b.hashalgs.length;_++){var A=b.hashalgs[_];w.push(new y({name:A}))}S.push(new l({array:w})),S.push(new m(b.econtent)),b.certs!=null&&S.push(new f(b.certs)),b.revinfos!=null&&S.push(new v(b.revinfos));for(var C=[],_=0;_<b.sinfos.length;_++){var x=b.sinfos[_];C.push(new p(x))}S.push(new l({array:C}));var E=new a({array:S});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var b=new h({type:"signed-data",obj:this});return b},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.SignedData,d.asn1.ASN1Object);d.asn1.cms.CertificateSet=function(t){d.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.DERTaggedObject,r=i.DERSet,s=i.ASN1Object;this.params=null,this.tohex=function(){var l=this.params,a=[],u;if(l instanceof Array)u=l;else if(l.array!=null)u=l.array;else throw new e("cert array not specified");for(var c=0;c<u.length;c++){var m=u[c],p=ge(m),h=new s;h.hTLV=p,a.push(h)}var f={array:a};l.sortflag==!1&&(f.sortflag=!1);var v=new r(f),g=new n({tag:"a0",explicit:!1,obj:v});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.CertificateSet,d.asn1.ASN1Object);d.asn1.cms.RevocationInfoChoices=function(t){d.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var i=[],n=0;n<e.length;n++)i.push(new d.asn1.cms.RevocationInfoChoice(e[n]));var r=d.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:i}}});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.RevocationInfoChoices,d.asn1.ASN1Object);d.asn1.cms.RevocationInfoChoice=function(t){d.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.crl!=null&&typeof e.crl=="string"){var i=e.crl;return e.crl.indexOf("-----BEGIN")!=-1&&(i=ge(e.crl)),i}else if(e.ocsp!=null){var n=d.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new d.asn1.cms.OtherRevocationFormat(e)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.RevocationInfoChoice,d.asn1.ASN1Object);d.asn1.cms.OtherRevocationFormat=function(t){d.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.ASN1Util.newObject,s=i.lang.String.isHex;this.params=null,this.tohex=function(){var l=this.params;if(l.ocsp==null)throw new e("property ocsp not specified");if(!s(l.ocsp)||!j.isASN1HEX(l.ocsp))throw new e("ocsp value not ASN.1 hex string");var a=r({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:l.ocsp}}]});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cms.OtherRevocationFormat,d.asn1.ASN1Object);d.asn1.cms.CMSUtil=new function(){};d.asn1.cms.CMSUtil.newSignedData=function(t){return new d.asn1.cms.SignedData(t)};d.asn1.cms.CMSUtil.verifySignedData=function(t){var e=d,i=e.asn1,n=i.cms,r=n.SignerInfo,s=n.SignedData,l=n.SigningTime,a=n.SigningCertificate,u=n.SigningCertificateV2,c=i.cades,m=c.SignaturePolicyIdentifier,p=e.lang.String.isHex,h=j,f=h.getVbyList,v=h.getTLVbyList,g=h.getIdxbyList,y=h.getChildIdx,b=h.getTLV,S=h.oidname,w=e.crypto.Util.hashHex;t.cms===void 0&&p(t.cms);var _=t.cms,A=function(B,D){for(var k,K=3;K<6;K++)if(k=g(B,0,[1,0,K]),k!==void 0){var V=B.substr(k,2);V==="a0"&&(D.certsIdx=k),V==="a1"&&(D.revinfosIdx=k),V==="31"&&(D.signerinfosIdx=k)}},C=function(B,D){var k=D.signerinfosIdx;if(k!==void 0){var K=y(B,k);D.signerInfoIdxList=K;for(var V=0;V<K.length;V++){var G=K[V],J={idx:G};x(B,J),D.signerInfos.push(J)}}},x=function(B,D){var k=D.idx;D.signerid_issuer1=v(B,k,[1,0],"30"),D.signerid_serial1=f(B,k,[1,1],"02"),D.hashalg=S(f(B,k,[2,0],"06"));var K=g(B,k,[3],"a0");D.idxSignedAttrs=K,E(B,D,K);var V=y(B,k),G=V.length;if(G<6)throw"malformed SignerInfo";D.sigalg=S(f(B,k,[G-2,0],"06")),D.sigval=f(B,k,[G-1],"04")},E=function(B,D,k){var K=y(B,k);D.signedAttrIdxList=K;for(var V=0;V<K.length;V++){var G=K[V],J=f(B,G,[0],"06"),$;J==="2a864886f70d010905"?($=ie(f(B,G,[1,0])),D.saSigningTime=$):J==="2a864886f70d010904"&&($=f(B,G,[1,0],"04"),D.saMessageDigest=$)}},F=function(B,D){if(f(B,0,[0],"06")!=="2a864886f70d010702")return D;D.cmsType="signedData",D.econtent=f(B,0,[1,0,2,1,0]),A(B,D),D.signerInfos=[],C(B,D)},I=function(B,D){for(var k=D.parse.signerInfos,K=k.length,V=!0,G=0;G<K;G++){var J=k[G];R(B,D,J,G),J.isValid||(V=!1)}D.isValid=V},P=function(B,D,k,K){var V=D.parse.certsIdx,G;if(D.certs===void 0){G=[],D.certkeys=[];for(var J=y(B,V),$=0;$<J.length;$++){var de=b(B,J[$]),ne=new W;ne.readCertHex(de),G[$]=ne,D.certkeys[$]=ne.getPublicKey()}D.certs=G}else G=D.certs;D.cccc=G.length,D.cccci=J.length;for(var $=0;$<G.length;$++){var fe=ne.getIssuerHex(),ae=ne.getSerialNumberHex();k.signerid_issuer1===fe&&k.signerid_serial1===ae&&(k.certkey_idx=$)}},R=function(B,D,k,K){k.verifyDetail={};var V=k.verifyDetail,G=D.parse.econtent,J=k.hashalg,$=k.saMessageDigest;V.validMessageDigest=!1,w(G,J)===$&&(V.validMessageDigest=!0),P(B,D,k,K),V.validSignatureValue=!1;var de=k.sigalg,ne="31"+b(B,k.idxSignedAttrs).substr(2);k.signedattrshex=ne;var fe=D.certs[k.certkey_idx].getPublicKey(),ae=new d.crypto.Signature({alg:de});ae.init(fe),ae.updateHex(ne);var he=ae.verify(k.sigval);V.validSignatureValue_isValid=he,he===!0&&(V.validSignatureValue=!0),k.isValid=!1,V.validMessageDigest&&V.validSignatureValue&&(k.isValid=!0)},M=function(){},T={isValid:!1,parse:{}};return F(_,T.parse),I(_,T),T};d.asn1.cms.CMSParser=function(){var t=Error,e=W,i=new e,n=j,r=n.getV,s=n.getTLV,l=n.getIdxbyList,a=n.getTLVbyList,u=n.getTLVbyListEx,c=n.getVbyList,m=n.getVbyListEx,p=n.getChildIdx;this.getCMSSignedData=function(h){var f=a(h,0,[1,0]),v=this.getSignedData(f);return v},this.getSignedData=function(h){var f=p(h,0),v={},g=r(h,f[0]),y=parseInt(g,16);v.version=y;var b=s(h,f[1]);v.hashalgs=this.getHashAlgArray(b);var S=s(h,f[2]);v.econtent=this.getEContent(S);var w=u(h,0,["[0]"]);w!=null&&(v.certs=this.getCertificateSet(w));var _=u(h,0,["[1]"]);_!=null;var A=u(h,0,[3]);return v.sinfos=this.getSignerInfos(A),v},this.getHashAlgArray=function(h){for(var f=p(h,0),v=new e,g=[],y=0;y<f.length;y++){var b=s(h,f[y]),S=v.getAlgorithmIdentifierName(b);g.push(S)}return g},this.getEContent=function(h){var f={},v=c(h,0,[0]),g=c(h,0,[1,0]);return f.type=d.asn1.x509.OID.oid2name(j.hextooidstr(v)),f.content={hex:g},f},this.getSignerInfos=function(h){for(var f=[],v=p(h,0),g=0;g<v.length;g++){var y=s(h,v[g]),b=this.getSignerInfo(y);f.push(b)}return f},this.getSignerInfo=function(h){var f={},v=p(h,0),g=n.getInt(h,v[0],-1);g!=-1&&(f.version=g);var y=s(h,v[1]),b=this.getIssuerAndSerialNumber(y);f.id=b;var S=s(h,v[2]),w=i.getAlgorithmIdentifierName(S);f.hashalg=w;var _=u(h,0,["[0]"]);if(_!=null){var A=this.getAttributeList(_);f.sattrs=A}var C=u(h,0,[3]),x=i.getAlgorithmIdentifierName(C);f.sigalg=x;var E=m(h,0,[4]);f.sighex=E;var F=u(h,0,["[1]"]);if(F!=null){var I=this.getAttributeList(F);f.uattrs=I}return f},this.getSignerIdentifier=function(h){if(h.substr(0,2)=="30")return this.getIssuerAndSerialNumber(h);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(h){var f={type:"isssn"},v=p(h,0),g=s(h,v[0]);f.issuer=i.getX500Name(g);var y=r(h,v[1]);return f.serial={hex:y},f},this.getAttributeList=function(h){for(var f=[],v=p(h,0),g=0;g<v.length;g++){var y=s(h,v[g]),b=this.getAttribute(y);f.push(b)}return{array:f}},this.getAttribute=function(h){var f={},v=p(h,0),g=n.getOID(h,v[0]),y=d.asn1.x509.OID.oid2name(g);f.attr=y;var b=s(h,v[1]),S=p(b,0);if(S.length==1)f.valhex=s(b,S[0]);else{for(var w=[],_=0;_<S.length;_++)w.push(s(b,S[_]));f.valhex=w}return y=="contentType"?this.setContentType(f):y=="messageDigest"?this.setMessageDigest(f):y=="signingTime"?this.setSigningTime(f):y=="signingCertificate"?this.setSigningCertificate(f):y=="signingCertificateV2"?this.setSigningCertificateV2(f):y=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(f),f},this.setContentType=function(h){var f=n.getOIDName(h.valhex,0,null);f!=null&&(h.type=f,delete h.valhex)},this.setSigningTime=function(h){var f=r(h.valhex,0),v=ie(f);h.str=v,delete h.valhex},this.setMessageDigest=function(h){var f=r(h.valhex,0);h.hex=f,delete h.valhex},this.setSigningCertificate=function(h){var f=p(h.valhex,0);if(f.length>0){for(var v=s(h.valhex,f[0]),g=p(v,0),y=[],b=0;b<g.length;b++){var S=s(v,g[b]),w=this.getESSCertID(S);y.push(w)}h.array=y}if(f.length>1){var _=s(h.valhex,f[1]);h.polhex=_}delete h.valhex},this.setSignaturePolicyIdentifier=function(h){var f=p(h.valhex,0);if(f.length>0){var v=n.getOID(h.valhex,f[0]);h.oid=v}if(f.length>1){var g=new e,y=p(h.valhex,f[1]),b=s(h.valhex,y[0]),S=g.getAlgorithmIdentifierName(b);h.alg=S;var w=r(h.valhex,y[1]);h.hash=w}delete h.valhex},this.setSigningCertificateV2=function(h){var f=p(h.valhex,0);if(f.length>0){for(var v=s(h.valhex,f[0]),g=p(v,0),y=[],b=0;b<g.length;b++){var S=s(v,g[b]),w=this.getESSCertIDv2(S);y.push(w)}h.array=y}if(f.length>1){var _=s(h.valhex,f[1]);h.polhex=_}delete h.valhex},this.getESSCertID=function(h){var f={},v=p(h,0);if(v.length>0){var g=r(h,v[0]);f.hash=g}if(v.length>1){var y=s(h,v[1]),b=this.getIssuerSerial(y);b.serial!=null&&(f.serial=b.serial),b.issuer!=null&&(f.issuer=b.issuer)}return f},this.getESSCertIDv2=function(h){var f={},v=p(h,0);if(v.length<1||3<v.length)throw new t("wrong number of elements");var g=0;if(h.substr(v[0],2)=="30"){var y=s(h,v[0]);f.alg=i.getAlgorithmIdentifierName(y),g++}else f.alg="sha256";var b=r(h,v[g]);if(f.hash=b,v.length>g+1){var S=s(h,v[g+1]),w=this.getIssuerSerial(S);f.issuer=w.issuer,f.serial=w.serial}return f},this.getIssuerSerial=function(h){var f={},v=p(h,0),g=s(h,v[0]),y=i.getGeneralNames(g),b=y[0].dn;f.issuer=b;var S=r(h,v[1]);return f.serial={hex:S},f},this.getCertificateSet=function(h){for(var f=p(h,0),v=[],g=0;g<f.length;g++){var y=s(h,f[g]);if(y.substr(0,2)=="30"){var b=be(y,"CERTIFICATE");v.push(b)}}return{array:v,sortflag:!1}}};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.tsp>"u"||!d.asn1.tsp)&&(d.asn1.tsp={});d.asn1.tsp.TimeStampToken=function(t){var e=d,i=e.asn1,n=i.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var r=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=r.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.TimeStampToken,d.asn1.cms.SignedData);d.asn1.tsp.TSTInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERInteger,l=n.DERBoolean,a=n.DERGeneralizedTime,u=n.DERObjectIdentifier,c=n.DERTaggedObject,m=n.tsp,p=m.MessageImprint,h=m.Accuracy,f=n.x509.X500Name,v=n.x509.GeneralName;if(m.TSTInfo.superclass.constructor.call(this),this.dVersion=new s({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var g=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(g.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(g.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(g.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");g.push(this.dGenTime),this.dAccuracy!=null&&g.push(this.dAccuracy),this.dOrdering!=null&&g.push(this.dOrdering),this.dNonce!=null&&g.push(this.dNonce),this.dTsa!=null&&g.push(this.dTsa);var y=new r({array:g});return this.hTLV=y.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0){if(typeof t.policy=="string"){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new u({oid:t.policy})}t.messageImprint!==void 0&&(this.dMessageImprint=new p(t.messageImprint)),t.serial!==void 0&&(this.dSerial=new s(t.serial)),t.genTime!==void 0&&(this.dGenTime=new a(t.genTime)),t.accuracy!==void 0&&(this.dAccuracy=new h(t.accuracy)),t.ordering!==void 0&&t.ordering==!0&&(this.dOrdering=new l),t.nonce!==void 0&&(this.dNonce=new s(t.nonce)),t.tsa!==void 0&&(this.dTsa=new c({tag:"a0",explicit:!0,obj:new v({dn:t.tsa})}))}};N(d.asn1.tsp.TSTInfo,d.asn1.ASN1Object);d.asn1.tsp.Accuracy=function(t){var e=d,i=e.asn1,n=i.ASN1Util.newObject;i.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,s=[];return r.seconds!=null&&typeof r.seconds=="number"&&s.push({int:r.seconds}),r.millis!=null&&typeof r.millis=="number"&&s.push({tag:{tagi:"80",obj:{int:r.millis}}}),r.micros!=null&&typeof r.micros=="number"&&s.push({tag:{tagi:"81",obj:{int:r.micros}}}),n({seq:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.Accuracy,d.asn1.ASN1Object);d.asn1.tsp.MessageImprint=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DEROctetString,s=i.x509,l=s.AlgorithmIdentifier;i.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params,u=new l({name:a.alg}),c=new r({hex:a.hash}),m=new n({array:[u,c]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.tsp.MessageImprint,d.asn1.ASN1Object);d.asn1.tsp.TimeStampReq=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DERInteger,s=i.DERBoolean,l=i.ASN1Object,a=i.DERObjectIdentifier,u=i.tsp,c=u.MessageImprint;u.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params,p=[];p.push(new r({int:1})),m.messageImprint instanceof d.asn1.ASN1Object?p.push(m.messageImprint):p.push(new c(m.messageImprint)),m.policy!=null&&p.push(new a(m.policy)),m.nonce!=null&&p.push(new r(m.nonce)),m.certreq==!0&&p.push(new s);var h=new n({array:p});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.TimeStampReq,d.asn1.ASN1Object);d.asn1.tsp.TimeStampResp=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ASN1Object,s=i.tsp,l=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params,u=[];if(a.econtent!=null||a.tst!=null)if(a.statusinfo!=null?u.push(new l(a.statusinfo)):u.push(new l("granted")),a.econtent!=null)u.push(new s.TimeStampToken(a).getContentInfo());else if(a.tst instanceof i.ASN1Object)u.push(a.tst);else throw new Error("improper member tst value");else if(a.statusinfo!=null)u.push(new l(a.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var c=new n({array:u});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.TimeStampResp,d.asn1.ASN1Object);d.asn1.tsp.PKIStatusInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.tsp,l=s.PKIStatus,a=s.PKIFreeText,u=s.PKIFailureInfo;s.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,m=[];if(typeof c=="string")m.push(new l(c));else{if(c.status==null)throw new e("property 'status' unspecified");m.push(new l(c.status)),c.statusstr!=null&&m.push(new a(c.statusstr)),c.failinfo!=null&&m.push(new u(c.failinfo))}var p=new r({array:m});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.PKIStatusInfo,d.asn1.ASN1Object);d.asn1.tsp.PKIStatus=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.tsp;s.PKIStatus.superclass.constructor.call(this);var l={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var a=this.params,u,c;if(typeof a=="string")try{c=l[a]}catch{throw new e("undefined name: "+a)}else if(typeof a=="number")c=a;else throw new e("unsupported params");return new r({int:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.PKIStatus,d.asn1.ASN1Object);d.asn1.tsp.PKIFreeText=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERUTF8String,l=n.tsp;l.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params;if(!a instanceof Array)throw new e("wrong params: not array");for(var u=[],c=0;c<a.length;c++)u.push(new s({str:a[c]}));var m=new r({array:u});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.PKIFreeText,d.asn1.ASN1Object);d.asn1.tsp.PKIFailureInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERBitString,s=n.tsp,l=s.PKIFailureInfo,a={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};l.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var u=this.params,c=0;if(typeof u=="number"&&0<=u&&u<=25){c|=1<<u;for(var m=c.toString(2),p="",h=m.length-1;h>=0;h--)p+=m[h];return p}else{if(typeof u=="string"&&a[u]!=null)return Dt([u],a);if(typeof u=="object"&&u.length!=null)return Dt(u,a);throw new e("wrong params")}},this.tohex=function(){var u=this.params,c=this.getBinValue();return new r({bin:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.tsp.PKIFailureInfo,d.asn1.ASN1Object);d.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(e,i){throw"not implemented yet"}};d.asn1.tsp.SimpleTSAAdapter=function(t){var e=d,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(s,l){var a=r(s,l);this.params.econtent.content.messageImprint={alg:l,hash:a},this.params.econtent.content.serial={int:this.serial++};var u=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:u};var c=new n.TimeStampToken(this.params);return c.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};N(d.asn1.tsp.SimpleTSAAdapter,d.asn1.tsp.AbstractTSAAdapter);d.asn1.tsp.FixedTSAAdapter=function(t){var e=d,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(s,l){var a=r(s,l);this.params.econtent.content.messageImprint={alg:l,hash:a};var u=new n.TimeStampToken(this.params);return u.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};N(d.asn1.tsp.FixedTSAAdapter,d.asn1.tsp.AbstractTSAAdapter);d.asn1.tsp.TSPUtil=new function(){};d.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new d.asn1.tsp.TimeStampToken(t)};d.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=new d.asn1.tsp.TSPParser;return e.getTimeStampReq(t)};d.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=new d.asn1.tsp.TSPParser;return e.getMessageImprint(t)};d.asn1.tsp.TSPParser=function(){var t=Error,e=W,i=new e,n=j,r=n.getV,s=n.getTLV,l=n.getIdxbyList,a=n.getTLVbyListEx,u=n.getChildIdx,c=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],m={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(p){var h=u(p,0);if(h.length==1)return this.getPKIStatusInfo(s(p,h[0]));if(h.length>1){var f=this.getPKIStatusInfo(s(p,h[0])),v=s(p,h[1]),g=this.getToken(v);return g.statusinfo=f,g}},this.getToken=function(p){var h=new d.asn1.cms.CMSParser,f=h.getCMSSignedData(p);return this.setTSTInfo(f),f},this.setTSTInfo=function(p){var h=p.econtent;if(h.type=="tstinfo"){var f=h.content.hex,v=this.getTSTInfo(f);h.content=v}},this.getTSTInfo=function(p){var h={},f=u(p,0),v=r(p,f[1]);h.policy=zt(v);var g=s(p,f[2]);h.messageImprint=this.getMessageImprint(g);var y=r(p,f[3]);h.serial={hex:y};var b=r(p,f[4]);h.genTime={str:ie(b)};var S=0;if(f.length>5&&p.substr(f[5],2)=="30"){var w=s(p,f[5]);h.accuracy=this.getAccuracy(w),S++}if(f.length>5+S&&p.substr(f[5+S],2)=="01"){var _=r(p,f[5+S]);_=="ff"&&(h.ordering=!0),S++}if(f.length>5+S&&p.substr(f[5+S],2)=="02"){var A=r(p,f[5+S]);h.nonce={hex:A},S++}if(f.length>5+S&&p.substr(f[5+S],2)=="a0"){var C=s(p,f[5+S]);C="30"+C.substr(2),pGeneralNames=i.getGeneralNames(C);var x=pGeneralNames[0].dn;h.tsa=x,S++}if(f.length>5+S&&p.substr(f[5+S],2)=="a1"){var E=s(p,f[5+S]);E="30"+E.substr(2);var F=i.getExtParamArray(E);h.ext=F,S++}return h},this.getAccuracy=function(p){for(var h={},f=u(p,0),v=0;v<f.length;v++){var g=p.substr(f[v],2),y=r(p,f[v]),b=parseInt(y,16);g=="02"?h.seconds=b:g=="80"?h.millis=b:g=="81"&&(h.micros=b)}return h},this.getMessageImprint=function(p){if(p.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var h={},f=u(p,0),v=l(p,0,[0,0]),g=r(p,v),y=n.hextooidstr(g),b=d.asn1.x509.OID.oid2name(y);if(b=="")throw new Error("hashAlg name undefined: "+y);var S=b,w=l(p,0,[1]);return h.alg=S,h.hash=r(p,w),h},this.getPKIStatusInfo=function(p){var h={},f=u(p,0),v=0;try{var g=r(p,f[0]),y=parseInt(g,16);h.status=c[y]}catch{}if(f.length>1&&p.substr(f[1],2)=="30"){var b=s(p,f[1]);h.statusstr=this.getPKIFreeText(b),v++}if(f.length>v&&p.substr(f[1+v],2)=="03"){var S=s(p,f[1+v]);h.failinfo=this.getPKIFailureInfo(S)}return h},this.getPKIFreeText=function(p){for(var h=[],f=u(p,0),v=0;v<f.length;v++)h.push(n.getString(p,f[v]));return h},this.getPKIFailureInfo=function(p){var h=n.getInt(p,0);return m[h]!=null?m[h]:h},this.getTimeStampReq=function(p){var h={};h.certreq=!1;var f=u(p,0);if(f.length<2)throw new Error("TimeStampReq must have at least 2 items");var v=s(p,f[1]);h.messageImprint=d.asn1.tsp.TSPUtil.parseMessageImprint(v);for(var g=2;g<f.length;g++){var y=f[g],b=p.substr(y,2);if(b=="06"){var S=r(p,y);h.policy=n.hextooidstr(S)}b=="02"&&(h.nonce=r(p,y)),b=="01"&&(h.certreq=!0)}return h}};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.cades>"u"||!d.asn1.cades)&&(d.asn1.cades={});d.asn1.cades.SignaturePolicyIdentifier=function(t){var e=d,i=e.asn1,n=i.cades,r=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new r(this.params)]},this.setByParam=function(s){this.params=s},t!=null&&this.setByParam(t)};N(d.asn1.cades.SignaturePolicyIdentifier,d.asn1.cms.Attribute);d.asn1.cades.SignaturePolicyId=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DERObjectIdentifier,s=i.x509,l=s.AlgorithmIdentifier,a=i.cades,u=a.SignaturePolicyId,c=a.OtherHashAlgAndValue;u.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params,p=[];p.push(new r(m.oid)),p.push(new c(m));var h=new n({array:p});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(m){this.params=m},t!=null&&this.setByParam(t)};N(d.asn1.cades.SignaturePolicyId,d.asn1.ASN1Object);d.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DEROctetString,l=n.x509,a=l.AlgorithmIdentifier,u=n.cades,c=u.OtherHashAlgAndValue;c.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params;if(m.alg==null)throw new e("property 'alg' not specified");if(m.hash==null&&m.cert==null)throw new e("property 'hash' nor 'cert' not specified");var p=null;if(m.hash!=null)p=m.hash;else if(m.cert!=null){if(typeof m.cert!="string")throw new e("cert not string");var h=m.cert;m.cert.indexOf("-----BEGIN")!=-1&&(h=ge(m.cert)),p=d.crypto.Util.hashHex(h,m.alg)}var f=[];f.push(new a({name:m.alg})),f.push(new s({hex:p}));var v=new r({array:f});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cades.OtherHashAlgAndValue,d.asn1.ASN1Object);d.asn1.cades.OtherHashValue=function(t){d.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,i=d,n=i.lang.String.isHex,r=i.asn1,s=r.DEROctetString,l=i.crypto.Util.hashHex;this.params=null,this.tohex=function(){var a=this.params;if(a.hash==null&&a.cert==null)throw new e("hash or cert not specified");var u=null;if(a.hash!=null)u=a.hash;else if(a.cert!=null){if(typeof a.cert!="string")throw new e("cert not string");var c=a.cert;a.cert.indexOf("-----BEGIN")!=-1&&(c=ge(a.cert)),u=d.crypto.Util.hashHex(c,"sha1")}return new s({hex:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cades.OtherHashValue,d.asn1.ASN1Object);d.asn1.cades.SignatureTimeStamp=function(t){var e=Error,i=d,n=i.lang.String.isHex,r=i.asn1,s=r.ASN1Object,l=r.x509,a=r.cades;a.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var u=this.params;if(u.tst!=null)if(n(u.tst)){var c=new s;return c.hTLV=u.tst,[c]}else{if(u.tst instanceof s)return[u.tst];throw new e("params.tst has wrong value")}else if(u.res!=null){var m=u.res;if(m instanceof s&&(m=m.tohex()),typeof m!="string"||!n(m))throw new e("params.res has wrong value");var p=j.getTLVbyList(m,0,[1]),c=new s;return c.hTLV=u.tst,[c]}},t!=null&&this.setByParam(t)};N(d.asn1.cades.SignatureTimeStamp,d.asn1.cms.Attribute);d.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.cades,l=s.OtherCertID,a=i.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var u=this.params,c=[],m=0;m<u.array.length;m++){var p=u.array[m];if(typeof p=="string")if(p.indexOf("-----BEGIN")!=-1)p={cert:p};else if(a(p))p={hash:p};else throw new e("unsupported value: "+p);u.alg!=null&&p.alg==null&&(p.alg=u.alg),u.hasis!=null&&p.hasis==null&&(p.hasis=u.hasis);var h=new l(p);c.push(h)}var f=new r({array:c});return[f]},t!=null&&this.setByParam(t)};N(d.asn1.cades.CompleteCertificateRefs,d.asn1.cms.Attribute);d.asn1.cades.OtherCertID=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.cms,s=r.IssuerSerial,l=i.cades,a=l.OtherHashValue,u=l.OtherHashAlgAndValue;l.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var c=this.params;typeof c=="string"&&(c.indexOf("-----BEGIN")!=-1?c={cert:c}:_isHex(c)&&(c={hash:c}));var m=[],p=null;if(c.alg!=null?p=new u(c):p=new a(c),m.push(p),c.cert!=null&&c.hasis==!0||c.issuer!=null&&c.serial!=null){var h=new s(c);m.push(h)}var f=new n({array:m});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cades.OtherCertID,d.asn1.ASN1Object);d.asn1.cades.OtherHash=function(t){var e=Error,i=d,n=i.asn1,r=n.cms,s=n.cades,l=s.OtherHashAlgAndValue,a=s.OtherHashValue,u=i.crypto.Util.hashHex,c=i.lang.String.isHex;s.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params;typeof m=="string"&&(m.indexOf("-----BEGIN")!=-1?m={cert:m}:c(m)&&(m={hash:m}));var p=null;return m.alg!=null?p=new l(m):p=new a(m),p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.cades.OtherHash,d.asn1.ASN1Object);d.asn1.cades.CAdESUtil=new function(){};d.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=new d.asn1.cms.CMSParser,i=e.getCMSSignedData(t);return i};d.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getTLV,l=n.getV,a=d,u=a.asn1,c=u.ASN1Object,m=u.cms,p=m.AttributeList,h=m.SignerInfo,f={},v=r(t,e);if(v.length!=6)throw"not supported items for SignerInfo (!=6)";var g=v.shift();f.version=s(t,g);var y=v.shift();f.si=s(t,y);var b=v.shift();f.digalg=s(t,b);var S=v.shift();f.sattrs=s(t,S);var w=v.shift();f.sigalg=s(t,w);var _=v.shift();f.sig=s(t,_),f.sigval=l(t,_);var A=null;return f.obj=new h,A=new c,A.hTLV=f.version,f.obj.dCMSVersion=A,A=new c,A.hTLV=f.si,f.obj.dSignerIdentifier=A,A=new c,A.hTLV=f.digalg,f.obj.dDigestAlgorithm=A,A=new c,A.hTLV=f.sattrs,f.obj.dSignedAttrs=A,A=new c,A.hTLV=f.sigalg,f.obj.dSigAlg=A,A=new c,A.hTLV=f.sig,f.obj.dSig=A,f.obj.dUnsignedAttrs=new p,f};(typeof d.asn1.csr>"u"||!d.asn1.csr)&&(d.asn1.csr={});d.asn1.csr.CertificationRequest=function(t){var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.csr,l=i.x509,a=s.CertificationRequestInfo;s.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(u){this.params=u},this.sign=function(){var u=new a(this.params).tohex(),c=new d.crypto.Signature({alg:this.params.sigalg});c.init(this.params.sbjprvkey),c.updateHex(u);var m=c.sign();this.params.sighex=m},this.getPEM=function(){return be(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var u=this.params,c=new d.asn1.csr.CertificationRequestInfo(this.params),m=new d.asn1.x509.AlgorithmIdentifier({name:u.sigalg});if(u.sighex==null&&u.sbjprvkey!=null&&this.sign(),u.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var p=new n({hex:"00"+u.sighex}),h=new r({array:[c,m,p]});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.csr.CertificationRequest,d.asn1.ASN1Object);d.asn1.csr.CertificationRequestInfo=function(t){var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.DERInteger,l=i.DERUTF8String,a=i.DERTaggedObject,u=i.ASN1Util.newObject,c=i.csr,m=i.x509,p=m.X500Name,h=m.Extensions,f=m.SubjectPublicKeyInfo;c.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(v){v!=null&&(this.params=v)},this.tohex=function(){var v=this.params,g=[];if(g.push(new s({int:0})),g.push(new p(v.subject)),g.push(new f(Y.getKey(v.sbjpubkey))),v.extreq!=null){var y=new h(v.extreq),b=u({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[y]}]}}});g.push(b)}else g.push(new a({tag:"a0",explicit:!1,obj:new l({str:""})}));var S=new r({array:g});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};N(d.asn1.csr.CertificationRequestInfo,d.asn1.ASN1Object);d.asn1.csr.CSRUtil=new function(){};d.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Y,i=d.asn1.csr,n=new i.CertificationRequest(t),r=n.getPEM();return r};d.asn1.csr.CSRUtil.getParam=function(t){var e=j,i=e.getV,n=e.getIdxbyList,r=e.getTLVbyList,s=e.getTLVbyListEx,l=e.getVbyListEx,a=function(b){var S=n(b,0,[0,3,0,0],"06");return i(b,S)!="2a864886f70d01090e"?null:r(b,0,[0,3,0,1,0],"30")},u={};if(t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var c=ge(t,"CERTIFICATE REQUEST");try{var m=s(c,0,[0,1]);if(m=="3000")u.subject={};else{var v=new W;u.subject=v.getX500Name(m)}}catch{}var p=s(c,0,[0,2]),h=Y.getKey(p,null,"pkcs8pub");u.sbjpubkey=Y.getPEM(h,"PKCS8PUB");var f=a(c),v=new W;f!=null&&(u.extreq=v.getExtParamArray(f));try{var g=s(c,0,[1],"30"),v=new W;u.sigalg=v.getAlgorithmIdentifierName(g)}catch{}try{var y=l(c,0,[2]);u.sighex=y}catch{}return u};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.ocsp>"u"||!d.asn1.ocsp)&&(d.asn1.ocsp={});d.asn1.ocsp.DEFAULT_HASH="sha1";d.asn1.ocsp.OCSPResponse=function(t){d.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var e=d.asn1.DEREnumerated,i=d.asn1.ASN1Util.newObject,n=d.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var s=this.params.resstatus;return typeof s=="number"?s:typeof s!="string"?-1:r.indexOf(s)},this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,l=this._getStatusCode();if(l==-1)throw new Error("responseStatus not supported: "+s.resstatus);if(l!=0)return i({seq:[{enum:{int:l}}]}).tohex();var a=new n(s);return i({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:a}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.OCSPResponse,d.asn1.ASN1Object);d.asn1.ocsp.ResponseBytes=function(t){d.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=d.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(l){this.params=l},this.tohex=function(){var l=this.params;if(l.restype!="ocspBasic")throw new Error("not supported responseType: "+l.restype);var a=new s(l),u=[];u.push(new n({name:"ocspBasic"})),u.push(new r({hex:a.tohex()}));var c=new i({array:u});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.ResponseBytes,d.asn1.ASN1Object);d.asn1.ocsp.BasicOCSPResponse=function(t){d.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.ASN1Object,r=i.DERSequence,s=i.DERGeneralizedTime,l=i.DERTaggedObject,a=i.DERBitString,u=i.x509.Extensions,c=i.x509.AlgorithmIdentifier,m=i.ocsp,p=m.ResponderID;_SingleResponseList=m.SingleResponseList,_ResponseData=m.ResponseData,this.params=null,this.setByParam=function(h){this.params=h},this.sign=function(){var h=this.params,f=h.tbsresp.tohex(),v=new d.crypto.Signature({alg:h.sigalg});v.init(h.reskey),v.updateHex(f),h.sighex=v.sign()},this.tohex=function(){var h=this.params;h.tbsresp==null&&(h.tbsresp=new _ResponseData(h)),h.sighex==null&&h.reskey!=null&&this.sign();var f=[];if(f.push(h.tbsresp),f.push(new c({name:h.sigalg})),f.push(new a({hex:"00"+h.sighex})),h.certs!=null&&h.certs.length!=null){for(var v=[],g=0;g<h.certs.length;g++){var y=h.certs[g],b=null;if(j.isASN1HEX(y))b=y;else if(y.match(/-----BEGIN/))b=ge(y);else throw new e("certs["+g+"] not hex or PEM");v.push(new n({tlv:b}))}var S=new r({array:v});f.push(new l({tag:"a0",explicit:!0,obj:S}))}var w=new r({array:f});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.BasicOCSPResponse,d.asn1.ASN1Object);d.asn1.ocsp.ResponseData=function(t){d.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.DERSequence,r=i.DERGeneralizedTime,s=i.DERTaggedObject,l=i.x509.Extensions,a=i.ocsp,u=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var c=this.params;c.respid!=null&&new e("respid not specified"),c.prodat!=null&&new e("prodat not specified"),c.array!=null&&new e("array not specified");var m=[];if(m.push(new u(c.respid)),m.push(new r(c.prodat)),m.push(new _SingleResponseList(c.array)),c.ext!=null){var p=new l(c.ext);m.push(new s({tag:"a1",explicit:!0,obj:p}))}var h=new n({array:m});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.ResponseData,d.asn1.ASN1Object);d.asn1.ocsp.ResponderID=function(t){d.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.ASN1Util.newObject,r=i.x509.X500Name,s=e.lang.String.isHex,l=Error;this.params=null,this.tohex=function(){var a=this.params;if(a.key!=null){var u=null;if(typeof a.key=="string"){if(s(a.key)&&(u=a.key),a.key.match(/-----BEGIN CERTIFICATE/)){var c=new W(a.key),m=c.getExtSubjectKeyIdentifier();m!=null&&(u=m.kid.hex)}}else if(a.key instanceof W){var m=a.key.getExtSubjectKeyIdentifier();m!=null&&(u=m.kid.hex)}if(u==null)throw new l("wrong key member value");var p=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:u}}}});return p.tohex()}else if(a.name!=null){var h=null;if(typeof a.name=="string"&&a.name.match(/-----BEGIN CERTIFICATE/)){var c=new W(a.name);h=c.getSubject()}else a.name instanceof W?h=a.name.getSubject():typeof a.name=="object"&&(a.name.array!=null||a.name.str!=null)&&(h=a.name);if(h==null)throw new l("wrong name member value");var p=n({tag:{tag:"a1",explicit:!0,obj:new r(h)}});return p.tohex()}throw new l("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(a){this.params=a},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.ResponderID,d.asn1.ASN1Object);d.asn1.ocsp.SingleResponseList=function(t){d.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=d.asn1,i=e.DERSequence,n=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var r=this.params;if(typeof r!="object"||r.length==null)throw new Error("params not specified properly");for(var s=[],l=0;l<r.length;l++)s.push(new n(r[l]));var a=new i({array:s});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(r){this.params=r},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.SingleResponseList,d.asn1.ASN1Object);d.asn1.ocsp.SingleResponse=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERGeneralizedTime,l=n.DERTaggedObject,a=n.ocsp,u=a.CertID,c=a.CertStatus,m=n.x509,p=m.Extensions;a.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,f=[];if(h.certid==null)throw new e("certid unspecified");if(h.status==null)throw new e("status unspecified");if(h.thisupdate==null)throw new e("thisupdate unspecified");if(f.push(new u(h.certid)),f.push(new c(h.status)),f.push(new s(h.thisupdate)),h.nextupdate!=null){var v=new s(h.nextupdate);f.push(new l({tag:"a0",explicit:!0,obj:v}))}if(h.ext!=null){var g=new p(h.ext);f.push(new l({tag:"a1",explicit:!0,obj:g}))}var y=new r({array:f});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.SingleResponse,d.asn1.ASN1Object);d.asn1.ocsp.CertID=function(t){var e=d,i=e.asn1,n=i.DEROctetString,r=i.DERInteger,s=i.DERSequence,l=i.x509,a=l.AlgorithmIdentifier,u=i.ocsp,c=u.DEFAULT_HASH,m=e.crypto,p=m.Util.hashHex,h=W,f=j,v=f.getVbyList;u.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(g,y,b,S){S==null&&(S=this.DEFAULT_HASH),this.params={alg:S,issname:g,isskey:y,sbjsn:b}},this.setByCert=function(g,y,b){b==null&&(b=this.DEFAULT_HASH),this.params={alg:b,issuerCert:g,subjectCert:y}},this.getParamByCerts=function(g,y,b){b==null&&(b=this.DEFAULT_HASH);var S=new h(g),w=new h(y),_=p(S.getSubjectHex(),b),A=S.getPublicKeyHex(),C=p(v(A,0,[1],"03",!0),b),x=w.getSerialNumberHex(),E={alg:b,issname:_,isskey:C,sbjsn:x};return E},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var g=this.params,y,b,S,w;if(g.alg==null?w=this.DEFAULT_HASH:w=g.alg,g.issuerCert!=null&&g.subjectCert!=null){var _=this.getParamByCerts(g.issuerCert,g.subjectCert,w);y=_.issname,b=_.isskey,S=_.sbjsn}else if(g.issname!=null&&g.isskey!=null&&g.sbjsn!=null)y=g.issname,b=g.isskey,S=g.sbjsn;else throw new Error("required param members not defined");var A=new a({name:w}),C=new n({hex:y}),x=new n({hex:b}),E=new r({hex:S}),F=new s({array:[A,C,x,E]});return this.hTLV=F.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.CertID,d.asn1.ASN1Object);d.asn1.ocsp.CertStatus=function(t){d.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.status=="good")return"8000";if(e.status=="unknown")return"8200";if(e.status=="revoked"){var i=[{gentime:{str:e.time}}];e.reason!=null&&i.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:i}};return d.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},t!==void 0&&this.setByParam(t)};N(d.asn1.ocsp.CertStatus,d.asn1.ASN1Object);d.asn1.ocsp.Request=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var l=[];if(this.dReqCert===null)throw"reqCert not set";l.push(this.dReqCert);var a=new n({array:l});return this.hTLV=a.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof t<"u"){var s=new r.CertID(t);this.dReqCert=s}};N(d.asn1.ocsp.Request,d.asn1.ASN1Object);d.asn1.ocsp.TBSRequest=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(s){for(var l=[],a=0;a<s.length;a++){var u=new r.Request(s[0]);l.push(u)}this.dRequestList=l},this.tohex=function(){var s=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var l=new n({array:this.dRequestList});if(s.push(l),this.dRequestExt!==null)throw"requestExtensions not supported";var a=new n({array:s});return this.hTLV=a.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0&&this.setRequestListByParam(t.reqList)};N(d.asn1.ocsp.TBSRequest,d.asn1.ASN1Object);d.asn1.ocsp.OCSPRequest=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var l=[];if(this.dTbsRequest!==null)l.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var a=new n({array:l});return this.hTLV=a.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0){var s=new r.TBSRequest(t);this.dTbsRequest=s}};N(d.asn1.ocsp.OCSPRequest,d.asn1.ASN1Object);d.asn1.ocsp.OCSPUtil={};d.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,i){var n=d,r=n.asn1,s=r.ocsp;i===void 0&&(i=s.DEFAULT_HASH);var l={alg:i,issuerCert:t,subjectCert:e},a=new s.OCSPRequest({reqList:[l]});return a.tohex()};d.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=j,i=e.getVbyList,n=e.getVbyListEx,r=e.getIdxbyList,s=e.getIdxbyListEx,l=e.getV,a={};try{var u=n(t,0,[0],"0a");a.responseStatus=parseInt(u,16)}catch{}if(a.responseStatus!==0)return a;try{var c=r(t,0,[1,0,1,0,0,2,0,1]);t.substr(c,2)==="80"?a.certStatus="good":t.substr(c,2)==="a1"?(a.certStatus="revoked",a.revocationTime=ie(i(t,c,[0]))):t.substr(c,2)==="82"&&(a.certStatus="unknown")}catch{}try{var m=r(t,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=ie(l(t,m))}catch{}try{var p=r(t,0,[1,0,1,0,0,2,0,3]);t.substr(p,2)==="a0"&&(a.nextUpdate=ie(i(t,p,[0])))}catch{}return a};d.asn1.ocsp.OCSPParser=function(){var t=Error,e=W,i=new e,n=j,r=n.getV,s=n.getTLV,l=n.getIdxbyList,a=n.getVbyList,u=n.getTLVbyList,c=n.getVbyListEx,m=n.getTLVbyListEx,p=n.getChildIdx;this.getOCSPRequest=function(h){var f=p(h,0);if(f.length!=1&&f.length!=2)throw new t("wrong number elements: "+f.length);var v=this.getTBSRequest(s(h,f[0]));return v},this.getTBSRequest=function(h){var f={},v=m(h,0,[0],"30");f.array=this.getRequestList(v);var g=m(h,0,["[2]",0],"30");return g!=null&&(f.ext=i.getExtParamArray(g)),f},this.getRequestList=function(h){for(var f=[],v=p(h,0),g=0;g<v.length;g++){var h=s(h,v[g]);f.push(this.getRequest(h))}return f},this.getRequest=function(h){var f=p(h,0);if(f.length!=1&&f.length!=2)throw new t("wrong number elements: "+f.length);var v=this.getCertID(s(h,f[0]));if(f.length==2){var g=l(h,0,[1,0]);v.ext=i.getExtParamArray(s(h,g))}return v},this.getCertID=function(h){var f=p(h,0);if(f.length!=4)throw new t("wrong number elements: "+f.length);var v=new e,g={};return g.alg=v.getAlgorithmIdentifierName(s(h,f[0])),g.issname=r(h,f[1]),g.isskey=r(h,f[2]),g.sbjsn=r(h,f[3]),g},this.getOCSPResponse=function(h){var f=p(h,0),v,g=r(h,f[0]),y=parseInt(g);if(f.length==1)return{resstatus:y};var b=u(h,0,[1,0]);return v=this.getResponseBytes(b),v.resstatus=y,v},this.getResponseBytes=function(h){var f=p(h,0),v,g=u(h,0,[1,0]);v=this.getBasicOCSPResponse(g);var y=r(h,f[0]);return v.restype=d.asn1.x509.OID.oid2name(zt(y)),v},this.getBasicOCSPResponse=function(h){var f=p(h,0),v;v=this.getResponseData(s(h,f[0]));var g=new W;v.alg=g.getAlgorithmIdentifierName(s(h,f[1]));var y=r(h,f[2]);v.sighex=y.substr(2);var b=c(h,0,["[0]"]);if(b!=null){for(var S=p(b,0),w=[],_=0;_<S.length;_++){var A=s(b,S[_]);w.push(A)}v.certs=w}return v},this.getResponseData=function(h){var f=p(h,0),v=f.length,g={},y=0;h.substr(f[0],2)=="a0"&&y++,g.respid=this.getResponderID(s(h,f[y++]));var b=r(h,f[y++]);if(g.prodat=ie(b),g.array=this.getSingleResponseList(s(h,f[y++])),h.substr(f[v-1],2)=="a1"){var S=u(h,f[v-1],[0]),w=new W;g.ext=w.getExtParamArray(S)}return g},this.getResponderID=function(h){var f={};if(h.substr(0,2)=="a2"){var v=a(h,0,[0]);f.key=v}if(h.substr(0,2)=="a1"){var g=u(h,0,[0]),y=new W;f.name=y.getX500Name(g)}return f},this.getSingleResponseList=function(h){for(var f=p(h,0),v=[],g=0;g<f.length;g++){var y=this.getSingleResponse(s(h,f[g]));v.push(y)}return v},this.getSingleResponse=function(h){var f=p(h,0),v={},g=this.getCertID(s(h,f[0]));v.certid=g;var y=this.getCertStatus(s(h,f[1]));if(v.status=y,h.substr(f[2],2)=="18"){var b=r(h,f[2]);v.thisupdate=ie(b)}for(var S=3;S<f.length;S++){if(h.substr(f[S],2)=="a0"){var w=a(h,f[S],[0],"18");v.nextupdate=ie(w)}if(h.substr(f[S],2)=="a1"){var _=new W,A=u(h,0,[S,0]);v.ext=_.getExtParamArray(A)}}return v},this.getCertStatus=function(h){var f={};if(h=="8000")return{status:"good"};if(h=="8200")return{status:"unknown"};if(h.substr(0,2)=="a1"){f.status="revoked";var v=a(h,0,[0]),g=ie(v);f.time=g}return f}};var d;(typeof d>"u"||!d)&&(d={});(typeof d.lang>"u"||!d.lang)&&(d.lang={});d.lang.String=function(){};function Sr(t){for(var e=new Array,i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}function xr(t){for(var e="",i=0;i<t.length;i++)e=e+String.fromCharCode(t[i]);return e}function Nt(t){for(var e="",i=0;i<t.length;i++){var n=t[i].toString(16);n.length==1&&(n="0"+n),e=e+n}return e}function Ie(t){return Nt(Sr(t))}function Tu(t){return Ve(Ie(t))}function Ru(t){return ot(Ve(Ie(t)))}function Ou(t){return xr(pr(mt(t)))}function ot(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function mt(t){return t.length%4==2?t=t+"==":t.length%4==3&&(t=t+"="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t}function me(t){return t.length%2==1&&(t="0"+t),ot(Ve(t))}function ce(t){return at(mt(t))}var gt,Me;typeof Buffer=="function"?(gt=function(t){return ot(Buffer.from(t,"utf8").toString("base64"))},Me=function(t){return Buffer.from(mt(t),"base64").toString("utf8")}):(gt=function(t){return me(jt(Ht(t)))},Me=function(t){return decodeURIComponent(Lt(ce(t)))});function Du(t){return Ve(jt(Ht(t)))}function ku(t){return decodeURIComponent(Lt(at(t)))}function Mt(t){return jt(Ht(t)).toLowerCase()}function ie(t){try{return decodeURIComponent(Lt(t))}catch{return null}}function Bu(t){return ie(Nu(t))}function Nu(t){for(var e=t.match(/.{1,2}/g),i=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);161<=r&&r<=191?(i.push("c2"),i.push(e[n])):192<=r&&r<=255?(i.push("c3"),i.push((r-64).toString(16))):i.push(e[n])}return i.join("")}function _e(t){for(var e="",i=0;i<t.length-1;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e}function Oe(t){for(var e="",i=0;i<t.length;i++)e+=("0"+t.charCodeAt(i).toString(16)).slice(-2);return e}function _r(t){return Ve(t)}function Er(t){var e=_r(t),i=e.replace(/(.{64})/g,`$1\r
`);return i=i.replace(/\r\n$/,""),i}function Ar(t){var e=t.replace(/[^0-9A-Za-z\/+=]*/g,""),i=at(e);return i}function be(t,e){var i=Er(t);return"-----BEGIN "+e+`-----\r
`+i+`\r
-----END `+e+`-----\r
`}function ge(t,e){if(t.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+e;return e!==void 0?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),""),t=t.replace(new RegExp("-----END "+e+"-----[^]*$"),"")):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,""),t=t.replace(/-----END [^-]+-----[^]*$/,"")),Ar(t)}function Mu(t){if(t.length%2!=0)throw"input is not even length";if(t.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),i=new DataView(e),n=0;n<t.length/2;n++)i.setUint8(n,parseInt(t.substr(n*2,2),16));return e}function ju(t){for(var e="",i=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+i.getUint8(n).toString(16)).slice(-2);return e}function Ei(t){var e,i,n,r,s,l,a,u,c,m,p,h;if(h=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),h)return c=h[1],e=parseInt(c),c.length===2&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),i=parseInt(h[2])-1,n=parseInt(h[3]),r=parseInt(h[4]),s=parseInt(h[5]),l=parseInt(h[6]),a=0,m=h[7],m!==""&&(p=(m.substr(1)+"00").substr(0,3),a=parseInt(p)),Date.UTC(e,i,n,r,s,l,a);throw new Error("unsupported zulu format: "+t)}function Fr(t){return Math.round(Ei(t)/1e3)}function Lu(t){return new Date(Ei(t))}function Hu(t,e,i){var n,r=t.getUTCFullYear();if(e){if(r<1950||2049<r)throw"not proper year for UTCTime: "+r;n=(""+r).slice(-2)}else n=("000"+r).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),i){var s=t.getUTCMilliseconds();s!==0&&(s=("00"+s).slice(-3),s=s.replace(/0+$/g,""),n+="."+s)}return n+="Z",n}function jt(t){return t.replace(/%/g,"")}function Lt(t){return t.replace(/(..)/g,"%$1")}function vi(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;t=t.toLowerCase();var i=t.split(":").length-1;if(i<2)throw e;var n=":".repeat(7-i+2);t=t.replace("::",n);var r=t.split(":");if(r.length!=8)throw e;for(var s=0;s<8;s++)r[s]=("0000"+r[s]).slice(-4);return r.join("")}function bi(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);t=t.toLowerCase();var e=t.match(/.{1,4}/g);e=e.map(function(r){return r.replace(/^0+/,"")}),e=e.map(function(r){return r==""?"0":r}),t=":"+e.join(":")+":";var i=t.match(/:(0:){2,}/g);if(i==null)return t.slice(1,-1);var n=i.sort().slice(-1)[0];return t=t.replace(n.substr(0,n.length-1),":"),t.substr(0,2)!="::"&&(t=t.substr(1)),t.substr(-2,2)!="::"&&(t=t.substr(0,t.length-1)),t}function Rt(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(t.length==8){var i;try{return i=parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16),i}catch{throw e}}else if(t.length==16)try{return Rt(t.substr(0,8))+"/"+fr(t.substr(8))}catch{throw e}else{if(t.length==32)return bi(t);if(t.length==64){try{return bi(t.substr(0,32))+"/"+fr(t.substr(32))}catch{throw e}return}else return t}}function fr(t){var e=new Error("malformed mask"),i;try{i=new O(t,16).toString(2)}catch{throw e}if(!i.match(/^1*0*$/))throw e;return i.replace(/0+$/,"").length}function Ai(t){var e=new Error("malformed IP address");if(t=t.toLowerCase(t),!t.match(/^[0-9a-f.:/]+$/))throw e;if(t.match(/^[0-9.]+$/)){var i=t.split(".");if(i.length!==4)throw e;var n="";try{for(var r=0;r<4;r++){var s=parseInt(i[r]);n+=("0"+s.toString(16)).slice(-2)}return n}catch{throw e}}else if(t.match(/^[0-9.]+\/[0-9]+$/)){var l=t.split("/");return Ai(l[0])+gr(parseInt(l[1]),32)}else{if(t.match(/^[0-9a-f:]+$/)&&t.indexOf(":")!==-1)return vi(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&t.indexOf(":")!==-1){var l=t.split("/");return vi(l[0])+gr(parseInt(l[1]),128)}else throw e}}function gr(t,e){if(e==32&&t==0)return"00000000";if(e==128&&t==0)return"00000000000000000000000000000000";var i=Array(t+1).join("1")+Array(e-t+1).join("0");return new O(i,2).toString(16)}function Fi(t){function e(r){var s=parseInt(r.substr(0,2),16),l=parseInt(r.substr(2),16);if(s==0&l<128)return String.fromCharCode(l);if(s<8){var a=192|(s&7)<<3|(l&192)>>6,u=128|l&63;return ie(a.toString(16)+u.toString(16))}var a=224|(s&240)>>4,u=128|(s&15)<<2|(l&192)>>6,c=128|l&63;return ie(a.toString(16)+u.toString(16)+c.toString(16))}var i=t.match(/.{4}/g),n=i.map(e);return n.join("")}function Ht(t){for(var e=encodeURIComponent(t),i="",n=0;n<e.length;n++)e[n]=="%"?(i=i+e.substr(n,3),n=n+2):i=i+"%"+Ie(e[n]);return i}function zu(t){return t=t.replace(/\r\n/mg,`
`),t}function Vu(t){return t=t.replace(/\r\n/mg,`
`),t=t.replace(/\n/mg,`\r
`),t}d.lang.String.isInteger=function(t){return t.match(/^[0-9]+$/)?!0:!!t.match(/^-[0-9]+$/)};d.lang.String.isHex=function(t){return Ir(t)};function Ir(t){return!!(t.length%2==0&&(t.match(/^[0-9a-f]+$/)||t.match(/^[0-9A-F]+$/)))}d.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!!(t.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&t.length%4==0)};d.lang.String.isBase64URL=function(t){return t.match(/[+/=]/)?!1:(t=mt(t),d.lang.String.isBase64(t))};function Ii(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}d.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};d.lang.String.isPrintable=function(t){return t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};d.lang.String.isIA5=function(t){return t.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};d.lang.String.isMail=function(t){return t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function yi(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function qu(t){t=t.replace(/^\s*\[\s*/,""),t=t.replace(/\s*\]\s*$/,""),t=t.replace(/\s*/g,"");try{var e=t.split(/,/).map(function(i,n,r){var s=parseInt(i);if(s<0||255<s)throw"integer not in range 0-255";var l=("00"+s.toString(16)).slice(-2);return l}).join("");return e}catch(i){throw"malformed integer array string: "+i}}var Uu=function(t,e){var i=t.length;t.length>e.length&&(i=e.length);for(var n=0;n<i;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?i:-1};function Cr(t){var e=function(a){var u=a.toString(16);return u.length==1&&(u="0"+u),u},i=function(a){var u="",c=parseInt(a,10),m=c.toString(2),p=7-m.length%7;p==7&&(p=0);for(var h="",f=0;f<p;f++)h+="0";m=h+m;for(var f=0;f<m.length-1;f+=7){var v=m.substr(f,7);f!=m.length-7&&(v="1"+v),u+=e(parseInt(v,2))}return u};try{if(!t.match(/^[0-9.]+$/))return null;var n="",r=t.split("."),s=parseInt(r[0],10)*40+parseInt(r[1],10);n+=e(s),r.splice(0,2);for(var l=0;l<r.length;l++)n+=i(r[l]);return n}catch{return null}}function zt(t){if(!Ir(t))return null;try{var e=[],i=t.substr(0,2),n=parseInt(i,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var r=t.substr(2),s=[],l=0;l<r.length/2;l++)s.push(parseInt(r.substr(l*2,2),16));for(var a=[],u="",l=0;l<s.length;l++)s[l]&128?u=u+Ot((s[l]&127).toString(2),7):(u=u+Ot((s[l]&127).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=e.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch{return null}}var Ot=function(t,e,i){return i==null&&(i="0"),t.length>=e?t:new Array(e-t.length+1).join(i)+t};function Pr(t){if(t.length%2!=0||(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null))return-1;try{var e=t.substr(0,2);if(e=="00")return parseInt(t.substr(2),16);var i=parseInt(e,16);if(i>7)return-1;var n=t.substr(2),r=parseInt(n,16).toString(2);r=="0"&&(r="00000000"),r=r.slice(0,0-i);var s=parseInt(r,2);return s==NaN?-1:s}catch{return-1}}function Tr(t){if(typeof t!="number"||t<0)return null;var e=Number(t).toString(2),i=8-e.length%8;i==8&&(i=0),e=e+Ot("",i,"0");var n=parseInt(e,2).toString(16);n.length%2==1&&(n="0"+n);var r="0"+i;return r+n}function Rr(t){if(typeof t!="string"||t.length%2!=0||!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var i=t.substr(2),n="",r=0;r<i.length;r+=2){var s=i.substr(r,2),l=parseInt(s,16).toString(2);l=("0000000"+l).slice(-8),n+=l}return n.substr(0,n.length-e)}catch{return null}}function Ku(t){if(typeof t!="string"||t.match(/^[01]+$/)==null)return null;try{var e=parseInt(t,2);return Tr(e)}catch{return null}}function Dt(t,e){for(var i=0,n=0;n<t.length;n++)i|=1<<e[t[n]];for(var r=i.toString(2),s="",n=r.length-1;n>=0;n--)s+=r[n];return s}function N(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:z.algo.MD5,sha1:z.algo.SHA1,sha224:z.algo.SHA224,sha256:z.algo.SHA256,sha384:z.algo.SHA384,sha512:z.algo.SHA512,ripemd160:z.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(typeof this.DIGESTINFOHEAD[e]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,i){var n=this.getDigestInfoHex(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var s="0001",l="00"+n,a="",u=r-s.length-l.length,c=0;c<u;c+=2)a+="ff";var m=s+a+l;return m},this.hashString=function(t,e){var i=new d.crypto.MessageDigest({alg:e});return i.digestString(t)},this.hashHex=function(t,e){var i=new d.crypto.MessageDigest({alg:e});return i.digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof q||t instanceof d.crypto.DSA||t instanceof d.crypto.ECDSA}};d.crypto.Util.md5=function(t){var e=new d.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return e.digestString(t)};d.crypto.Util.ripemd160=function(t){var e=new d.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return e.digestString(t)};d.crypto.Util.SECURERANDOMGEN=new $e;d.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return d.crypto.Util.SECURERANDOMGEN.nextBytes(e),Nt(e)};d.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new O(d.crypto.Util.getRandomHexOfNbytes(t),16)};d.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,i=(t-e)/8,n=new Array(i+1);return d.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],Nt(n)};d.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new O(d.crypto.Util.getRandomHexOfNbits(t),16)};d.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var i=d.crypto.Util.getRandomBigIntegerOfNbits(e);if(t.compareTo(i)!=-1)return i}};d.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var i=t.compareTo(e);if(i==1)throw"biMin is greater than biMax";if(i==0)return t;var n=e.subtract(t),r=d.crypto.Util.getRandomBigIntegerZeroToMax(n);return r.add(t)};d.crypto.MessageDigest=function(t){var e=null,i=null,n=null;this.setAlgAndProvider=function(r,s){if(r=d.crypto.MessageDigest.getCanonicalAlgName(r),r!==null&&s===void 0&&(s=d.crypto.Util.DEFAULTPROVIDER[r]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&s=="cryptojs"){try{this.md=d.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r].create()}catch(l){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+l}this.updateString=function(l){this.md.update(l)},this.updateHex=function(l){var a=z.enc.Hex.parse(l);this.md.update(a)},this.digest=function(){var l=this.md.finalize();return l.toString(z.enc.Hex)},this.digestString=function(l){return this.updateString(l),this.digest()},this.digestHex=function(l){return this.updateHex(l),this.digest()}}if(":sha256:".indexOf(r)!=-1&&s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(l){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+l}this.updateString=function(l){this.md.update(l)},this.updateHex=function(l){var a=sjcl.codec.hex.toBits(l);this.md.update(a)},this.digest=function(){var l=this.md.finalize();return sjcl.codec.hex.fromBits(l)},this.digestString=function(l){return this.updateString(l),this.digest()},this.digestHex=function(l){return this.updateHex(l),this.digest()}}},this.updateString=function(r){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(r){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(r){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(r){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},t!==void 0&&t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};d.crypto.MessageDigest.getCanonicalAlgName=function(t){return typeof t=="string"&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t};d.crypto.MessageDigest.getHashLength=function(t){var e=d.crypto.MessageDigest,i=e.getCanonicalAlgName(t);if(e.HASHLENGTH[i]===void 0)throw"not supported algorithm: "+t;return e.HASHLENGTH[i]};d.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};d.crypto.Mac=function(t){var e=null,i=null,n=null,r=null,s=null;this.setAlgAndProvider=function(l,a){if(l=l.toLowerCase(),l==null&&(l="hmacsha1"),l=l.toLowerCase(),l.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+l;a===void 0&&(a=d.crypto.Util.DEFAULTPROVIDER[l]),this.algProv=l+"/"+a;var u=l.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(u)!=-1&&a=="cryptojs"){try{var c=d.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[u];this.mac=z.algo.HMAC.create(c,this.pass)}catch(m){throw"setAlgAndProvider hash alg set fail hashAlg="+u+"/"+m}this.updateString=function(m){this.mac.update(m)},this.updateHex=function(m){var p=z.enc.Hex.parse(m);this.mac.update(p)},this.doFinal=function(){var m=this.mac.finalize();return m.toString(z.enc.Hex)},this.doFinalString=function(m){return this.updateString(m),this.doFinal()},this.doFinalHex=function(m){return this.updateHex(m),this.doFinal()}}},this.updateString=function(l){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(l){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(l){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(l){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(l){if(typeof l=="string"){var a=l;(l.length%2==1||!l.match(/^[0-9A-Fa-f]+$/))&&(a=Oe(l)),this.pass=z.enc.Hex.parse(a);return}if(typeof l!="object")throw"KJUR.crypto.Mac unsupported password type: "+l;var a=null;if(l.hex!==void 0){if(l.hex.length%2!=0||!l.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+l.hex;a=l.hex}if(l.utf8!==void 0&&(a=Mt(l.utf8)),l.rstr!==void 0&&(a=Oe(l.rstr)),l.b64!==void 0&&(a=at(l.b64)),l.b64u!==void 0&&(a=ce(l.b64u)),a==null)throw"KJUR.crypto.Mac unsupported password type: "+l;this.pass=z.enc.Hex.parse(a)},t!==void 0&&(t.pass!==void 0&&this.setPassword(t.pass),t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};d.crypto.Signature=function(t){var e=null,i=null,n=null,r=null,s=null,l=null,a=null,u=null,c=null,m=null,p=-1,h=null,f=null,v=null,g=null,y=null;if(this._setAlgNames=function(){var b=this.algName.match(/^(.+)with(.+)$/);b&&(this.mdAlgName=b[1].toLowerCase(),this.pubkeyAlgName=b[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(b,S){for(var w="",_=S/4-b.length,A=0;A<_;A++)w=w+"0";return w+b},this.setAlgAndProvider=function(b,S){if(this._setAlgNames(),S!="cryptojs/jsrsa")throw new Error("provider not supported: "+S);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new d.crypto.MessageDigest({alg:this.mdAlgName})}catch(w){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+w)}this.init=function(w,_){var A=null;try{_===void 0?A=Y.getKey(w):A=Y.getKey(w,_)}catch(C){throw"init failed:"+C}if(A.isPrivate===!0)this.prvKey=A,this.state="SIGN";else if(A.isPublic===!0)this.pubKey=A,this.state="VERIFY";else throw"init failed.:"+A},this.updateString=function(w){this.md.updateString(w)},this.updateHex=function(w){this.md.updateHex(w)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&d.crypto.ECDSA!==void 0&&(this.prvKey=new d.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof q&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof q&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof d.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof d.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(w){return this.updateString(w),this.sign()},this.signHex=function(w){return this.updateHex(w),this.sign()},this.verify=function(w){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&d.crypto.ECDSA!==void 0&&(this.pubKey=new d.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof q&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,w,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof q&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,w);if(d.crypto.ECDSA!==void 0&&this.pubKey instanceof d.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,w);if(d.crypto.DSA!==void 0&&this.pubKey instanceof d.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,w);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(b,S){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(b){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(b){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(b){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(b){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,t!==void 0&&(t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0?this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),t.psssaltlen!==void 0&&(this.pssSaltLen=t.psssaltlen),t.prvkeypem!==void 0)){if(t.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=Y.getKey(t.prvkeypem);this.init(e)}catch(b){throw"fatal error to load pem private key: "+b}}};d.crypto.Cipher=function(t){};d.crypto.Cipher.encrypt=function(t,e,i){if(e instanceof q&&e.isPublic){var n=d.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.encrypt(t);if(n==="RSAOAEP")return e.encryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.encryptOAEP(t,"sha"+r[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.encrypt: unsupported key or algorithm"};d.crypto.Cipher.decrypt=function(t,e,i){if(e instanceof q&&e.isPrivate){var n=d.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.decrypt(t);if(n==="RSAOAEP")return e.decryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.decryptOAEP(t,"sha"+r[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.decrypt: unsupported key or algorithm"};d.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof q){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e)!=-1)return e;if(e==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e};d.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.ECDSA=function(t){var e="secp256r1",i=null,n=null,r=null,s=Error,l=O,a=Q,u=d.crypto.ECDSA,c=d.crypto.ECParameterDB,m=u.getName,p=j,h=p.getVbyListEx,f=p.isASN1HEX,v=new $e,g=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function y(b,S,w,_){for(var A=Math.max(S.bitLength(),_.bitLength()),C=b.add2D(w),x=b.curve.getInfinity(),E=A-1;E>=0;--E)x=x.twice2D(),x.z=l.ONE,S.testBit(E)?_.testBit(E)?x=x.add2D(C):x=x.add2D(b):_.testBit(E)&&(x=x.add2D(w));return x}this.getBigRandom=function(b){return new l(b.bitLength(),v).mod(b.subtract(l.ONE)).add(l.ONE)},this.setNamedCurve=function(b){this.ecparams=c.getByName(b),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=b},this.setPrivateKeyHex=function(b){this.isPrivate=!0,this.prvKeyHex=b},this.setPublicKeyHex=function(b){this.isPublic=!0,this.pubKeyHex=b},this.getPublicKeyXYHex=function(){var b=this.pubKeyHex;if(b.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var S=this.ecparams.keycharlen;if(b.length!==2+S*2)throw"malformed public key hex length";var w={};return w.x=b.substr(2,S),w.y=b.substr(2+S),w},this.getShortNISTPCurveName=function(){var b=this.curveName;return b==="secp256r1"||b==="NIST P-256"||b==="P-256"||b==="prime256v1"?"P-256":b==="secp384r1"||b==="NIST P-384"||b==="P-384"?"P-384":b==="secp521r1"||b==="NIST P-521"||b==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var b=this.ecparams.n,S=this.getBigRandom(b),w=this.ecparams.keycharlen,_=("0000000000"+S.toString(16)).slice(-w);this.setPrivateKeyHex(_);var A=this.generatePublicKeyHex();return{ecprvhex:_,ecpubhex:A}},this.generatePublicKeyHex=function(){var b=new l(this.prvKeyHex,16),S=this.ecparams.G.multiply(b),w=S.getX().toBigInteger(),_=S.getY().toBigInteger(),A=this.ecparams.keycharlen,C=("0000000000"+w.toString(16)).slice(-A),x=("0000000000"+_.toString(16)).slice(-A),E="04"+C+x;return this.setPublicKeyHex(E),E},this.signWithMessageHash=function(b){return this.signHex(b,this.prvKeyHex)},this.signHex=function(b,S){var w=new l(S,16),_=this.ecparams.n,A=new l(b.substring(0,this.ecparams.keycharlen),16);do var C=this.getBigRandom(_),x=this.ecparams.G,E=x.multiply(C),F=E.getX().toBigInteger().mod(_);while(F.compareTo(l.ZERO)<=0);var I=C.modInverse(_).multiply(A.add(w.multiply(F))).mod(_);return u.biRSSigToASN1Sig(F,I)},this.sign=function(b,S){var w=S,_=this.ecparams.n,A=l.fromByteArrayUnsigned(b);do var C=this.getBigRandom(_),x=this.ecparams.G,E=x.multiply(C),F=E.getX().toBigInteger().mod(_);while(F.compareTo(O.ZERO)<=0);var I=C.modInverse(_).multiply(A.add(w.multiply(F))).mod(_);return this.serializeSig(F,I)},this.verifyWithMessageHash=function(b,S){return this.verifyHex(b,S,this.pubKeyHex)},this.verifyHex=function(b,S,w){try{var _,A,C=u.parseSigHex(S);_=C.r,A=C.s;var x=a.decodeFromHex(this.ecparams.curve,w),E=new l(b.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(E,_,A,x)}catch{return!1}},this.verify=function(b,S,w){var _,A;if(Bitcoin.Util.isArray(S)){var C=this.parseSig(S);_=C.r,A=C.s}else if(typeof S=="object"&&S.r&&S.s)_=S.r,A=S.s;else throw"Invalid value for signature";var x;if(w instanceof Q)x=w;else if(Bitcoin.Util.isArray(w))x=a.decodeFrom(this.ecparams.curve,w);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var E=l.fromByteArrayUnsigned(b);return this.verifyRaw(E,_,A,x)},this.verifyRaw=function(b,S,w,_){var A=this.ecparams.n,C=this.ecparams.G;if(S.compareTo(l.ONE)<0||S.compareTo(A)>=0||w.compareTo(l.ONE)<0||w.compareTo(A)>=0)return!1;var x=w.modInverse(A),E=b.multiply(x).mod(A),F=S.multiply(x).mod(A),I=C.multiply(E).add(_.multiply(F)),P=I.getX().toBigInteger().mod(A);return P.equals(S)},this.serializeSig=function(b,S){var w=b.toByteArraySigned(),_=S.toByteArraySigned(),A=[];return A.push(2),A.push(w.length),A=A.concat(w),A.push(2),A.push(_.length),A=A.concat(_),A.unshift(A.length),A.unshift(48),A},this.parseSig=function(b){var S;if(b[0]!=48)throw new Error("Signature not a valid DERSequence");if(S=2,b[S]!=2)throw new Error("First element in signature must be a DERInteger");var w=b.slice(S+2,S+2+b[S+1]);if(S+=2+b[S+1],b[S]!=2)throw new Error("Second element in signature must be a DERInteger");var _=b.slice(S+2,S+2+b[S+1]);S+=2+b[S+1];var A=l.fromByteArrayUnsigned(w),C=l.fromByteArrayUnsigned(_);return{r:A,s:C}},this.parseSigCompact=function(b){if(b.length!==65)throw"Signature has the wrong length";var S=b[0]-27;if(S<0||S>7)throw"Invalid signature type";var w=this.ecparams.n,_=l.fromByteArrayUnsigned(b.slice(1,33)).mod(w),A=l.fromByteArrayUnsigned(b.slice(33,65)).mod(w);return{r:_,s:A,i:S}},this.readPKCS5PrvKeyHex=function(b){if(f(b)===!1)throw new Error("not ASN.1 hex string");var S,w,_;try{S=h(b,0,["[0]",0],"06"),w=h(b,0,[1],"04");try{_=h(b,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=m(S),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(_),this.setPrivateKeyHex(w),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(b){if(f(b)===!1)throw new s("not ASN.1 hex string");var S,w,_,A;try{S=h(b,0,[1,0],"06"),w=h(b,0,[1,1],"06"),_=h(b,0,[2,0,1],"04");try{A=h(b,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=m(w),this.curveName===void 0)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(A),this.setPrivateKeyHex(_),this.isPublic=!1},this.readPKCS8PubKeyHex=function(b){if(f(b)===!1)throw new s("not ASN.1 hex string");var S,w,_;try{S=h(b,0,[0,0],"06"),w=h(b,0,[0,1],"06"),_=h(b,0,[1],"03")}catch{throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=m(w),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(_)},this.readCertPubKeyHex=function(b,S){if(f(b)===!1)throw new s("not ASN.1 hex string");var w,_;try{w=h(b,0,[0,5,0,1],"06"),_=h(b,0,[0,5,1],"03")}catch{throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=m(w),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(_)},t!==void 0&&t.curve!==void 0&&(this.curveName=t.curve),this.curveName===void 0&&(this.curveName=e),this.setNamedCurve(this.curveName),t!==void 0&&(t.prv!==void 0&&this.setPrivateKeyHex(t.prv),t.pub!==void 0&&this.setPublicKeyHex(t.pub))};d.crypto.ECDSA.parseSigHex=function(t){var e=d.crypto.ECDSA.parseSigHexInHexRS(t),i=new O(e.r,16),n=new O(e.s,16);return{r:i,s:n}};d.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=j,i=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),t.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var r=i(t,0);if(r.length!=2)throw new Error("signature shall have two elements");var s=r[0],l=r[1];if(t.substr(s,2)!="02")throw new Error("1st item not ASN.1 integer");if(t.substr(l,2)!="02")throw new Error("2nd item not ASN.1 integer");var a=n(t,s),u=n(t,l);return{r:a,s:u}};d.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=d.crypto.ECDSA.parseSigHexInHexRS(t),i=e.r,n=e.s;if(i.length>=130&&i.length<=134){if(i.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");i.substr(0,2)=="00"&&(i=i.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var r=Math.max(i.length,n.length);return i=("000000"+i).slice(-r),n=("000000"+n).slice(-r),i+n}if(i.substr(0,2)=="00"&&i.length%32==2&&(i=i.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),i.length%32==30&&(i="00"+i),n.length%32==30&&(n="00"+n),i.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return i+n};d.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),i=t.substr(t.length/2);return d.crypto.ECDSA.hexRSSigToASN1Sig(e,i)};d.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var i=new O(t,16),n=new O(e,16);return d.crypto.ECDSA.biRSSigToASN1Sig(i,n)};d.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var i=d.asn1,n=new i.DERInteger({bigint:t}),r=new i.DERInteger({bigint:e}),s=new i.DERSequence({array:[n,r]});return s.tohex()};d.crypto.ECDSA.getName=function(t){return t==="2b8104001f"?"secp192k1":t==="2a8648ce3d030107"?"secp256r1":t==="2b8104000a"?"secp256k1":t==="2b81040021"?"secp224r1":t==="2b81040022"?"secp384r1":t==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)!==-1?"secp256r1":"|secp256k1|".indexOf(t)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(t)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(t)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(t)!==-1?"secp521r1":null};(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.ECParameterDB=new function(){var t={},e={};function i(n){return new O(n,16)}this.getByName=function(n){var r=n;if(typeof e[r]<"u"&&(r=e[n]),typeof t[r]<"u")return t[r];throw"unregistered EC curve name: "+r},this.regist=function(n,r,s,l,a,u,c,m,p,h,f,v){t[n]={};var g=i(s),y=i(l),b=i(a),S=i(u),w=i(c),_=new qe(g,y,b),A=_.decodePointHex("04"+m+p);t[n].name=n,t[n].keylen=r,t[n].keycharlen=Math.ceil(r/8)*2,t[n].curve=_,t[n].G=A,t[n].n=S,t[n].h=w,t[n].oid=f,t[n].info=v;for(var C=0;C<h.length;C++)e[h[C]]=n}};d.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");d.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");d.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");d.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);d.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);d.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);d.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);d.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);d.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);d.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.DSA=function(){var t=j,e=t.getVbyList,i=t.getVbyListEx,n=t.isASN1HEX,r=O;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(s,l,a,u,c){this.isPrivate=!0,this.p=s,this.q=l,this.g=a,this.y=u,this.x=c},this.setPrivateHex=function(s,l,a,u,c){var m,p,h,f,v;m=new O(s,16),p=new O(l,16),h=new O(a,16),typeof u=="string"&&u.length>1?f=new O(u,16):f=null,v=new O(c,16),this.setPrivate(m,p,h,f,v)},this.setPublic=function(s,l,a,u){this.isPublic=!0,this.p=s,this.q=l,this.g=a,this.y=u,this.x=null},this.setPublicHex=function(s,l,a,u){var c,m,p,h;c=new O(s,16),m=new O(l,16),p=new O(a,16),h=new O(u,16),this.setPublic(c,m,p,h)},this.signWithMessageHash=function(s){var l=this.p,a=this.q,u=this.g,c=this.y,m=this.x,p=d.crypto.Util.getRandomBigIntegerMinToMax(O.ONE.add(O.ONE),a.subtract(O.ONE)),h=s.substr(0,a.bitLength()/4),f=new O(h,16),v=u.modPow(p,l).mod(a),g=p.modInverse(a).multiply(f.add(m.multiply(v))).mod(a),y=d.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:v}},{int:{bigint:g}}]});return y},this.verifyWithMessageHash=function(s,l){var a=this.p,u=this.q,c=this.g,m=this.y,p=this.parseASN1Signature(l),h=p[0],f=p[1],v=s.substr(0,u.bitLength()/4),g=new O(v,16);if(O.ZERO.compareTo(h)>0||h.compareTo(u)>0||O.ZERO.compareTo(f)>=0||f.compareTo(u)>0)throw"invalid DSA signature";var y=f.modInverse(u),b=g.multiply(y).mod(u),S=h.multiply(y).mod(u),w=c.modPow(b,a).multiply(m.modPow(S,a)).mod(a).mod(u);return w.compareTo(h)==0},this.parseASN1Signature=function(s){try{var l=new r(i(s,0,[0],"02"),16),a=new r(i(s,0,[1],"02"),16);return[l,a]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(s){var l,a,u,c,m;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{l=i(s,0,[1],"02"),a=i(s,0,[2],"02"),u=i(s,0,[3],"02"),c=i(s,0,[4],"02"),m=i(s,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(l,a,u,c,m)},this.readPKCS8PrvKeyHex=function(s){var l,a,u,c;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{l=i(s,0,[1,1,0],"02"),a=i(s,0,[1,1,1],"02"),u=i(s,0,[1,1,2],"02"),c=i(s,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(l,a,u,null,c)},this.readPKCS8PubKeyHex=function(s){var l,a,u,c;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{l=i(s,0,[0,1,0],"02"),a=i(s,0,[0,1,1],"02"),u=i(s,0,[0,1,2],"02"),c=i(s,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(l,a,u,c)},this.readCertPubKeyHex=function(s,l){var a,u,c,m;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[0,5,0,1,0],"02"),u=i(s,0,[0,5,0,1,1],"02"),c=i(s,0,[0,5,0,1,2],"02"),m=i(s,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(a,u,c,m)}};var Y=function(){var t=function(g,y,b){return n(z.AES,g,y,b)},e=function(g,y,b){return n(z.TripleDES,g,y,b)},i=function(g,y,b){return n(z.DES,g,y,b)},n=function(g,y,b,S){var w=z.enc.Hex.parse(y),_=z.enc.Hex.parse(b),A=z.enc.Hex.parse(S),C={};C.key=_,C.iv=A,C.ciphertext=w;var x=g.decrypt(C,_,{iv:A});return z.enc.Hex.stringify(x)},r=function(g,y,b){return a(z.AES,g,y,b)},s=function(g,y,b){return a(z.TripleDES,g,y,b)},l=function(g,y,b){return a(z.DES,g,y,b)},a=function(g,y,b,S){var w=z.enc.Hex.parse(y),_=z.enc.Hex.parse(b),A=z.enc.Hex.parse(S),C=g.encrypt(w,_,{iv:A}),x=z.enc.Hex.parse(C.toString()),E=z.enc.Base64.stringify(x);return E},u={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:s,keylen:24,ivlen:8},"DES-CBC":{proc:i,eproc:l,keylen:8,ivlen:8}},c=function(g){return u[g].proc},m=function(g){var y=z.lib.WordArray.random(g),b=z.enc.Hex.stringify(y);return b},p=function(g){var y={},b=g.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));b&&(y.cipher=b[1],y.ivsalt=b[2]);var S=g.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));S&&(y.type=S[1]);var w=-1,_=0;g.indexOf(`\r
\r
`)!=-1&&(w=g.indexOf(`\r
\r
`),_=2),g.indexOf(`

`)!=-1&&(w=g.indexOf(`

`),_=1);var A=g.indexOf("-----END");if(w!=-1&&A!=-1){var C=g.substring(w+_*2,A-_);C=C.replace(/\s+/g,""),y.data=C}return y},h=function(g,y,b){for(var S=b.substring(0,16),w=z.enc.Hex.parse(S),_=z.enc.Utf8.parse(y),A=u[g].keylen+u[g].ivlen,C="",x=null;;){var E=z.algo.MD5.create();if(x!=null&&E.update(x),E.update(_),E.update(w),x=E.finalize(),C=C+z.enc.Hex.stringify(x),C.length>=A*2)break}var F={};return F.keyhex=C.substr(0,u[g].keylen*2),F.ivhex=C.substr(u[g].keylen*2,u[g].ivlen*2),F},f=function(g,y,b,S){var w=z.enc.Base64.parse(g),_=z.enc.Hex.stringify(w),A=u[y].proc,C=A(_,b,S);return C},v=function(g,y,b,S){var w=u[y].eproc,_=w(g,b,S);return _};return{version:"1.0.0",parsePKCS5PEM:function(g){return p(g)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(g,y,b){return h(g,y,b)},decryptKeyB64:function(g,y,b,S){return f(g,y,b,S)},getDecryptedKeyHex:function(g,y){var b=p(g),S=b.type,w=b.cipher,_=b.ivsalt,A=b.data,C=h(w,y,_),x=C.keyhex,E=f(A,w,x,_);return E},getEncryptedPKCS5PEMFromPrvKeyHex:function(g,y,b,S,w){var I="";if((typeof S>"u"||S==null)&&(S="AES-256-CBC"),typeof u[S]>"u")throw new Error("KEYUTIL unsupported algorithm: "+S);if(typeof w>"u"||w==null){var _=u[S].ivlen,A=m(_);w=A.toUpperCase()}var C=h(S,b,w),x=C.keyhex,E=v(y,S,x,w),F=E.replace(/(.{64})/g,`$1\r
`),I="-----BEGIN "+g+` PRIVATE KEY-----\r
`;return I+=`Proc-Type: 4,ENCRYPTED\r
`,I+="DEK-Info: "+S+","+w+`\r
`,I+=`\r
`,I+=F,I+=`\r
-----END `+g+` PRIVATE KEY-----\r
`,I},parseHexOfEncryptedPKCS8:function(g){var y=j,b=y.getChildIdx,S=y.getV,w={},_=b(g,0);if(_.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+_.length);w.ciphertext=S(g,_[1]);var A=b(g,_[0]);if(A.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+A.length);if(S(g,A[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var C=b(g,A[1]);if(A.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+C.length);var x=b(g,C[1]);if(x.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+x.length);if(S(g,x[0])!="2a864886f70d0307")throw"this only supports TripleDES";w.encryptionSchemeAlg="TripleDES",w.encryptionSchemeIV=S(g,x[1]);var E=b(g,C[0]);if(E.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+E.length);if(S(g,E[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var F=b(g,E[1]);if(F.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+F.length);w.pbkdf2Salt=S(g,F[0]);var I=S(g,F[1]);try{w.pbkdf2Iter=parseInt(I,16)}catch{throw new Error("malformed format pbkdf2Iter: "+I)}return w},getPBKDF2KeyHexFromParam:function(g,y){var b=z.enc.Hex.parse(g.pbkdf2Salt),S=g.pbkdf2Iter,w=z.PBKDF2(y,b,{keySize:192/32,iterations:S}),_=z.enc.Hex.stringify(w);return _},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(g,y){var b=ge(g,"ENCRYPTED PRIVATE KEY"),S=this.parseHexOfEncryptedPKCS8(b),w=Y.getPBKDF2KeyHexFromParam(S,y),_={};_.ciphertext=z.enc.Hex.parse(S.ciphertext);var A=z.enc.Hex.parse(w),C=z.enc.Hex.parse(S.encryptionSchemeIV),x=z.TripleDES.decrypt(_,A,{iv:C}),E=z.enc.Hex.stringify(x);return E},getKeyFromEncryptedPKCS8PEM:function(g,y){var b=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(g,y),S=this.getKeyFromPlainPrivatePKCS8Hex(b);return S},parsePlainPrivatePKCS8Hex:function(g){var y=j,b=y.getChildIdx,S=y.getV,w={};if(w.algparam=null,g.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var _=b(g,0);if(_.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(g.substr(_[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var A=b(g,_[1]);if(A.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(g.substr(A[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(w.algoid=S(g,A[0]),g.substr(A[1],2)=="06"&&(w.algparam=S(g,A[1])),g.substr(_[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return w.keyidx=y.getVidx(g,_[2]),w},getKeyFromPlainPrivatePKCS8PEM:function(g){var y=ge(g,"PRIVATE KEY"),b=this.getKeyFromPlainPrivatePKCS8Hex(y);return b},getKeyFromPlainPrivatePKCS8Hex:function(g){var y=this.parsePlainPrivatePKCS8Hex(g),b;if(y.algoid=="2a864886f70d010101")b=new q;else if(y.algoid=="2a8648ce380401")b=new d.crypto.DSA;else if(y.algoid=="2a8648ce3d0201")b=new d.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return b.readPKCS8PrvKeyHex(g),b},_getKeyFromPublicPKCS8Hex:function(g){var y,b=j.getVbyList(g,0,[0,0],"06");if(b==="2a864886f70d010101")y=new q;else if(b==="2a8648ce380401")y=new d.crypto.DSA;else if(b==="2a8648ce3d0201")y=new d.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return y.readPKCS8PubKeyHex(g),y},parsePublicRawRSAKeyHex:function(g){var y=j,b=y.getChildIdx,S=y.getV,w={};if(g.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var _=b(g,0);if(_.length!=2)throw new Error("malformed RSA key(code:002)");if(g.substr(_[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(w.n=S(g,_[0]),g.substr(_[1],2)!="02")throw new Error("malformed RSA key(code:004)");return w.e=S(g,_[1]),w},parsePublicPKCS8Hex:function(g){var y=j,b=y.getChildIdx,S=y.getV,w={};w.algparam=null;var _=b(g,0);if(_.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+_.length);var A=_[0];if(g.substr(A,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var C=b(g,A);if(C.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(g.substr(C[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(w.algoid=S(g,C[0]),g.substr(C[1],2)=="06"?w.algparam=S(g,C[1]):g.substr(C[1],2)=="30"&&(w.algparam={},w.algparam.p=y.getVbyList(g,C[1],[0],"02"),w.algparam.q=y.getVbyList(g,C[1],[1],"02"),w.algparam.g=y.getVbyList(g,C[1],[2],"02")),g.substr(_[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return w.key=S(g,_[1]).substr(2),w}}}();Y.getKey=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getV,l=n.getVbyList,a=d.crypto,u=a.ECDSA,c=a.DSA,m=q,p=ge,h=Y;if(typeof m<"u"&&t instanceof m||typeof u<"u"&&t instanceof u||typeof c<"u"&&t instanceof c)return t;if(t.curve!==void 0&&t.xy!==void 0&&t.d===void 0)return new u({pub:t.xy,curve:t.curve});if(t.curve!==void 0&&t.d!==void 0)return new u({prv:t.d,curve:t.curve});if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var f=new m;return f.setPublic(t.n,t.e),f}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.co!==void 0&&t.qi===void 0){var f=new m;return f.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),f}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p===void 0){var f=new m;return f.setPrivate(t.n,t.e,t.d),f}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x===void 0){var f=new c;return f.setPublic(t.p,t.q,t.g,t.y),f}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x!==void 0){var f=new c;return f.setPrivate(t.p,t.q,t.g,t.y,t.x),f}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var f=new m;return f.setPublic(ce(t.n),ce(t.e)),f}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.qi!==void 0){var f=new m;return f.setPrivateEx(ce(t.n),ce(t.e),ce(t.d),ce(t.p),ce(t.q),ce(t.dp),ce(t.dq),ce(t.qi)),f}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0){var f=new m;return f.setPrivate(ce(t.n),ce(t.e),ce(t.d)),f}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d===void 0){var v=new u({curve:t.crv}),g=v.ecparams.keycharlen,y=("0000000000"+ce(t.x)).slice(-g),b=("0000000000"+ce(t.y)).slice(-g),S="04"+y+b;return v.setPublicKeyHex(S),v}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d!==void 0){var v=new u({curve:t.crv}),g=v.ecparams.keycharlen,y=("0000000000"+ce(t.x)).slice(-g),b=("0000000000"+ce(t.y)).slice(-g),S="04"+y+b,w=("0000000000"+ce(t.d)).slice(-g);return v.setPublicKeyHex(S),v.setPrivateKeyHex(w),v}if(i==="pkcs5prv"){var _=t,n=j,A,f;if(A=r(_,0),A.length===9)f=new m,f.readPKCS5PrvKeyHex(_);else if(A.length===6)f=new c,f.readPKCS5PrvKeyHex(_);else if(A.length>2&&_.substr(A[1],2)==="04")f=new u,f.readPKCS5PrvKeyHex(_);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return f}if(i==="pkcs8prv"){var f=h.getKeyFromPlainPrivatePKCS8Hex(t);return f}if(i==="pkcs8pub")return h._getKeyFromPublicPKCS8Hex(t);if(i==="x509pub")return W.getPublicKeyFromCertHex(t);if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return W.getPublicKeyFromCertPEM(t);if(t.indexOf("-END PUBLIC KEY-")!=-1){var C=ge(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(C)}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var x=p(t,"RSA PRIVATE KEY");return h.getKey(x,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var E=p(t,"DSA PRIVATE KEY"),F=l(E,0,[1],"02"),I=l(E,0,[2],"02"),P=l(E,0,[3],"02"),R=l(E,0,[4],"02"),M=l(E,0,[5],"02"),f=new c;return f.setPrivate(new O(F,16),new O(I,16),new O(P,16),new O(R,16),new O(M,16)),f}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var x=p(t,"EC PRIVATE KEY");return h.getKey(x,null,"pkcs5prv")}if(t.indexOf("-END PRIVATE KEY-")!=-1)return h.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var T=h.getDecryptedKeyHex(t,e),B=new q;return B.readPKCS5PrvKeyHex(T),B}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var E=h.getDecryptedKeyHex(t,e),f=l(E,0,[1],"04"),D=l(E,0,[2,0],"06"),k=l(E,0,[3,0],"03").substr(2),K="";if(d.crypto.OID.oidhex2name[D]!==void 0)K=d.crypto.OID.oidhex2name[D];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+D);var v=new u({curve:K});return v.setPublicKeyHex(k),v.setPrivateKeyHex(f),v.isPublic=!1,v}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var E=h.getDecryptedKeyHex(t,e),F=l(E,0,[1],"02"),I=l(E,0,[2],"02"),P=l(E,0,[3],"02"),R=l(E,0,[4],"02"),M=l(E,0,[5],"02"),f=new c;return f.setPrivate(new O(F,16),new O(I,16),new O(P,16),new O(R,16),new O(M,16)),f}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return h.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")};Y.generateKeypair=function(t,e){if(t=="RSA"){var i=e,n=new q;n.generate(i,"10001"),n.isPrivate=!0,n.isPublic=!0;var r=new q,s=n.n.toString(16),l=n.e.toString(16);r.setPublic(s,l),r.isPrivate=!1,r.isPublic=!0;var a={};return a.prvKeyObj=n,a.pubKeyObj=r,a}else if(t=="EC"){var u=e,c=new d.crypto.ECDSA({curve:u}),m=c.generateKeyPairHex(),n=new d.crypto.ECDSA({curve:u});n.setPublicKeyHex(m.ecpubhex),n.setPrivateKeyHex(m.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var r=new d.crypto.ECDSA({curve:u});r.setPublicKeyHex(m.ecpubhex),r.isPrivate=!1,r.isPublic=!0;var a={};return a.prvKeyObj=n,a.pubKeyObj=r,a}else throw new Error("unknown algorithm: "+t)};Y.getPEM=function(t,e,i,n,r,s){var l=d,a=l.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,m=a.ASN1Util.newObject,p=a.x509,h=p.SubjectPublicKeyInfo,f=l.crypto,v=f.DSA,g=f.ECDSA,y=q;function b(D){var k=m({seq:[{int:0},{int:{bigint:D.n}},{int:D.e},{int:{bigint:D.d}},{int:{bigint:D.p}},{int:{bigint:D.q}},{int:{bigint:D.dmp1}},{int:{bigint:D.dmq1}},{int:{bigint:D.coeff}}]});return k}function S(D){var k=m({seq:[{int:1},{octstr:{hex:D.prvKeyHex}},{tag:["a0",!0,{oid:{name:D.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+D.pubKeyHex}}]}]});return k}function w(D){var k=m({seq:[{int:0},{int:{bigint:D.p}},{int:{bigint:D.q}},{int:{bigint:D.g}},{int:{bigint:D.y}},{int:{bigint:D.x}}]});return k}if((y!==void 0&&t instanceof y||v!==void 0&&t instanceof v||g!==void 0&&t instanceof g)&&t.isPublic==!0&&(e===void 0||e=="PKCS8PUB")){var _=new h(t),A=_.tohex();return be(A,"PUBLIC KEY")}if(e=="PKCS1PRV"&&y!==void 0&&t instanceof y&&(i===void 0||i==null)&&t.isPrivate==!0){var _=b(t),A=_.tohex();return be(A,"RSA PRIVATE KEY")}if(e=="PKCS1PRV"&&g!==void 0&&t instanceof g&&(i===void 0||i==null)&&t.isPrivate==!0){var C=new u({name:t.curveName}),x=C.tohex(),E=S(t),F=E.tohex(),I="";return I+=be(x,"EC PARAMETERS"),I+=be(F,"EC PRIVATE KEY"),I}if(e=="PKCS1PRV"&&v!==void 0&&t instanceof v&&(i===void 0||i==null)&&t.isPrivate==!0){var _=w(t),A=_.tohex();return be(A,"DSA PRIVATE KEY")}if(e=="PKCS5PRV"&&y!==void 0&&t instanceof y&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=b(t),A=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",A,i,n,s)}if(e=="PKCS5PRV"&&g!==void 0&&t instanceof g&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=S(t),A=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",A,i,n,s)}if(e=="PKCS5PRV"&&v!==void 0&&t instanceof v&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=w(t),A=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",A,i,n,s)}var P=function(D,k){var K=R(D,k),V=new m({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:K.pbkdf2Salt}},{int:K.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:K.encryptionSchemeIV}}]}]}]},{octstr:{hex:K.ciphertext}}]});return V.tohex()},R=function(D,k){var K=100,V=z.lib.WordArray.random(8),G="DES-EDE3-CBC",J=z.lib.WordArray.random(8),$=z.PBKDF2(k,V,{keySize:192/32,iterations:K}),de=z.enc.Hex.parse(D),ne=z.TripleDES.encrypt(de,$,{iv:J})+"",fe={};return fe.ciphertext=ne,fe.pbkdf2Salt=z.enc.Hex.stringify(V),fe.pbkdf2Iter=K,fe.encryptionSchemeAlg=G,fe.encryptionSchemeIV=z.enc.Hex.stringify(J),fe};if(e=="PKCS8PRV"&&y!=null&&t instanceof y&&t.isPrivate==!0){var M=b(t),T=M.tohex(),_=m({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:T}}]}),A=_.tohex();if(i===void 0||i==null)return be(A,"PRIVATE KEY");var F=P(A,i);return be(F,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&g!==void 0&&t instanceof g&&t.isPrivate==!0){var B={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};typeof t.pubKeyHex=="string"&&B.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});var M=new m(B),T=M.tohex(),_=m({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:T}}]}),A=_.tohex();if(i===void 0||i==null)return be(A,"PRIVATE KEY");var F=P(A,i);return be(F,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&v!==void 0&&t instanceof v&&t.isPrivate==!0){var M=new c({bigint:t.x}),T=M.tohex(),_=m({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:T}}]}),A=_.tohex();if(i===void 0||i==null)return be(A,"PRIVATE KEY");var F=P(A,i);return be(F,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")};Y.getKeyFromCSRPEM=function(t){var e=ge(t,"CERTIFICATE REQUEST"),i=Y.getKeyFromCSRHex(e);return i};Y.getKeyFromCSRHex=function(t){var e=Y.parseCSRHex(t),i=Y.getKey(e.p8pubkeyhex,null,"pkcs8pub");return i};Y.parseCSRHex=function(t){var e=j,i=e.getChildIdx,n=e.getTLV,r={},s=t;if(s.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var l=i(s,0);if(l.length<1)throw new Error("malformed CSR(code:002)");if(s.substr(l[0],2)!="30")throw new Error("malformed CSR(code:003)");var a=i(s,l[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex=n(s,a[2]),r};Y.getKeyID=function(t){var e=Y,i=j;typeof t=="string"&&t.indexOf("BEGIN ")!=-1&&(t=e.getKey(t));var n=ge(e.getPEM(t)),r=i.getIdxbyList(n,0,[1]),s=i.getV(n,r).substring(2);return d.crypto.Util.hashHex(s,"sha1")};Y.getJWK=function(t,e,i,n,r){var s,l={},a,u=d.crypto.Util.hashHex;if(typeof t=="string")s=Y.getKey(t),t.indexOf("CERTIFICATE")!=-1&&(a=ge(t));else if(typeof t=="object")t instanceof W?(s=t.getPublicKey(),a=t.hex):s=t;else throw new Error("unsupported keyinfo type");if(s instanceof q&&s.isPrivate)l.kty="RSA",l.n=me(s.n.toString(16)),l.e=me(s.e.toString(16)),l.d=me(s.d.toString(16)),l.p=me(s.p.toString(16)),l.q=me(s.q.toString(16)),l.dp=me(s.dmp1.toString(16)),l.dq=me(s.dmq1.toString(16)),l.qi=me(s.coeff.toString(16));else if(s instanceof q&&s.isPublic)l.kty="RSA",l.n=me(s.n.toString(16)),l.e=me(s.e.toString(16));else if(s instanceof d.crypto.ECDSA&&s.isPrivate){var c=s.getShortNISTPCurveName();if(c!=="P-256"&&c!=="P-384"&&c!=="P-521")throw new Error("unsupported curve name for JWT: "+c);var m=s.getPublicKeyXYHex();l.kty="EC",l.crv=c,l.x=me(m.x),l.y=me(m.y),l.d=me(s.prvKeyHex)}else if(s instanceof d.crypto.ECDSA&&s.isPublic){var c=s.getShortNISTPCurveName();if(c!=="P-256"&&c!=="P-384"&&c!=="P-521")throw new Error("unsupported curve name for JWT: "+c);var m=s.getPublicKeyXYHex();l.kty="EC",l.crv=c,l.x=me(m.x),l.y=me(m.y)}if(l.kty==null)throw new Error("unsupported keyinfo");return!s.isPrivate&&e!=!0&&(l.kid=d.jws.JWS.getJWKthumbprint(l)),a!=null&&i!=!0&&(l.x5c=[Ve(a)]),a!=null&&n!=!0&&(l.x5t=ot(Ve(u(a,"sha1")))),a!=null&&r!=!0&&(l["x5t#S256"]=ot(Ve(u(a,"sha256")))),l};Y.getJWKFromKey=function(t){return Y.getJWK(t,!0,!0,!0,!0)};q.getPosArrayOfChildrenFromHex=function(t){return j.getChildIdx(t,0)};q.getHexValueArrayOfChildrenFromHex=function(t){var e=j,i=e.getV,h=q.getPosArrayOfChildrenFromHex(t),n=i(t,h[0]),r=i(t,h[1]),s=i(t,h[2]),l=i(t,h[3]),a=i(t,h[4]),u=i(t,h[5]),c=i(t,h[6]),m=i(t,h[7]),p=i(t,h[8]),h=new Array;return h.push(n,r,s,l,a,u,c,m,p),h};q.prototype.readPrivateKeyFromPEMString=function(t){var e=ge(t),i=q.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])};q.prototype.readPKCS5PrvKeyHex=function(t){var e=q.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};q.prototype.readPKCS8PrvKeyHex=function(t){var e,i,n,r,s,l,a,u,c=j,m=c.getVbyListEx;if(c.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");try{e=m(t,0,[2,0,1],"02"),i=m(t,0,[2,0,2],"02"),n=m(t,0,[2,0,3],"02"),r=m(t,0,[2,0,4],"02"),s=m(t,0,[2,0,5],"02"),l=m(t,0,[2,0,6],"02"),a=m(t,0,[2,0,7],"02"),u=m(t,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,i,n,r,s,l,a,u)};q.prototype.readPKCS5PubKeyHex=function(t){var e=j,i=e.getV;if(e.isASN1HEX(t)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(n.length!==2||t.substr(n[0],2)!=="02"||t.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var r=i(t,n[0]),s=i(t,n[1]);this.setPublic(r,s)};q.prototype.readPKCS8PubKeyHex=function(t){var e=j;if(e.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");if(e.getTLVbyListEx(t,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var i=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(i)};q.prototype.readCertPubKeyHex=function(t,e){var i,n;i=new W,i.readCertHex(t),n=i.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var Sd=new RegExp("[^0-9a-f]","gi");function Or(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i=i+"0";return i+t}q.prototype.sign=function(t,e){var i=function(r){return d.crypto.Util.hashString(r,e)},n=i(t);return this.signWithMessageHash(n,e)};q.prototype.signWithMessageHash=function(t,e){var i=d.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),n=xe(i,16),r=this.doPrivate(n),s=r.toString(16);return Or(s,this.n.bitLength())};function Dr(t,e,i){for(var n="",r=0;n.length<e;)n+=_e(i(Oe(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])))),r+=1;return n}q.prototype.signPSS=function(t,e,i){var n=function(s){return d.crypto.Util.hashHex(s,e)},r=n(Oe(t));return i===void 0&&(i=-1),this.signWithMessageHashPSS(r,e,i)};q.prototype.signWithMessageHashPSS=function(t,e,i){var n=_e(t),r=n.length,s=this.n.bitLength()-1,l=Math.ceil(s/8),a,u=function(y){return d.crypto.Util.hashHex(y,e)};if(i===-1||i===void 0)i=r;else if(i===-2)i=l-r-2;else if(i<-2)throw new Error("invalid salt length");if(l<r+i+2)throw new Error("data too long");var c="";i>0&&(c=new Array(i),new $e().nextBytes(c),c=String.fromCharCode.apply(String,c));var m=_e(u(Oe("\0\0\0\0\0\0\0\0"+n+c))),p=[];for(a=0;a<l-i-r-2;a+=1)p[a]=0;var h=String.fromCharCode.apply(String,p)+""+c,f=Dr(m,h.length,u),v=[];for(a=0;a<h.length;a+=1)v[a]=h.charCodeAt(a)^f.charCodeAt(a);var g=65280>>8*l-s&255;for(v[0]&=~g,a=0;a<r;a++)v.push(m.charCodeAt(a));return v.push(188),Or(this.doPrivate(new O(v)).toString(16),this.n.bitLength())};function kr(t){for(var e in d.crypto.Util.DIGESTINFOHEAD){var i=d.crypto.Util.DIGESTINFOHEAD[e],n=i.length;if(t.substring(0,n)==i){var r=[e,t.substring(n)];return r}}return[]}q.prototype.verify=function(t,e){if(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null)return!1;var i=xe(e,16),n=this.n.bitLength();if(i.bitLength()>n)return!1;var r=this.doPublic(i),s=r.toString(16);if(s.length+3!=n/4)return!1;var l=s.replace(/^1f+00/,""),a=kr(l);if(a.length==0)return!1;var u=a[0],c=a[1],m=function(h){return d.crypto.Util.hashString(h,u)},p=m(t);return c==p};q.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=xe(e,16);if(i.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(i),r=n.toString(16).replace(/^1f+00/,""),s=kr(r);if(s.length==0)return!1;var l=s[0],a=s[1];return a==t};q.prototype.verifyPSS=function(t,e,i,n){var r=function(l){return d.crypto.Util.hashHex(l,i)},s=r(Oe(t));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(s,e,i,n)};q.prototype.verifyWithMessageHashPSS=function(t,e,i,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=new O(e,16),s=function(S){return d.crypto.Util.hashHex(S,i)},l=_e(t),a=l.length,u=this.n.bitLength()-1,c=Math.ceil(u/8),m;if(n===-1||n===void 0)n=a;else if(n===-2)n=c-a-2;else if(n<-2)throw new Error("invalid salt length");if(c<a+n+2)throw new Error("data too long");var p=this.doPublic(r).toByteArray();for(m=0;m<p.length;m+=1)p[m]&=255;for(;p.length<c;)p.unshift(0);if(p[c-1]!==188)throw new Error("encoded message does not end in 0xbc");p=String.fromCharCode.apply(String,p);var h=p.substr(0,c-a-1),f=p.substr(h.length,a),v=65280>>8*c-u&255;if(h.charCodeAt(0)&v)throw new Error("bits beyond keysize not zero");var g=Dr(f,h.length,s),y=[];for(m=0;m<h.length;m+=1)y[m]=h.charCodeAt(m)^g.charCodeAt(m);y[0]&=~v;var b=c-a-n-2;for(m=0;m<b;m+=1)if(y[m]!==0)throw new Error("leftmost octets not zero");if(y[b]!==1)throw new Error("0x01 marker not found");return f===_e(s(Oe("\0\0\0\0\0\0\0\0"+l+String.fromCharCode.apply(String,y.slice(-n)))))};q.SALT_LEN_HLEN=-1;q.SALT_LEN_MAX=-2;q.SALT_LEN_RECOVER=-2;function W(t){var e=j,i=e.getChildIdx,n=e.getV,r=e.dump,s=e.parse,l=e.getTLV,a=e.getVbyList,u=e.getVbyListEx,c=e.getTLVbyList,m=e.getTLVbyListEx,p=e.getIdxbyList,h=e.getIdxbyListEx,f=e.getVidx,v=e.getInt,g=e.oidname,y=e.hextooidstr,b=W,S=ge,w;try{w=d.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var x=c(this.hex,0,[0,0]);if(x.substr(0,2)=="a0"){var E=c(x,0,[0]),F=v(E,0);if(F<0||2<F)throw new Error("malformed version field");return this.version=F+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return u(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var x=m(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(x)},this.getAlgorithmIdentifierName=function(x){for(var E in w)if(x===w[E])return E;return g(u(x,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var x=this.getIssuer();return x.str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var x=this.getSubject();return x.str},this.getNotBefore=function(){var x=a(this.hex,0,[0,4+this.foffset,0]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getNotAfter=function(){var x=a(this.hex,0,[0,4+this.foffset,1]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var x=this.getSPKI();return x==null?null:a(x,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return p(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var x=this.getPublicKeyIdx();return p(this.hex,x,[1,0],"30")},this.getPublicKey=function(){return Y.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var x=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(x)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(x){var E=this.getSignatureAlgorithmField(),F=this.getSignatureValueHex(),I=c(this.hex,0,[0],"30"),P=new d.crypto.Signature({alg:E});return P.init(x),P.updateHex(I),P.verify(F)},this.parseExt=function(x){var E,F,I;if(x===void 0){if(I=this.hex,this.version!==3)return-1;E=p(I,0,[0,7,0],"30"),F=i(I,E)}else{I=ge(x);var P=p(I,0,[0,3,0,0],"06");if(n(I,P)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}E=p(I,0,[0,3,0,1,0],"30"),F=i(I,E),this.hex=I}this.aExtInfo=new Array;for(var R=0;R<F.length;R++){var M={};M.critical=!1;var T=i(I,F[R]),B=0;T.length===3&&(M.critical=!0,B=1),M.oid=e.hextooidstr(a(I,F[R],[0],"06"));var D=p(I,F[R],[1+B]);M.vidx=f(I,D),this.aExtInfo.push(M)}},this.getExtInfo=function(x){var E=this.aExtInfo,F=x;if(x.match(/^[0-9.]+$/)||(F=d.asn1.x509.OID.name2oid(x)),F!==""){for(var I=0;I<E.length;I++)if(E[I].oid===F)return E[I]}},this.getExtBasicConstraints=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("basicConstraints");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"basicConstraints"};if(E&&(I.critical=!0),x==="3000")return I;if(x==="30030101ff")return I.cA=!0,I;if(x.substr(0,12)==="30060101ff02"){var P=n(x,10),R=parseInt(P,16);return I.cA=!0,I.pathLen=R,I}throw new Error("hExtV parse error: "+x)},this.getExtNameConstraints=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("nameConstraints");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"nameConstraints"};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++){for(var M=[],T=i(x,P[R]),B=0;B<T.length;B++){var D=l(x,T[B]),k=this.getGeneralSubtree(D);M.push(k)}var K=x.substr(P[R],2);K=="a0"?I.permit=M:K=="a1"&&(I.exclude=M)}return I},this.getGeneralSubtree=function(x){var E=i(x,0),F=E.length;if(F<1||2<F)throw new Error("wrong num elements");for(var I=this.getGeneralName(l(x,E[0])),P=1;P<F;P++){var R=x.substr(E[P],2),M=n(x,E[P]),T=parseInt(M,16);R=="80"&&(I.min=T),R=="81"&&(I.max=T)}return I},this.getExtKeyUsage=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("keyUsage");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"keyUsage"};return E&&(I.critical=!0),I.names=this.getExtKeyUsageString(x).split(","),I},this.getExtKeyUsageBin=function(x){if(x===void 0){var E=this.getExtInfo("keyUsage");if(E===void 0)return"";x=l(this.hex,E.vidx)}if(x.length!=8&&x.length!=10)throw new Error("malformed key usage value: "+x);var F="000000000000000"+parseInt(x.substr(6),16).toString(2);return x.length==8&&(F=F.slice(-8)),x.length==10&&(F=F.slice(-16)),F=F.replace(/0+$/,""),F==""&&(F="0"),F},this.getExtKeyUsageString=function(x){for(var E=this.getExtKeyUsageBin(x),F=new Array,I=0;I<E.length;I++)E.substr(I,1)=="1"&&F.push(W.KEYUSAGE_NAME[I]);return F.join(",")},this.getExtSubjectKeyIdentifier=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("subjectKeyIdentifier");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"subjectKeyIdentifier"};E&&(I.critical=!0);var P=n(x,0);return I.kid={hex:P},I},this.getExtAuthorityKeyIdentifier=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("authorityKeyIdentifier");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"authorityKeyIdentifier"};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++){var M=x.substr(P[R],2);if(M==="80"&&(I.kid={hex:n(x,P[R])}),M==="a1"){var T=l(x,P[R]),B=this.getGeneralNames(T);I.issuer=B[0].dn}M==="82"&&(I.sn={hex:n(x,P[R])})}return I},this.getExtExtKeyUsage=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("extKeyUsage");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"extKeyUsage",array:[]};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++)I.array.push(g(n(x,P[R])));return I},this.getExtExtKeyUsageName=function(){var x=this.getExtInfo("extKeyUsage");if(x===void 0)return x;var E=new Array,F=l(this.hex,x.vidx);if(F==="")return E;for(var I=i(F,0),P=0;P<I.length;P++)E.push(g(n(F,I[P])));return E},this.getExtSubjectAltName=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("subjectAltName");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"subjectAltName",array:[]};return E&&(I.critical=!0),I.array=this.getGeneralNames(x),I},this.getExtIssuerAltName=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("issuerAltName");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"issuerAltName",array:[]};return E&&(I.critical=!0),I.array=this.getGeneralNames(x),I},this.getGeneralNames=function(x){for(var E=i(x,0),F=[],I=0;I<E.length;I++){var P=this.getGeneralName(l(x,E[I]));P!==void 0&&F.push(P)}return F},this.getGeneralName=function(x){var E=x.substr(0,2),F=n(x,0),I=_e(F);if(E=="81")return{rfc822:I};if(E=="82")return{dns:I};if(E=="86")return{uri:I};if(E=="87")return{ip:Rt(F)};if(E=="a4")return{dn:this.getX500Name(F)};if(E=="a0")return{other:this.getOtherName(x)}},this.getExtSubjectAltName2=function(){var x,E,F,I=this.getExtInfo("subjectAltName");if(I===void 0)return I;for(var P=new Array,R=l(this.hex,I.vidx),M=i(R,0),T=0;T<M.length;T++)F=R.substr(M[T],2),x=n(R,M[T]),F==="81"&&(E=ie(x),P.push(["MAIL",E])),F==="82"&&(E=ie(x),P.push(["DNS",E])),F==="84"&&(E=W.hex2dn(x,0),P.push(["DN",E])),F==="86"&&(E=ie(x),P.push(["URI",E])),F==="87"&&(E=Rt(x),P.push(["IP",E]));return P},this.getExtCRLDistributionPoints=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("cRLDistributionPoints");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"cRLDistributionPoints",array:[]};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++){var M=l(x,P[R]);I.array.push(this.getDistributionPoint(M))}return I},this.getDistributionPoint=function(x){for(var E={},F=i(x,0),I=0;I<F.length;I++){var P=x.substr(F[I],2),R=l(x,F[I]);P=="a0"&&(E.dpname=this.getDistributionPointName(R))}return E},this.getDistributionPointName=function(x){for(var E={},F=i(x,0),I=0;I<F.length;I++){var P=x.substr(F[I],2),R=l(x,F[I]);P=="a0"&&(E.full=this.getGeneralNames(R))}return E},this.getExtCRLDistributionPointsURI=function(){var x=this.getExtCRLDistributionPoints();if(x==null)return x;for(var E=x.array,F=[],I=0;I<E.length;I++)try{E[I].dpname.full[0].uri!=null&&F.push(E[I].dpname.full[0].uri)}catch{}return F},this.getExtAIAInfo=function(){var x=this.getExtInfo("authorityInfoAccess");if(x===void 0)return x;for(var E={ocsp:[],caissuer:[]},F=i(this.hex,x.vidx),I=0;I<F.length;I++){var P=a(this.hex,F[I],[0],"06"),R=a(this.hex,F[I],[1],"86");P==="2b06010505073001"&&E.ocsp.push(ie(R)),P==="2b06010505073002"&&E.caissuer.push(ie(R))}return E},this.getExtAuthorityInfoAccess=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("authorityInfoAccess");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"authorityInfoAccess",array:[]};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++){var M=u(x,P[R],[0],"06"),T=a(x,P[R],[1],"86"),B=ie(T);if(M=="2b06010505073001")I.array.push({ocsp:B});else if(M=="2b06010505073002")I.array.push({caissuer:B});else throw new Error("unknown method: "+M)}return I},this.getExtCertificatePolicies=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("certificatePolicies");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"certificatePolicies",array:[]};E&&(I.critical=!0);for(var P=i(x,0),R=0;R<P.length;R++){var M=l(x,P[R]),T=this.getPolicyInformation(M);I.array.push(T)}return I},this.getPolicyInformation=function(x){var E={},F=a(x,0,[0],"06");E.policyoid=g(F);var I=h(x,0,[1],"30");if(I!=-1){E.array=[];for(var P=i(x,I),R=0;R<P.length;R++){var M=l(x,P[R]),T=this.getPolicyQualifierInfo(M);E.array.push(T)}}return E},this.getOtherName=function(x){var E={},F=i(x,0),I=a(x,F[0],[],"06"),P=a(x,F[1],[]);return E.oid=d.asn1.ASN1Util.oidHexToInt(I),E.obj=s(P),E},this.getPolicyQualifierInfo=function(x){var E={},F=a(x,0,[0],"06");if(F==="2b06010505070201"){var I=u(x,0,[1],"16");E.cps=_e(I)}else if(F==="2b06010505070202"){var P=c(x,0,[1],"30");E.unotice=this.getUserNotice(P)}return E},this.getUserNotice=function(x){for(var E={},F=i(x,0),I=0;I<F.length;I++){var P=l(x,F[I]);P.substr(0,2)!="30"&&(E.exptext=this.getDisplayText(P))}return E},this.getDisplayText=function(x){var E={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},F={};return F.type=E[x.substr(0,2)],F.str=_e(n(x,0)),F},this.getExtCRLNumber=function(x,E){var F={extname:"cRLNumber"};if(E&&(F.critical=!0),x.substr(0,2)=="02")return F.num={hex:n(x,0)},F;throw new Error("hExtV parse error: "+x)},this.getExtCRLReason=function(x,E){var F={extname:"cRLReason"};if(E&&(F.critical=!0),x.substr(0,2)=="0a")return F.code=parseInt(n(x,0),16),F;throw new Error("hExtV parse error: "+x)},this.getExtOcspNonce=function(x,E){var F={extname:"ocspNonce"};E&&(F.critical=!0);var I=n(x,0);return F.hex=I,F},this.getExtOcspNoCheck=function(x,E){var F={extname:"ocspNoCheck"};return E&&(F.critical=!0),F},this.getExtAdobeTimeStamp=function(x,E){if(x===void 0&&E===void 0){var F=this.getExtInfo("adobeTimeStamp");if(F===void 0)return;x=l(this.hex,F.vidx),E=F.critical}var I={extname:"adobeTimeStamp"};E&&(I.critical=!0);var P=i(x,0);if(P.length>1){var R=l(x,P[1]),M=this.getGeneralName(R);M.uri!=null&&(I.uri=M.uri)}if(P.length>2){var T=l(x,P[2]);T=="0101ff"&&(I.reqauth=!0),T=="010100"&&(I.reqauth=!1)}return I};var _=function(x){var E={};try{var F=x.seq[0].oid,I=d.asn1.x509.OID.name2oid(F);E.type=d.asn1.x509.OID.oid2atype(I);var P=x.seq[1];if(P.utf8str!=null)E.ds="utf8",E.value=P.utf8str.str;else if(P.numstr!=null)E.ds="num",E.value=P.numstr.str;else if(P.telstr!=null)E.ds="tel",E.value=P.telstr.str;else if(P.prnstr!=null)E.ds="prn",E.value=P.prnstr.str;else if(P.ia5str!=null)E.ds="ia5",E.value=P.ia5str.str;else if(P.visstr!=null)E.ds="vis",E.value=P.visstr.str;else if(P.bmpstr!=null)E.ds="bmp",E.value=P.bmpstr.str;else throw"error";return E}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},A=function(x){try{return x.set.map(function(E){return _(E)})}catch(E){throw new Error("improper ASN.1 parsed RDN: "+E)}},C=function(x){try{return x.seq.map(function(E){return A(E)})}catch(E){throw new Error("improper ASN.1 parsed X500Name: "+E)}};this.getX500NameRule=function(x){for(var E=!0,F=!0,I=!1,P="",R="",M=null,T=[],B=0;B<x.length;B++)for(var D=x[B],k=0;k<D.length;k++)T.push(D[k]);for(var B=0;B<T.length;B++){var K=T[B],V=K.ds,G=K.value,J=K.type;if(P+=":"+V,V!="prn"&&V!="utf8"&&V!="ia5")return"mixed";if(V=="ia5"){if(J!="CN")return"mixed";if(d.lang.String.isMail(G))continue;return"mixed"}if(J=="C"){if(V=="prn")continue;return"mixed"}if(R+=":"+V,M==null)M=V;else if(M!==V)return"mixed"}return M??"prn"},this.getAttrTypeAndValue=function(x){var E=s(x);return _(E)},this.getRDN=function(x){var E=s(x);return A(E)},this.getX500NameArray=function(x){var E=s(x);return C(E)},this.getX500Name=function(x){var E=this.getX500NameArray(x),F=this.dnarraytostr(E);return{array:E,str:F}},this.readCertPEM=function(x){this.readCertHex(S(x))},this.readCertHex=function(x){this.hex=x,this.getVersion();try{p(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(x){var E={};return E.version=this.getVersion(),E.serial={hex:this.getSerialNumberHex()},E.sigalg=this.getSignatureAlgorithmField(),E.issuer=this.getIssuer(),E.notbefore=this.getNotBefore(),E.notafter=this.getNotAfter(),E.subject=this.getSubject(),E.sbjpubkey=be(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(E.ext=this.getExtParamArray()),E.sighex=this.getSignatureValueHex(),typeof x=="object"&&(x.tbshex==!0&&(E.tbshex=c(this.hex,0,[0])),x.nodnarray==!0&&(delete E.issuer.array,delete E.subject.array)),E},this.getExtParamArray=function(x){if(x==null){var E=h(this.hex,0,[0,"[3]"]);E!=-1&&(x=m(this.hex,0,[0,"[3]",0],"30"))}for(var F=[],I=i(x,0),P=0;P<I.length;P++){var R=l(x,I[P]),M=this.getExtParam(R);M!=null&&F.push(M)}return F},this.getExtParam=function(x){var E={},F=i(x,0),I=F.length;if(I!=2&&I!=3)throw new Error("wrong number elements in Extension: "+I+" "+x);var P=y(a(x,0,[0],"06")),R=!1;I==3&&c(x,0,[1])=="0101ff"&&(R=!0);var M=c(x,0,[I-1,0]),T=void 0;if(P=="2.5.29.14"?T=this.getExtSubjectKeyIdentifier(M,R):P=="2.5.29.15"?T=this.getExtKeyUsage(M,R):P=="2.5.29.17"?T=this.getExtSubjectAltName(M,R):P=="2.5.29.18"?T=this.getExtIssuerAltName(M,R):P=="2.5.29.19"?T=this.getExtBasicConstraints(M,R):P=="2.5.29.30"?T=this.getExtNameConstraints(M,R):P=="2.5.29.31"?T=this.getExtCRLDistributionPoints(M,R):P=="2.5.29.32"?T=this.getExtCertificatePolicies(M,R):P=="2.5.29.35"?T=this.getExtAuthorityKeyIdentifier(M,R):P=="2.5.29.37"?T=this.getExtExtKeyUsage(M,R):P=="1.3.6.1.5.5.7.1.1"?T=this.getExtAuthorityInfoAccess(M,R):P=="2.5.29.20"?T=this.getExtCRLNumber(M,R):P=="2.5.29.21"?T=this.getExtCRLReason(M,R):P=="1.3.6.1.5.5.7.48.1.2"?T=this.getExtOcspNonce(M,R):P=="1.3.6.1.5.5.7.48.1.5"?T=this.getExtOcspNoCheck(M,R):P=="1.2.840.113583.1.1.9.1"&&(T=this.getExtAdobeTimeStamp(M,R)),T!=null)return T;var B={extname:P,extn:M};return R&&(B.critical=!0),B},this.findExt=function(x,E){for(var F=0;F<x.length;F++)if(x[F].extname==E)return x[F];return null},this.updateExtCDPFullURI=function(x,E){var F=this.findExt(x,"cRLDistributionPoints");if(F!=null&&F.array!=null){for(var I=F.array,P=0;P<I.length;P++)if(I[P].dpname!=null&&I[P].dpname.full!=null)for(var R=I[P].dpname.full,M=0;M<R.length;M++){var T=R[P];T.uri!=null&&(T.uri=E)}}},this.updateExtAIAOCSP=function(x,E){var F=this.findExt(x,"authorityInfoAccess");if(F!=null&&F.array!=null)for(var I=F.array,P=0;P<I.length;P++)I[P].ocsp!=null&&(I[P].ocsp=E)},this.updateExtAIACAIssuer=function(x,E){var F=this.findExt(x,"authorityInfoAccess");if(F!=null&&F.array!=null)for(var I=F.array,P=0;P<I.length;P++)I[P].caissuer!=null&&(I[P].caissuer=E)},this.dnarraytostr=function(x){function E(I){return I.map(function(P){return F(P).replace(/\+/,"\\+")}).join("+")}function F(I){return I.type+"="+I.value}return"/"+x.map(function(I){return E(I).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var x=function(fe){var ae=JSON.stringify(fe.array).replace(/[\[\]\{\}\"]/g,"");return ae},E=function(fe){for(var ae="",he=fe.array,le=0;le<he.length;le++){var pe=he[le];if(ae+="    policy oid: "+pe.policyoid+`
`,pe.array!==void 0)for(var ke=0;ke<pe.array.length;ke++){var Ye=pe.array[ke];Ye.cps!==void 0&&(ae+="    cps: "+Ye.cps+`
`)}}return ae},F=function(fe){for(var ae="",he=fe.array,le=0;le<he.length;le++){var pe=he[le];try{pe.dpname.full[0].uri!==void 0&&(ae+="    "+pe.dpname.full[0].uri+`
`)}catch{}try{pe.dname.full[0].dn.hex!==void 0&&(ae+="    "+W.hex2dn(pe.dpname.full[0].dn.hex)+`
`)}catch{}}return ae},I=function(fe){for(var ae="",he=fe.array,le=0;le<he.length;le++){var pe=he[le];pe.caissuer!==void 0&&(ae+="    caissuer: "+pe.caissuer+`
`),pe.ocsp!==void 0&&(ae+="    ocsp: "+pe.ocsp+`
`)}return ae},P=W,R,M,T;if(R=`Basic Fields
`,R+="  serial number: "+this.getSerialNumberHex()+`
`,R+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,R+="  issuer: "+this.getIssuerString()+`
`,R+="  notBefore: "+this.getNotBefore()+`
`,R+="  notAfter: "+this.getNotAfter()+`
`,R+="  subject: "+this.getSubjectString()+`
`,R+=`  subject public key info: 
`,M=this.getPublicKey(),R+="    key algorithm: "+M.type+`
`,M.type==="RSA"&&(R+="    n="+yi(M.n.toString(16)).substr(0,16)+`...
`,R+="    e="+yi(M.e.toString(16))+`
`),T=this.aExtInfo,T!=null){R+=`X509v3 Extensions:
`;for(var B=0;B<T.length;B++){var D=T[B],k=d.asn1.x509.OID.oid2name(D.oid);k===""&&(k=D.oid);var K="";if(D.critical===!0&&(K="CRITICAL"),R+="  "+k+" "+K+`:
`,k==="basicConstraints"){var V=this.getExtBasicConstraints();V.cA===void 0?R+=`    {}
`:(R+="    cA=true",V.pathLen!==void 0&&(R+=", pathLen="+V.pathLen),R+=`
`)}else if(k==="keyUsage")R+="    "+this.getExtKeyUsageString()+`
`;else if(k==="subjectKeyIdentifier")R+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(k==="authorityKeyIdentifier"){var G=this.getExtAuthorityKeyIdentifier();G.kid!==void 0&&(R+="    kid="+G.kid.hex+`
`)}else if(k==="extKeyUsage"){var J=this.getExtExtKeyUsage().array;R+="    "+J.join(", ")+`
`}else if(k==="subjectAltName"){var $=x(this.getExtSubjectAltName());R+="    "+$+`
`}else if(k==="cRLDistributionPoints"){var de=this.getExtCRLDistributionPoints();R+=F(de)}else if(k==="authorityInfoAccess"){var ne=this.getExtAuthorityInfoAccess();R+=I(ne)}else k==="certificatePolicies"&&(R+=E(this.getExtCertificatePolicies()))}}return R+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,R+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,R},typeof t=="string"&&(t.indexOf("-----BEGIN")!=-1?this.readCertPEM(t):d.lang.String.isHex(t)&&this.readCertHex(t))}W.hex2dn=function(t,e){e===void 0&&(e=0);var i=new W,n=j.getTLV(t,e),r=i.getX500Name(t);return r.str};W.hex2rdn=function(t,e){if(e===void 0&&(e=0),t.substr(e,2)!=="31")throw new Error("malformed RDN");for(var i=new Array,n=j.getChildIdx(t,e),r=0;r<n.length;r++)i.push(W.hex2attrTypeValue(t,n[r]));return i=i.map(function(s){return s.replace("+","\\+")}),i.join("+")};W.hex2attrTypeValue=function(t,e){var i=j,n=i.getV;if(e===void 0&&(e=0),t.substr(e,2)!=="30")throw new Error("malformed attribute type and value");var r=i.getChildIdx(t,e);r.length!==2||t.substr(r[0],2);var s=n(t,r[0]),l=d.asn1.ASN1Util.oidHexToInt(s),a=d.asn1.x509.OID.oid2atype(l),u=n(t,r[1]),c=_e(u);return a+"="+c};W.getPublicKeyFromCertHex=function(t){var e=new W;return e.readCertHex(t),e.getPublicKey()};W.getPublicKeyFromCertPEM=function(t){var e=new W;return e.readCertPEM(t),e.getPublicKey()};W.getPublicKeyInfoPropOfCertPEM=function(t){var e=j,i=e.getVbyList,n={},r,s,l;return n.algparam=null,r=new W,r.readCertPEM(t),s=r.getPublicKeyHex(),n.keyhex=i(s,0,[1],"03").substr(2),n.algoid=i(s,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=i(s,0,[0,1],"06")),n};W.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Gu=function(t){var e=d,i=e.lang.String.isHex,n=j,r=n.getV,s=n.getTLV,l=n.getVbyList,a=n.getTLVbyList,u=n.getTLVbyListEx,c=n.getIdxbyList,m=n.getIdxbyListEx,p=n.getChildIdx,h=new W;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var f=c(this.hex,0,[0,0]),v=this.hex.substr(f,2);if(v=="02")this.posSigAlg=1;else if(v=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+v);var g=c(this.hex,0,[0,this.posSigAlg+3]),y=this.hex.substr(g,2);if(y=="17"||y=="18"){var b,S;b=c(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,b!=-1&&(S=this.hex.substr(b,2),S=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(y=="30")this.posRevCert=this.posSigAlg+3;else if(y=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+y)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(l(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var f=a(this.hex,0,[0,this.posSigAlg],"30");return h.getAlgorithmIdentifierName(f)},this.getIssuer=function(){return h.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return a(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var f=l(this.hex,0,[0,this.posSigAlg+2]);return result=_e(f)},this.getNextUpdate=function(){var f=c(this.hex,0,[0,this.posSigAlg+3]),v=this.hex.substr(f,2);return v!="17"&&v!="18"?null:_e(r(this.hex,f))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var f=[],v=c(this.hex,0,[0,this.posRevCert]),g=p(this.hex,v),y=0;y<g.length;y++){var b=s(this.hex,g[y]);f.push(this.getRevCert(b))}return f},this.getRevCert=function(f){var v={},g=p(f,0);return v.sn={hex:l(f,0,[0],"02")},v.date=_e(l(f,0,[1])),g.length==3&&(v.ext=h.getExtParamArray(a(f,0,[2]))),v},this.findRevCert=function(f){var v=new W(f),g=v.getSerialNumberHex();return this.findRevCertBySN(g)},this.findRevCertBySN=function(f){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var v=this.parsed.revcert,g=0;g<v.length;g++)if(f==v[g].sn.hex)return v[g];return null},this.getSignatureValueHex=function(){return l(this.hex,0,[2],"03",!0)},this.verifySignature=function(f){var v=this.getSignatureAlgorithmField(),g=this.getSignatureValueHex(),y=a(this.hex,0,[0],"30"),b=new d.crypto.Signature({alg:v});return b.init(f),b.updateHex(y),b.verify(g)},this.getParam=function(f){var v={},g=this.getVersion();g!=null&&(v.version=g),v.sigalg=this.getSignatureAlgorithmField(),v.issuer=this.getIssuer(),v.thisupdate=this.getThisUpdate();var y=this.getNextUpdate();y!=null&&(v.nextupdate=y);var b=this.getRevCertArray();b!=null&&(v.revcert=b);var S=m(this.hex,0,[0,"[0]"]);if(S!=-1){var w=u(this.hex,0,[0,"[0]",0]);v.ext=h.getExtParamArray(w)}return v.sighex=this.getSignatureValueHex(),this.parsed=v,typeof f=="object"&&(f.tbshex==!0&&(v.tbshex=a(this.hex,0,[0])),f.nodnarray==!0&&delete v.issuer.array),v},typeof t=="string"&&(i(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=ge(t)),this._setPos())};(typeof d>"u"||!d)&&(d={});(typeof d.jws>"u"||!d.jws)&&(d.jws={});d.jws.JWS=function(){var t=d,e=t.jws.JWS,i=e.isSafeJSONString;this.parseJWS=function(n,r){if(!(this.parsedJWS!==void 0&&(r||this.parsedJWS.sigvalH!==void 0))){var s=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var l=s[1],a=s[2],u=s[3],c=l+"."+a;if(this.parsedJWS={},this.parsedJWS.headB64U=l,this.parsedJWS.payloadB64U=a,this.parsedJWS.sigvalB64U=u,this.parsedJWS.si=c,!r){var m=ce(u),p=xe(m,16);this.parsedJWS.sigvalH=m,this.parsedJWS.sigvalBI=p}var h=Me(l),f=Me(a);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=f,!i(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}};d.jws.JWS.sign=function(t,e,i,n,r){var s=d,l=s.jws,a=l.JWS,u=a.readSafeJSONString,c=a.isSafeJSONString,m=s.crypto,p=m.ECDSA,h=m.Mac,f=m.Signature,v=JSON,g,y,b;if(typeof e!="string"&&typeof e!="object")throw"spHeader must be JSON string or object: "+e;if(typeof e=="object"&&(y=e,g=v.stringify(y)),typeof e=="string"){if(g=e,!c(g))throw"JWS Head is not safe JSON string: "+g;y=u(g)}if(b=i,typeof i=="object"&&(b=v.stringify(i)),(t==""||t==null)&&y.alg!==void 0&&(t=y.alg),t!=""&&t!=null&&y.alg===void 0&&(y.alg=t,g=v.stringify(y)),t!==y.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+y.alg;var S=null;if(a.jwsalg2sigalg[t]===void 0)throw"unsupported alg name: "+t;S=a.jwsalg2sigalg[t];var w=gt(g),_=gt(b),A=w+"."+_,C="";if(S.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var x=new h({alg:S,prov:"cryptojs",pass:n});x.updateString(A),C=x.doFinal()}else if(S.indexOf("withECDSA")!=-1){var E=new f({alg:S});E.init(n,r),E.updateString(A);var F=E.sign();C=d.crypto.ECDSA.asn1SigToConcatSig(F)}else if(S!="none"){var E=new f({alg:S});E.init(n,r),E.updateString(A),C=E.sign()}var I=me(C);return A+"."+I};d.jws.JWS.verify=function(t,e,i){var n=d,r=n.jws,s=r.JWS,l=s.readSafeJSONString,a=n.crypto,u=a.ECDSA,c=a.Mac,m=a.Signature,p;if(typeof q!==void 0&&(p=q),!Ii(t))return!1;var h=t.split(".");if(h.length!==3)return!1;var f=h[0],v=h[1],g=f+"."+v,y=ce(h[2]),b=l(Me(h[0])),S=null,w=null;if(b.alg===void 0)throw"algorithm not specified in header";if(S=b.alg,w=S.substr(0,2),i!=null&&Object.prototype.toString.call(i)==="[object Array]"&&i.length>0){var _=":"+i.join(":")+":";if(_.indexOf(":"+S+":")==-1)throw"algorithm '"+S+"' not accepted in the list"}if(S!="none"&&e===null)throw"key shall be specified to verify.";if(typeof e=="string"&&e.indexOf("-----BEGIN ")!=-1&&(e=Y.getKey(e)),(w=="RS"||w=="PS")&&!(e instanceof p))throw"key shall be a RSAKey obj for RS* and PS* algs";if(w=="ES"&&!(e instanceof u))throw"key shall be a ECDSA obj for ES* algs";S=="none";var A=null;if(s.jwsalg2sigalg[b.alg]===void 0)throw"unsupported alg name: "+S;if(A=s.jwsalg2sigalg[S],A=="none")throw"not supported";if(A.substr(0,4)=="Hmac"){var C=null;if(e===void 0)throw"hexadecimal key shall be specified for HMAC";var x=new c({alg:A,pass:e});return x.updateString(g),C=x.doFinal(),y==C}else if(A.indexOf("withECDSA")!=-1){var E=null;try{E=u.concatSigToASN1Sig(y)}catch{return!1}var F=new m({alg:A});return F.init(e),F.updateString(g),F.verify(E)}else{var F=new m({alg:A});return F.init(e),F.updateString(g),F.verify(y)}};d.jws.JWS.parse=function(t){var e=t.split("."),i={},n,r,s;if(e.length!=2&&e.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=e[0],r=e[1],e.length==3&&(s=e[2]),i.headerObj=d.jws.JWS.readSafeJSONString(Me(n)),i.payloadObj=d.jws.JWS.readSafeJSONString(Me(r)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadObj==null?i.payloadPP=Me(r):i.payloadPP=JSON.stringify(i.payloadObj,null,"  "),s!==void 0&&(i.sigHex=ce(s)),i};d.jws.JWS.verifyJWT=function(t,e,i){var n=d,r=n.jws,s=r.JWS,l=s.readSafeJSONString,a=s.inArray,u=s.includedArray;if(!Ii(t))return!1;var c=t.split(".");if(c.length!=3)return!1;var m=c[0],p=c[1],h=m+"."+p,f=ce(c[2]),v=l(Me(m)),g=l(Me(p));if(v.alg===void 0)return!1;if(i.alg===void 0)throw"acceptField.alg shall be specified";if(!a(v.alg,i.alg)||g.iss!==void 0&&typeof i.iss=="object"&&!a(g.iss,i.iss)||g.sub!==void 0&&typeof i.sub=="object"&&!a(g.sub,i.sub))return!1;if(g.aud!==void 0&&typeof i.aud=="object"){if(typeof g.aud=="string"){if(!a(g.aud,i.aud))return!1}else if(typeof g.aud=="object"&&!u(g.aud,i.aud))return!1}var y=r.IntDate.getNow();return i.verifyAt!==void 0&&typeof i.verifyAt=="number"&&(y=i.verifyAt),(i.gracePeriod===void 0||typeof i.gracePeriod!="number")&&(i.gracePeriod=0),!(g.exp!==void 0&&typeof g.exp=="number"&&g.exp+i.gracePeriod<y||g.nbf!==void 0&&typeof g.nbf=="number"&&y<g.nbf-i.gracePeriod||g.iat!==void 0&&typeof g.iat=="number"&&y<g.iat-i.gracePeriod||g.jti!==void 0&&i.jti!==void 0&&g.jti!==i.jti||!s.verify(t,e,i.alg))};d.jws.JWS.includedArray=function(t,e){var i=d.jws.JWS.inArray;if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var n=0;n<t.length;n++)if(!i(t[n],e))return!1;return!0};d.jws.JWS.inArray=function(t,e){if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1};d.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};d.jws.JWS.isSafeJSONString=function(t,e,i){var n=null;try{return n=wr(t),typeof n!="object"||n.constructor===Array?0:(e&&(e[i]=n),1)}catch{return 0}};d.jws.JWS.readSafeJSONString=function(t){var e=null;try{return e=wr(t),typeof e!="object"||e.constructor===Array?null:e}catch{return null}};d.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(e==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]};d.jws.JWS.getJWKthumbprint=function(t){if(t.kty!=="RSA"&&t.kty!=="EC"&&t.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var e="{";if(t.kty==="RSA"){if(typeof t.n!="string"||typeof t.e!="string")throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if(t.kty==="EC"){if(typeof t.crv!="string"||typeof t.x!="string"||typeof t.y!="string")throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if(t.kty==="oct"){if(typeof t.k!="string")throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var i=Oe(e),n=d.crypto.Util.hashHex(i,"sha256"),r=me(n);return r};d.jws.IntDate={};d.jws.IntDate.get=function(t){var e=d.jws.IntDate,i=e.getNow,n=e.getZulu;if(t=="now")return i();if(t=="now + 1hour")return i()+60*60;if(t=="now + 1day")return i()+60*60*24;if(t=="now + 1month")return i()+60*60*24*30;if(t=="now + 1year")return i()+60*60*24*365;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t};d.jws.IntDate.getZulu=function(t){return Fr(t)};d.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t};d.jws.IntDate.intDate2UTCString=function(t){var e=new Date(t*1e3);return e.toUTCString()};d.jws.IntDate.intDate2Zulu=function(t){var e=new Date(t*1e3),i=("0000"+e.getUTCFullYear()).slice(-4),n=("00"+(e.getUTCMonth()+1)).slice(-2),r=("00"+e.getUTCDate()).slice(-2),s=("00"+e.getUTCHours()).slice(-2),l=("00"+e.getUTCMinutes()).slice(-2),a=("00"+e.getUTCSeconds()).slice(-2);return i+n+r+s+l+a+"Z"};(typeof d>"u"||!d)&&(d={});(typeof d.jws>"u"||!d.jws)&&(d.jws={});d.jws.JWSJS=function(){var t=d,e=t.jws,i=e.JWS,n=i.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(r){this.init();var s=r.split(".");if(s.length!=3)throw"malformed input JWS";this.aHeader.push(s[0]),this.sPayload=s[1],this.aSignature.push(s[2])},this.addSignature=function(r,s,l,a){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var u=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var c=d.jws.JWS.sign(r,s,this.sPayload,l,a),m=c.split("."),p=m[0],h=m[2];this.aHeader.push(m[0]),this.aSignature.push(m[2])}catch(f){throw this.aHeader.length>u&&this.aHeader.pop(),this.aSignature.length>u&&this.aSignature.pop(),"addSignature failed: "+f}},this.verifyAll=function(r){if(this.aHeader.length!==r.length||this.aSignature.length!==r.length)return!1;for(var s=0;s<r.length;s++){var l=r[s];if(l.length!==2)return!1;var a=this.verifyNth(s,l[0],l[1]);if(a===!1)return!1}return!0},this.verifyNth=function(r,s,l){if(this.aHeader.length<=r||this.aSignature.length<=r)return!1;var a=this.aHeader[r],u=this.aSignature[r],c=a+"."+this.sPayload+"."+u,m=!1;try{m=i.verify(c,s,l)}catch{return!1}return m},this.readJWSJS=function(r){if(typeof r=="string"){var s=n(r);if(s==null)throw"argument is not safe JSON object string";this.aHeader=s.headers,this.sPayload=s.payload,this.aSignature=s.signatures}else try{if(r.headers.length>0)this.aHeader=r.headers;else throw"malformed header";if(typeof r.payload=="string")this.sPayload=r.payload;else throw"malformed signatures";if(r.signatures.length>0)this.aSignature=r.signatures;else throw"malformed signatures"}catch(l){throw"malformed JWS-JS JSON object: "+l}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};L.SecureRandom=$e;L.rng_seed_time=_i;L.BigInteger=O;L.RSAKey=q;L.ECDSA=d.crypto.ECDSA;L.DSA=d.crypto.DSA;L.Signature=d.crypto.Signature;L.MessageDigest=d.crypto.MessageDigest;L.Mac=d.crypto.Mac;L.Cipher=d.crypto.Cipher;L.KEYUTIL=Y;L.ASN1HEX=j;L.X509=W;L.X509CRL=Gu;L.CryptoJS=z;L.b64tohex=at;L.b64toBA=pr;L.ECFieldElementFp=ve;L.ECPointFp=Q;L.ECCurveFp=qe;L.stoBA=Sr;L.BAtos=xr;L.BAtohex=Nt;L.stohex=Ie;L.stob64=Tu;L.stob64u=Ru;L.b64utos=Ou;L.b64tob64u=ot;L.b64utob64=mt;L.hex2b64=Ve;L.hextob64u=me;L.b64utohex=ce;L.utf8tob64u=gt;L.b64utoutf8=Me;L.utf8tob64=Du;L.b64toutf8=ku;L.utf8tohex=Mt;L.hextoutf8=ie;L.hextorstr=_e;L.rstrtohex=Oe;L.hextob64=_r;L.hextob64nl=Er;L.b64nltohex=Ar;L.hextopem=be;L.pemtohex=ge;L.hextoArrayBuffer=Mu;L.ArrayBuffertohex=ju;L.zulutomsec=Ei;L.zulutosec=Fr;L.zulutodate=Lu;L.datetozulu=Hu;L.uricmptohex=jt;L.hextouricmp=Lt;L.ipv6tohex=vi;L.hextoipv6=bi;L.hextoip=Rt;L.iptohex=Ai;L.ucs2hextoutf8=Fi;L.encodeURIComponentAll=Ht;L.newline_toUnix=zu;L.newline_toDos=Vu;L.hextoposhex=yi;L.intarystrtohex=qu;L.strdiffidx=Uu;L.oidtohex=Cr;L.hextooid=zt;L.strpad=Ot;L.bitstrtoint=Pr;L.inttobitstr=Tr;L.bitstrtobinstr=Rr;L.binstrtobitstr=Ku;L.isBase64URLDot=Ii;L.namearraytobinstr=Dt;L.extendClass=N;L.KJUR=d;L.crypto=d.crypto;L.asn1=d.asn1;L.jws=d.jws;L.lang=d.lang});var Mr=H((Ed,Nr)=>{var Wu=Br(),Ju=Wu.jws.JWS;Nr.exports=class{constructor(){this.accessToken=null,this.serviceAccountKey={private_key:`-----BEGIN PRIVATE KEY-----
MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCziXpsfM5psnbj
Iwe7VwKixx9wRGPPl6FfGQyP+Oa45XCu/iPsMHNxGn0zAlhZAViguAkM6SxTdYyx
NHsltAZPtug4A7qE3ZBZew+ZbMYZZjQ/koU6tSX+YRmTpqr+bFWc+nX90/9XezfR
t1XX7DPpN8almWQOXnHB0ZeiDJ1kWbD3ZfAamAnE6Ry9ESPo/Pe5FnjMs2LYHSy/
f75VmIuCuxjz/WVmeBTNbgmetugvymdvavLrxSZ6hdB6Ewd0dMW0Zh3qjLArb/XR
DAICntfO33+/r/q751jtiBzh04o2zQQmGDJh7DbFKUDvnevkkI+/6zkSc+ff/QR7
uXcVjJaLAgMBAAECggEAAL50Ydgh+2gk6bBTVE4etj9lRc/3Tw8NptkWcGG4Fncy
pQ3ZZtRwkXPX7vibX6+d4ot3irSVON4rsF1wBcWLobilT7KuiwoeSXCi9qA46DZS
oxqEL6yFWaQSyzOyCEVLgqsovbk9mOsP8AJkVaxLCjQ4iTkiyJPjU1wjsgCjqlN/
CWNyZ+2f5fgrlAh7a5Bg/LtHzWnp/wjQ2U1Kp1mUgLZ7EfV2JG22kE3zQggKynIW
ohKOckJpMINbObp4idD8Op0/gbIobreoSimAKWxto/AHOykqiyhsUsx81S7I8mXq
EXn5a+MLfEh8o9hAr5UY/4mm7AH1LgX45Oaz9jkkyQKBgQDqnQVFFaT50KJZxCkO
iUlwBqbvA5FSuT8n12/5drYZ7zFpa+EglZ4GzfU5aGCp67bXoKbpjR05tTAYAL6p
E1PFlqnfLXtv/KQlZ5uPY+Oanahg+TMHX1b1gHwi2uTFj6yD3hYl5nlTOd12t6N1
+aTO1K1KAg/wRhuqg8ipHfQJFQKBgQDD5y+1cGJTRBGXSJJpoZuUHeqGCLF/8R+T
rRSGL1Q9lqaS+N0D4DSOuNOWMENsRA48TDr/ChXthAvEHChZzKMuAsGnBdV4/qK7
+mceqPLLulkqlRhdTrmL4snMjSaqwlNehAdloJS+M6eR4pEOPuMgVjoiSd8lAFo5
f6jjLebJHwKBgDTiok55W4/ohMBBZJPfRIuZJEYagsan9WGQwa/1H4VnErdV1xCW
SWH1SULgkXGcLcIbd6SL57ubaTTv7gqEzcxrcu1Y/ks3IvU/jqRa+vJeeZcqdWND
DYIXrWPZ/dm+0j+Db3CprE2jbJWXPaSZWpo4/LsDDf62fwQH4tKkat8lAoGActL1
3sYxi5aRLPgHgUyNESL7zHYZ++DL3lYLep8RJExB9FFT0iq/A4yH0DcXvcSiB2uz
BLvXoHDOKLNMX14XoydQdGJx/kpZ/g5GFO136jueedwL/Nzg2oIiP/fX2yytiu+e
Gk4mANnr9RE0boIjxFdmGaTs2xY6zArsZcQIyocCgYAM055vrwU40SCvIFgemstr
9ilUiNSrKW+Y/vujGRtQp9/D1QwU2n6iNsLo/gs85GzH1STsagRbsLny504oTpfs
Ovc4lNek5JiL9/JFR07pH7/F9+STOgJgcn7oUnlfd/t86Th59Gx7H0v+RkhIXbtH
FMMKkjRL/CjPolat6n41rw==
-----END PRIVATE KEY-----
`,client_email:"ocm-logger@ocm-logs.iam.gserviceaccount.com"},this.jwt="",this.googleAuthURL="https://oauth2.googleapis.com/token",this.SCOPES=["https://www.googleapis.com/auth/logging.write"],this.EXPIRES_MARGIN=1800}run(){return new Promise((e,i)=>{let n=Math.floor(Date.now()/1e3);this.getJwt(this.serviceAccountKey,n);let r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:this.jwt})};fetch(this.googleAuthURL,r).then(s=>s.json()).then(s=>{this.accessToken=s.access_token,e(this.accessToken)}).catch(s=>{i(s)})})}getJwt({client_email:e,private_key:i},n){let r={typ:"JWT",alg:"RS256"},s=n+3600,l={aud:this.googleAuthURL,iss:e,scope:this.SCOPES.join(" "),iat:n,exp:s};this.jwt=Ju.sign(r.alg,r,l,i)}}});var Lr=H((Fd,jr)=>{var $u=Mr(),Xu=new $u;jr.exports=class{jwt;build;hostname;url;constructor(e,i,n){this.build=e,this.hostname=i,this.url=n,this.jwt=null}stringifyError(e){return this.hasJsonStructure(e)?JSON.stringify(e):e}hasJsonStructure(e){try{JSON.parse(e)}catch{return!1}return!0}error(e){this.send("ERROR",e)}warning(e){this.send("WARNING",e)}notice(e){this.send("NOTICE",e)}info(e){this.send("INFO",e)}debug(e){this.send("DEBUG",e)}async send(e,i){this.jwt||(this.jwt=await Xu.run());let n={method:"POST",headers:{Authorization:`Bearer ${this.jwt}`,Accept:"application/json; charset=UTF-8","Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({logName:"projects/ocm-logs/logs/ocm-js",resource:{type:"global",labels:{project_id:"ocm-logs",product:"ocm.js"}},entries:[{jsonPayload:{hostname:this.hostname,url:this.url,build:this.build.split(".")[1],userAgent:window.navigator.userAgent,service:i.service,browserWidth:window.innerWidth,browserHeight:window.innerHeight,msg:i.msg,error:this.stringifyError(i.error),consent:window?.OCM?.hasPurposeOneConsent,adBlocked:window?.OCM?.adBlocked},severity:e}]})};return await fetch("https://logging.googleapis.com/v2/entries:write",n)}getCircularReplacer(){let e=new WeakSet;return(i,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}}}});var zr=H((Cd,Hr)=>{var Yu=Qi(),Zu=en(),Qu=ur(),ec="https://geo.ocm.workers.dev",tc="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",je="[OCM][Utils] ",ic=Lr();Hr.exports=class{config;browser;start;window;doc_head;doc_body;screen_width;screen_height;is_mobile;hostname;url;willLog;willSampleWarnings;willSampleErrors;log_blacklist=[];constructor(e){this.config=e,this.browser=Yu,this.start=new Date,this.serviceStates=this.getServiceStates(),this.window=this.config.hasOwnProperty("use_window_top")?this.config.use_window_top?window.top:window:window.top,this.doc_head=this.window.document.head||this.window.document.getElementsByTagName("head")[0],this.doc_body=this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.screen_width=this.screenWidth(),this.screen_height=this.screenHeight(),this.is_mobile=Zu(),this.hostname=this.window.location.hostname,this.url=this.window.location.href,this.calculateLoggingSamples(),this.config?.log&&(this.log=new ic(this.config.build,this.hostname,this.url)),this.log_blacklist=["FPD request size has exceeded maximum request size","missing parameters for real time module","module criteo is loading external JavaScript","Rubicon: Filtered FPD key:","User sync not allowed","Continuing without bids","No valid bid requests returned for auction","fetch encountered an error","xhr timeout after","TCF2 denied device access for","has been rendered before","criteoIdSystem: unable to sync user id","xhr error","Number of user syncs exceeded for","Bid does not meet price floor","Brightcom server returned empty/non-json response"],this.ocmGoneMadPreview()}async isAdBlocked(){this.config.debug&&console.log("[OCM] Checking for Adblock..."),await fetch(tc,{method:"HEAD",mode:"no-cors"}).then(n=>{this.config.debug&&console.log(je+" adsbygoogle HEAD call response",n),(n.status===0||n.status===200)&&(this.window.OCM.adBlocked=!1),n.redirected&&(this.window.OCM.adBlocked=!0)}).catch(n=>{this.window.OCM.adBlocked=!0})}isMobile(){return this.is_mobile}getBrowser(){return this.browser}hasJsonStructure(e){try{JSON.parse(e)}catch{return!1}return!0}ocmChromeExt(e){this.config.debug&&console.info("[OCM] Provide data to our Chrome extension");let i={type:"OCM_CONFIG",data:e};this.window.postMessage(i,"*")}geolocation(){return this.config.debug&&console.info("[OCM] Geolocating..."),new Promise(e=>{if(this.window.OCM.geo){e();return}Qu.get(ec).then(i=>{this.window.OCM.geo=i.data,e()}).catch(i=>{console.error(je,i)})})}contentLoaded(){return this.config.debug&&console.info("[OCM] Checking for DOMContentLoaded..."),new Promise(e=>{let i=()=>{/^(?:loaded|interactive|complete)$/.test(document.readyState)&&(this.doc_body=this.doc_body||this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.doc_body&&document.removeEventListener("readystatechange",i),e())};document.addEventListener("readystatechange",i),i()})}isSlotInViewport(e){let i,n=this.window.document.getElementById(e),r=!1,s=0;if(!n||typeof n>"u")return!1;if(n.style.display==="none"?(n.style.display="block",i=n.getBoundingClientRect(),n.style.display="none"):i=n.getBoundingClientRect(),r=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.right<=(this.window.innerWidth||this.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(s=(i.height-Math.abs(i.top))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}if(i.bottom>=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.left>=0){if(s=(i.height-(i.bottom-(this.window.innerHeight||this.window.documentElement.clientHeight)))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}return!1}gptApiReady(){return this.config.debug&&console.info("[OCM] Checking for googletag.apiReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&googletag.apiReady)e();else{if(!r)return i("OCM gptApiReady: Max tries reached");setTimeout(n.bind(null,r-1),50)}};n(40)})}gptPubAdsReady(){return this.config.debug&&console.info(je+"Checking for googletag.pubadsReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&this.window.googletag.pubadsReady)e();else{if(!r)return i("OCM gptPubAdsReady: Max tries reached");setTimeout(n.bind(null,r-1),200)}};n(50)})}throttle(e,i){let n=Date.now();return function(){n+i-Date.now()<0&&(e(),n=Date.now())}}getServiceStates(){if(this.serviceStates&&this.serviceStates.length)return this.serviceStates;this.config.debug&&console.info("[OCM] Resolving service states...");let e={};return Object.keys(this.config.services).forEach(i=>{e[i]=this.config.services[i].active}),e}allowPageType(e){return this.config.debug&&console.log(je+"checking for page type validity",e,this.window.OCM.pageType),!!(e.includes(this.window.OCM.pageType)||e.includes("ROS"))}screenWidth(){return this.config.debug&&console.info("[OCM] Resolving screen width..."),this.window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}screenHeight(){return this.config.debug&&console.info("[OCM] Resolving screen height..."),this.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}loadStyle(e){this.config.debug&&console.info("[OCM] Loading style...",e.substring(0,100));let i=document.createElement("style");i.appendChild(document.createTextNode(e)),this.doc_head.appendChild(i)}loadImage(e,i){this.config.debug&&console.info("[OCM] Loading image...",e);let n=document.createElement("img");n.src=e,i==="body"?this.doc_body.insertBefore(n,this.doc_body.firstChild):this.doc_head.appendChild(n)}loadScript(e,i,n,r,s){this.config.debug&&console.info("[OCM] Loading script...",e);let l=document.createElement("script");l.type=i,l.src=e,n===1&&(l.async="true"),r!==""&&(l.class=r),s==="body"?this.doc_body.insertBefore(l,this.doc_body.firstChild):this.doc_head.appendChild(l)}determineInjectionTarget(e,i=0,n=0,r=0,s=0){this.config.debug&&console.info(je+"determineInjectionTarget",e,i,n,r,s);let l=null;if(e===""||!e)return l;let a;return typeof e=="string"?a=this.window.document.querySelectorAll(e):typeof e=="object"&&(a=e.length===void 0?[e]:e),r===0?a.length&&a.length>=n&&(i?i===-1?l=a[a.length-1]:l=a[i]:l=a[0]):l=this.getParagraphAt(r,s,a),l}injectTag(e,i,n){this.config.debug&&console.info(je+"Injecting tag",e,i,n);let r=null;switch(n){case"insertInsideStart":r=e.insertAdjacentElement("afterbegin",i);break;case"insertInside":r=e.appendChild(i);break;case"insertAfter":r=e.parentNode.insertBefore(i,e.nextElementSibling);break;case"insertBefore":r=e.parentNode.insertBefore(i,e);break;default:break}return r}calculateBidderTimeout(){let e=this.config.services.header_bidding.timeout;return(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] bidderTimeout = "+this.config.services.header_bidding.timeout),this.isMobile()&&(e*=2,(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] Mobile device, so bidderTimeout = ",e)),e}getParagraphAt(e,i,n){let r=0,s=0;for(let l of n)r=r+l.innerHTML.split(/\s+/).length;if(r>=i){for(let l of n)if(s=s+l.innerHTML.split(/\s+/).length,s>=e)return l}return null}getParameterByName(e){let i=this.window.location.href;e=e.replace(/[\[\]]/g,"\\$&");let r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(i);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}waitFor(e,i,n=50,r){let s=e.split(".");s.length||typeof r=="function"&&r();let l=setInterval(()=>{n--,n===0&&(clearInterval(l),typeof r=="function"&&r());let a=null;s.forEach(u=>{a?a=a[u]:a=this?.window[u]}),a&&(clearInterval(l),typeof i=="function"&&i())},100)}getUniqueListBy(e,i){return[...new Map(e.map(n=>[n[i],n])).values()]}getUnique(e,i){return e.map(n=>n[i]).map((n,r,s)=>s.indexOf(n)===r&&r).filter(n=>e[n]).map(n=>e[n])}async parseRss(e){return new Promise(async(i,n)=>{let r=s=>{s.length?i(s):n(s)};await fetch(e).then(s=>s.text()).then(s=>new this.window.DOMParser().parseFromString(s,"text/xml")).then(s=>{let l=[],a=s.querySelectorAll("item, entry"),u=!1;s.querySelector("feed")?.getAttribute("xmlns")?.indexOf("Atom")>-1&&(u=!0),Array.from(a).forEach(c=>{this.config.debug&&console.log(je,"Fetched RSS item",c);let m=c.querySelector("title"),p=c.querySelector("link"),h=c.querySelector("image"),f=c.querySelector("[url][width][height]"),v=c.querySelector("enclosure"),g=c.querySelector("description"),y=c.getElementsByTagName("media:content").length>0?c.getElementsByTagName("media:content").item(0):null,b=c.getElementsByTagName("media:thumbnail").length>0?c.getElementsByTagName("media:thumbnail").item(0):null;if(u){m=c.querySelector("title"),h=c.querySelector('link[type="image/jpeg"], link[type="image/png"], link[type="image/jpg"]')?.getAttribute("href"),p=c.querySelector('link[rel="alternate"]')?.getAttribute("href"),l.push({title:m?m.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p||"",image:h});return}(!m||!p)&&(this.config.debug&&console.log(je,"Failed to get title or url element",c),r([]));let S="";h?(S=h.innerHTML,h.querySelector("url")&&(S=h.querySelector("url").innerHTML),S.indexOf("<url>")>-1&&(S=S.replace("<url>","").replace("</url>",""))):f&&f.getAttribute("url").length?S=f.getAttribute("url"):v&&v.getAttribute("url").length?S=v.getAttribute("url"):y?S=y.getAttribute("url"):b?S=b.getAttribute("url"):g&&(S=this.extractImageFromDescription(c.innerHTML)),S.length&&l.push({title:m?m.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p?p.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",image:S})}),l=this.getUnique(l,"link"),l=l.filter(c=>c&&c.link&&c.link!==this.window.location.href),l=l.sort(()=>.5-Math.random()).slice(0,10),this.config.debug&&console.log(je,"RSS items: ",l),r(l)})})}extractImageFromDescription(e){let i=/img[^>]+src=['"]([^">]+)['"]/gm,n=e.matchAll(i);for(let r of n)if(typeof r[1]<"u")return r[1];return""}clipHiddenOverflows(e,i){let n=l=>this.window.getComputedStyle(l).overflow==="hidden",r=e;this.config.debug&&(i||console.log(je+"** Overflow check commence!",r));let s=i||r;if(n(r)&&r.tagName!=="BODY"){this.config.debug&&console.warn("Overflow found on:",r.tagName,{issue:"OVERFLOW IS HIDDEN",tagName:r.tagName,id:r.id,class:r.className,element:r});let l=r.getAttribute("style");r.setAttribute("style",l+"; overflow:clip !important")}if(r.parentElement)return this.clipHiddenOverflows(r.parentElement,s);this.config.debug&&console.log(je+"Overflow check complete! original element:",s)}calculateLoggingSamples(){let e=Math.floor(Math.random()*100);this.willSampleWarnings=e<2,this.willSampleErrors=e<10}getRandomString(e=7){return(Math.random()+1).toString(36).substring(e)}ocmGoneMadPreview(){let e=this.getParameterByName("campaign_id"),i=this.getParameterByName("adformat");e&&e!==""&&i&&i!==""&&this.contentLoaded().then(()=>{let n=document.createElement("script");n.id="ocm-gone-mad-sdk",n.src=`https://static.madinad.com/static/ocm-gone-mad.min.js?campaign_id=${e}&adformat=${i}&cb=${new Date().getTime()}`,this.doc_body.append(n)})}}});var Ci=H((Td,Vr)=>{var Ue="[OCM][Sticky] ";Vr.exports=class{utils;config;sticky_config;is_mobile;counter;skin_slot;skin_empty;constructor(e,i){this.utils=e,this.config=i,this.sticky_config=i.services.sticky,this.counter=0,this.skin_slot=null,this.skin_empty=null}async run(){(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Running..."),await this.utils.gptPubAdsReady();for(let e of this.sticky_config.ads)if(e.active){if(!this.deviceAllowed(e.conditions)&&e.position!=="fullscreen"){(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Ad ("+e.code+") not meant to run in current device");continue}if(!this.utils.allowPageType(e.conditions.page_types)){(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Ad ("+e.code+") not meant to run in current page type");continue}if(this.isExcluded(e.conditions.exclude_urls)){(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Ad ("+e.code+"). Inside excluded url. Terminating service.");continue}await this.structure(e)}}async determineSkinExists(){return new Promise((e,i)=>{let n=[];(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Checking if skin ad exists"),this.skin_slot&&e(!0),n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getSlotElementId().toLowerCase().includes("skin")||r.getAdUnitPath().toLowerCase().includes("skin")?(this.skin_slot=r,!0):!1),e(n.length>0)})}async structure(e){switch(this.counter++,(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Structuring sticky with code: ",e.code),e.bg_color||(e.bg_color="rgba(27,27,27,.75)"),this.utils.config.services.lazyload.ad_load_offsets.push({path:e.code,offset:-1}),e.position){case"left":this.leftStyles(e),await this.side(e);break;case"right":this.rightStyles(e),await this.side(e);break;case"top":this.topStyles(e),this.topBottom(e);break;case"bottom":this.bottomStyles(e),this.topBottom(e);break;case"fullscreen":this.fullScreenStyles(e),this.fullScreen(e);break;default:break}}async side(e){(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Trying to render side sticky with code: ",e.code),this.styleForXButton();let i=!0,n,r,s=this.utils.window.document.querySelectorAll("body *")[0],l=document.createElement("div");l.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(l.style=e.style),e.classes&&e.classes!==""&&l.setAttribute("class",e.classes);let a=document.createElement("div");a.classList.add("ocm-sticky-container");let u=document.createElement("div");u.classList.add("ocm-sticky-content");let c=document.createElement("div");c.id="ocm_sticky_"+this.counter,c.classList.add("ocm-sticky-ad");let m=document.createElement("script");m.text="googletag.cmd.push(function() {try { var "+c.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+c.id+'");if ('+c.id+"_slot) {   "+c.id+'_slot.addService(googletag.pubads());  googletag.display("'+c.id+'");}} catch(err) {}',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(m.text+="if (window.OCM.init_ad_server_set) { googletag.pubads().refresh(["+c.id+"_slot], { changeCorrelator: "+this.config.change_correlator!==void 0?this.config.change_correlator:!0+" }); }"),m.text+="});",e.size_mapping&&e.size_mapping.code&&e.size_mapping.name&&(m.text="googletag.cmd.push(function() {  "+e.size_mapping.code.replace(/g\n/,"")+' googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+c.id+'").defineSizeMapping('+e.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+c.id+'")});');let p=document.createElement("div");p.classList.add("ocm-close-icon-container");let h=document.createElement("button");h.classList.add("ocm-button-close"),this.utils.is_mobile||(p.addEventListener("mouseenter",()=>{h.classList.add("ocm-button-close-hover")}),p.addEventListener("mouseleave",()=>{h.classList.remove("ocm-button-close-hover")})),p.append(h),u.append(c),a.append(u),c.append(m),l.append(a),s.parentNode.append(l),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",f=>{if((this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Slot render ended. Event: ",f," isEmpty: ",f.isEmpty," slotElementId: ",f.slot.getSlotElementId()," divId: ",c.id),!f.isEmpty&&f.slot.getSlotElementId()===c.id){if(n=f.size[0],r=f.size[1],r===1&&n===1)return;l.style.width=String(n)+"px",l.style.height=String(r)+"px",l.style.marginTop="-"+String(r/2)+"px",u.style.width=String(n)+"px",u.style.height=String(r)+"px",e.conditions.retract&&(l.addEventListener("mouseenter",v=>{i||(e.position==="left"?l.style.marginLeft="0px":e.position==="right"&&(l.style.marginRight="0px"),i=!0,v.stopPropagation())}),l.addEventListener("mouseleave",v=>{i&&(setTimeout(()=>{e.position==="left"?l.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(l.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3),v.stopPropagation())}))}}),this.utils.window.googletag.pubads().addEventListener("impressionViewable",f=>{(this.config.debug||this.sticky_config.debug)&&console.log(Ue+"Event after impression viewable "+f+" event condition "+f.slot.getSlotElementId()===c.id),f.slot.getSlotElementId()===c.id&&(a&&a.childNodes&&Array.from(a.childNodes).find(g=>g.className==="ocm-close-icon-container")||a.append(p),h.addEventListener("click",g=>{e.position==="left"?l.style.marginLeft="-"+String(n)+"px":e.position==="right"&&(l.style.marginRight="-"+String(n)+"px"),setTimeout(()=>{l.remove()},500),g.stopPropagation()}),e.conditions.hide_if_skin&&this.determineSkinExists().then(g=>{g&&this.skin_slot&&this.skin_slot.getResponseInformation()&&setTimeout(()=>{e.position==="left"?l.style.marginLeft="-400px":e.position==="right"&&(l.style.marginRight="-400px"),setTimeout(()=>{l.remove()},500)},2e3)}),e.conditions.retract&&n!==1&&r!==1&&setTimeout(function(){e.position==="left"?l.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(l.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3))})}topBottom(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=document.createElement("div");n.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(n.style=e.style),e.classes&&e.classes!==""&&n.setAttribute("class",e.classes);let r=document.createElement("div");r.id="ocm_sticky_"+this.counter;let s=document.createElement("script");s.text="googletag.cmd.push(function() {  try { var "+r.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+r.id+'");  if ('+r.id+"_slot) {     "+r.id+'_slot.addService(googletag.pubads());    googletag.display("'+r.id+'");  }} catch(err) {}',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(s.text+="if (window.OCM.init_ad_server_set) { googletag.pubads().refresh(["+r.id+"_slot], { changeCorrelator: "+this.config.change_correlator!==void 0?this.config.change_correlator:!0+" }); }"),s.text+="});",e.size_mapping&&e.size_mapping.code&&e.size_mapping.name&&(s.text="googletag.cmd.push(function() {  "+e.size_mapping.code.replace(/g\n/,"")+' googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+r.id+'").defineSizeMapping('+e.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+r.id+'")});');let l=document.createElement("div");l.classList.add("close-icon-container");let a=document.createElement("button");a.classList.add("ocm-button-close"),this.utils.is_mobile||(l.addEventListener("mouseenter",()=>{a.classList.add("ocm-button-close-hover")}),l.addEventListener("mouseleave",()=>{a.classList.remove("ocm-button-close-hover")})),l.append(a),n.append(l),r.append(s),n.append(r),i.parentNode.append(n),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",u=>{if(!u.isEmpty&&u.slot.getSlotElementId()===r.id){n.classList.add("reveal-"+e.position);let c=u.size[0],m=u.size[1];e.conditions.device==="desktop"&&(c+=6,m+=6,["top","bottom"].includes(e.position)||(n.style.width=String(c)+"px",n.style.height=String(m)+"px")),setTimeout(()=>{l.addEventListener("click",()=>{n.classList.remove("reveal-"+e.position)})},2e3)}})}fullScreen(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=this.utils.window.document.querySelector("body"),r=this.utils.window.document.createElement("div");r.classList.add("ocm-sticky","ocm-fs"),e.style&&e.style!==""&&(r.style=e.style),e.classes&&e.classes!==""&&r.setAttribute("class",e.classes);let s=document.createElement("div");s.classList.add("ocm-sticky-container");let l=document.createElement("div");l.classList.add("ocm-sticky-content");let a=this.utils.window.document.createElement("div");a.id="ocm-sticky-fullscreen",a.classList.add("ocm-sticky-ad");let u=document.createElement("div");u.classList.add("ocm-close-icon-container");let c=document.createElement("button");c.classList.add("ocm-button-close"),this.utils.is_mobile||(u.addEventListener("mouseenter",()=>{c.classList.add("ocm-button-close-hover")}),u.addEventListener("mouseleave",()=>{c.classList.remove("ocm-button-close-hover")})),u.append(c),c.addEventListener("click",m=>{setTimeout(()=>{r.classList.remove("active"),n.classList.remove("no-scroll")},500),m.stopPropagation()}),l.append(a),s.append(l),r.append(u),r.append(s),i.parentNode.append(r),this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",m=>{m.bid.adUnitCode===e.code&&(r.classList.add("active"),n.classList.add("no-scroll"))})})}styleForXButton(){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }`)}leftStyles(e){this.utils.loadStyle(`            .ocm-sticky.left {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:50%;
`}                left:0px;
                -webkit-transition: margin-left 0.5s ease-in-out !important;
                transition: margin-left 0.5s ease-in-out !important;
            }
            .ocm-sticky.left .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 31px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}rightStyles(e){this.utils.loadStyle(`            .ocm-sticky.right {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:50%;
`}                right:0px;
                -webkit-transition: margin-right 0.5s ease-in-out !important;
                transition: margin-right 0.5s ease-in-out !important;
            }
            .ocm-sticky.right .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 32px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}topStyles(e){this.utils.loadStyle(`          .ocm-sticky.top {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            top: -1000px;
            left: 0;
            right: 0;
            transition: top .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-top {
            top: 0;
          }

          .ocm-sticky.reveal-top div[data-oau-code] {
            margin: 0 auto;
          }

          .ocm-sticky.top .close-icon-container {
            position: absolute;
            bottom: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.top .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.top .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}bottomStyles(e){this.utils.loadStyle(`          .ocm-sticky.bottom {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            bottom: -1000px;
            left: 0px;
            right: 0px;
            transition: bottom .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-bottom {
            bottom: 0px;
          }
          .ocm-sticky.reveal-bottom div[data-oau-code] {            margin: 0 auto;          }

          .ocm-sticky.bottom .close-icon-container {
            position: absolute;
            top: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.bottom .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.bottom .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}fullScreenStyles(e){this.utils.loadStyle(`            .ocm-sticky.ocm-fs {
                z-index: 2147483643;
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.7);
            }

            .ocm-sticky.ocm-fs.active {
                display: block !important;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container {
                z-index: 2147483643;
                display: flex;
                width: 100%;
                height: 100%;
                justify-content: center;
                align-items: center;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container .ocm-sticky-content {
                z-index: 2147483643;
                display: flex;
            }

            .ocm-sticky.ocm-fs .ocm-close-icon-container {
                z-index: 2147483644;
                display: flex;
                flex-direction: row;
                justify-content: flex-end;
                margin: 12px;
                position: absolute;
                top: 0;
                right: 0;
            }

            body.no-scroll {
                overflow: hidden!important;
            }
`)}deviceAllowed(e){return this.utils.is_mobile&&e.device==="mobile"||!this.utils.is_mobile&&e.device==="desktop"&&this.utils.screen_width>=e.min_width*this.utils.window.devicePixelRatio}isExcluded(e){return!!(typeof e!==void 0&&e.length&&e.find(i=>this.utils.window.location.href.includes(i)))}}});var Pi=H((Od,qr)=>{var De="[OCM][MIS] ";qr.exports=class{utils;config;mis_config;pairs;constructor(e,i){this.utils=e,this.config=i,this.mis_config=i.services.mobile_inread_sticky}run(){this.utils.loadStyle(".ocm-mis-adv{font-size:10px; margin:0 auto 5px 0} .ocm-mis{position:relative;text-align:center} .ocm-mis-expand{height:650px; min-width:300px; max-width:336px; background-color:transparent; margin:0 auto;} .ocm-mis-wrapper{position:sticky; top:"+this.mis_config.top+"px !important}"),this.gptMisEvent(),this.utils.contentLoaded().then(()=>{this.init()})}init(){(this.config.debug||this.mis_config.debug)&&console.log(De+"Looking up configured MIS divs...");for(let e of this.mis_config.pairs){if(!this.utils.allowPageType(e.page_types)){(this.config.debug||this.mis_config.debug)&&console.log(De+"##"+e.selector+"## not allowed in page type");continue}let i=this.utils.window.document.querySelector('[id*="'+e.selector+'"]:not([data-ocm-mis="true"])');if(i){if((this.config.debug||this.mis_config.debug)&&console.log(De+"Div found ("+e.selector+")"),i.querySelector('div[id^="google_ads_iframe_"] > iframe')){(this.config.debug||this.mis_config.debug)&&console.log(De+"Ad already loaded. Don't mess with it. Aborting DOM manipulation.");return}(this.config.debug||this.mis_config.debug)&&console.log(De+"Transforming to mobile inread sticky ("+e.selector+")");let n=document.createElement("div");n.classList.add("ocm-mis");let r=document.createElement("div");r.classList.add("ocm-mis-expand");let s=document.createElement("div");s.classList.add("ocm-mis-wrapper"),i.parentNode.insertBefore(n,i),n.append(r),r.append(s),s.appendChild(i),i.setAttribute("data-ocm-mis","true"),this.utils.clipHiddenOverflows(n),(this.config.debug||this.mis_config.debug)&&console.log(De+"Transformation done ("+e.selector+")")}}}gptMisEvent(){this.utils.window.googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotRenderEnded",e=>{if(!e.isEmpty&&this.utils.is_mobile){(this.config.debug||this.mis_config.debug)&&console.log(De+"Am in mobile device, time to check for position + z-index properties");let i=document.getElementById(e.slot.getSlotElementId());if((this.config.debug||this.mis_config.debug)&&console.log(De+"Found non empty mis slot:",i,i.classList.contains("ocm-mis")),i.classList.contains("ocm-mis")){let n=20,r=()=>{(this.config.debug||this.mis_config.debug)&&console.log(De+"Looking for position style property in #"+i.id),i.style.getPropertyValue("position")&&n>0?((this.config.debug||this.mis_config.debug)&&console.log(De+"Found position style property in #"+i.id),i.style.removeProperty&&((this.config.debug||this.mis_config.debug)&&console.log(De+"Removing position style property in #"+i.id),i.style.removeProperty("position"))):((this.config.debug||this.mis_config.debug)&&console.log(De+"Did not find position style property in #"+i.id+", retrying"),n>0&&(n--,setTimeout(r,100)))};r()}}})})}}});var Oi=H((Ti,Ri)=>{(function(t,e){typeof Ti=="object"&&typeof Ri<"u"?Ri.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,function(){var i=t.Cookies,n=t.Cookies=e();n.noConflict=function(){return t.Cookies=i,n}}())})(Ti,function(){"use strict";function t(r){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var a in l)r[a]=l[a]}return r}var e={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(r,s){function l(u,c,m){if(!(typeof document>"u")){m=t({},s,m),typeof m.expires=="number"&&(m.expires=new Date(Date.now()+m.expires*864e5)),m.expires&&(m.expires=m.expires.toUTCString()),u=encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var p="";for(var h in m)m[h]&&(p+="; "+h,m[h]!==!0&&(p+="="+m[h].split(";")[0]));return document.cookie=u+"="+r.write(c,u)+p}}function a(u){if(!(typeof document>"u"||arguments.length&&!u)){for(var c=document.cookie?document.cookie.split("; "):[],m={},p=0;p<c.length;p++){var h=c[p].split("="),f=h.slice(1).join("=");try{var v=decodeURIComponent(h[0]);if(m[v]=r.read(f,v),u===v)break}catch{}}return u?m[u]:m}}return Object.create({set:l,get:a,remove:function(u,c){l(u,"",t({},c,{expires:-1}))},withAttributes:function(u){return i(this.converter,t({},this.attributes,u))},withConverter:function(u){return i(t({},this.converter,u),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(r)}})}var n=i(e,{path:"/"});return n})});var Ur=H((vt,Di)=>{(function(t,e){typeof vt=="object"&&typeof Di=="object"?Di.exports=e():typeof define=="function"&&define.amd?define([],e):typeof vt=="object"?vt.bowser=e():t.bowser=e()})(vt,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(n,r,s){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(s,l,function(a){return n[a]}.bind(null,l));return s},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=i(18),r=function(){function s(){}return s.getFirstMatch=function(l,a){var u=a.match(l);return u&&u.length>0&&u[1]||""},s.getSecondMatch=function(l,a){var u=a.match(l);return u&&u.length>1&&u[2]||""},s.matchAndReturnConst=function(l,a,u){if(l.test(a))return u},s.getWindowsVersionName=function(l){switch(l){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(l){var a=l.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(l){var a=l.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(l){return l.split(".").length},s.compareVersions=function(l,a,u){u===void 0&&(u=!1);var c=s.getVersionPrecision(l),m=s.getVersionPrecision(a),p=Math.max(c,m),h=0,f=s.map([l,a],function(v){var g=p-s.getVersionPrecision(v),y=v+new Array(g+1).join(".0");return s.map(y.split("."),function(b){return new Array(20-b.length).join("0")+b}).reverse()});for(u&&(h=p-Math.min(c,m)),p-=1;p>=h;){if(f[0][p]>f[1][p])return 1;if(f[0][p]===f[1][p]){if(p===h)return 0;p-=1}else if(f[0][p]<f[1][p])return-1}},s.map=function(l,a){var u,c=[];if(Array.prototype.map)return Array.prototype.map.call(l,a);for(u=0;u<l.length;u+=1)c.push(a(l[u]));return c},s.find=function(l,a){var u,c;if(Array.prototype.find)return Array.prototype.find.call(l,a);for(u=0,c=l.length;u<c;u+=1){var m=l[u];if(a(m,u))return m}},s.assign=function(l){for(var a,u,c=l,m=arguments.length,p=new Array(m>1?m-1:0),h=1;h<m;h++)p[h-1]=arguments[h];if(Object.assign)return Object.assign.apply(Object,[l].concat(p));var f=function(){var v=p[a];typeof v=="object"&&v!==null&&Object.keys(v).forEach(function(g){c[g]=v[g]})};for(a=0,u=p.length;a<u;a+=1)f();return l},s.getBrowserAlias=function(l){return n.BROWSER_ALIASES_MAP[l]},s.getBrowserTypeByAlias=function(l){return n.BROWSER_MAP[l]||""},s}();e.default=r,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(91))&&n.__esModule?n:{default:n},s=i(18);function l(u,c){for(var m=0;m<c.length;m++){var p=c[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}var a=function(){function u(){}var c,m,p;return u.getParser=function(h,f){if(f===void 0&&(f=!1),typeof h!="string")throw new Error("UserAgent should be a string");return new r.default(h,f)},u.parse=function(h){return new r.default(h).getResult()},c=u,p=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(m=null)&&l(c.prototype,m),p&&l(c,p),u}();e.default=a,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=u(i(92)),r=u(i(93)),s=u(i(94)),l=u(i(95)),a=u(i(17));function u(m){return m&&m.__esModule?m:{default:m}}var c=function(){function m(h,f){if(f===void 0&&(f=!1),h==null||h==="")throw new Error("UserAgent parameter can't be empty");this._ua=h,this.parsedResult={},f!==!0&&this.parse()}var p=m.prototype;return p.getUA=function(){return this._ua},p.test=function(h){return h.test(this._ua)},p.parseBrowser=function(){var h=this;this.parsedResult.browser={};var f=a.default.find(n.default,function(v){if(typeof v.test=="function")return v.test(h);if(v.test instanceof Array)return v.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},p.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},p.getBrowserName=function(h){return h?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},p.getBrowserVersion=function(){return this.getBrowser().version},p.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},p.parseOS=function(){var h=this;this.parsedResult.os={};var f=a.default.find(r.default,function(v){if(typeof v.test=="function")return v.test(h);if(v.test instanceof Array)return v.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},p.getOSName=function(h){var f=this.getOS().name;return h?String(f).toLowerCase()||"":f||""},p.getOSVersion=function(){return this.getOS().version},p.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},p.getPlatformType=function(h){h===void 0&&(h=!1);var f=this.getPlatform().type;return h?String(f).toLowerCase()||"":f||""},p.parsePlatform=function(){var h=this;this.parsedResult.platform={};var f=a.default.find(s.default,function(v){if(typeof v.test=="function")return v.test(h);if(v.test instanceof Array)return v.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},p.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},p.getEngineName=function(h){return h?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},p.parseEngine=function(){var h=this;this.parsedResult.engine={};var f=a.default.find(l.default,function(v){if(typeof v.test=="function")return v.test(h);if(v.test instanceof Array)return v.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},p.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},p.getResult=function(){return a.default.assign({},this.parsedResult)},p.satisfies=function(h){var f=this,v={},g=0,y={},b=0;if(Object.keys(h).forEach(function(F){var I=h[F];typeof I=="string"?(y[F]=I,b+=1):typeof I=="object"&&(v[F]=I,g+=1)}),g>0){var S=Object.keys(v),w=a.default.find(S,function(F){return f.isOS(F)});if(w){var _=this.satisfies(v[w]);if(_!==void 0)return _}var A=a.default.find(S,function(F){return f.isPlatform(F)});if(A){var C=this.satisfies(v[A]);if(C!==void 0)return C}}if(b>0){var x=Object.keys(y),E=a.default.find(x,function(F){return f.isBrowser(F,!0)});if(E!==void 0)return this.compareVersion(y[E])}},p.isBrowser=function(h,f){f===void 0&&(f=!1);var v=this.getBrowserName().toLowerCase(),g=h.toLowerCase(),y=a.default.getBrowserTypeByAlias(g);return f&&y&&(g=y.toLowerCase()),g===v},p.compareVersion=function(h){var f=[0],v=h,g=!1,y=this.getBrowserVersion();if(typeof y=="string")return h[0]===">"||h[0]==="<"?(v=h.substr(1),h[1]==="="?(g=!0,v=h.substr(2)):f=[],h[0]===">"?f.push(1):f.push(-1)):h[0]==="="?v=h.substr(1):h[0]==="~"&&(g=!0,v=h.substr(1)),f.indexOf(a.default.compareVersions(y,v,g))>-1},p.isOS=function(h){return this.getOSName(!0)===String(h).toLowerCase()},p.isPlatform=function(h){return this.getPlatformType(!0)===String(h).toLowerCase()},p.isEngine=function(h){return this.getEngineName(!0)===String(h).toLowerCase()},p.is=function(h,f){return f===void 0&&(f=!1),this.isBrowser(h,f)||this.isOS(h)||this.isPlatform(h)},p.some=function(h){var f=this;return h===void 0&&(h=[]),h.some(function(v){return f.is(v)})},m}();e.default=c,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,l=[{test:[/googlebot/i],describe:function(a){var u={name:"Googlebot"},c=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/opera/i],describe:function(a){var u={name:"Opera"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/opr\/|opios/i],describe:function(a){var u={name:"Opera"},c=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/SamsungBrowser/i],describe:function(a){var u={name:"Samsung Internet for Android"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/Whale/i],describe:function(a){var u={name:"NAVER Whale Browser"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/MZBrowser/i],describe:function(a){var u={name:"MZ Browser"},c=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/focus/i],describe:function(a){var u={name:"Focus"},c=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/swing/i],describe:function(a){var u={name:"Swing"},c=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/coast/i],describe:function(a){var u={name:"Opera Coast"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var u={name:"Opera Touch"},c=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/yabrowser/i],describe:function(a){var u={name:"Yandex Browser"},c=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/ucbrowser/i],describe:function(a){var u={name:"UC Browser"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/Maxthon|mxios/i],describe:function(a){var u={name:"Maxthon"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/epiphany/i],describe:function(a){var u={name:"Epiphany"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/puffin/i],describe:function(a){var u={name:"Puffin"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/sleipnir/i],describe:function(a){var u={name:"Sleipnir"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/k-meleon/i],describe:function(a){var u={name:"K-Meleon"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/micromessenger/i],describe:function(a){var u={name:"WeChat"},c=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/qqbrowser/i],describe:function(a){var u={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/msie|trident/i],describe:function(a){var u={name:"Internet Explorer"},c=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/\sedg\//i],describe:function(a){var u={name:"Microsoft Edge"},c=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/edg([ea]|ios)/i],describe:function(a){var u={name:"Microsoft Edge"},c=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/vivaldi/i],describe:function(a){var u={name:"Vivaldi"},c=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/seamonkey/i],describe:function(a){var u={name:"SeaMonkey"},c=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/sailfish/i],describe:function(a){var u={name:"Sailfish"},c=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(u.version=c),u}},{test:[/silk/i],describe:function(a){var u={name:"Amazon Silk"},c=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/phantom/i],describe:function(a){var u={name:"PhantomJS"},c=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/slimerjs/i],describe:function(a){var u={name:"SlimerJS"},c=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var u={name:"BlackBerry"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var u={name:"WebOS Browser"},c=r.default.getFirstMatch(s,a)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/bada/i],describe:function(a){var u={name:"Bada"},c=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/tizen/i],describe:function(a){var u={name:"Tizen"},c=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/qupzilla/i],describe:function(a){var u={name:"QupZilla"},c=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var u={name:"Firefox"},c=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/electron/i],describe:function(a){var u={name:"Electron"},c=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/MiuiBrowser/i],describe:function(a){var u={name:"Miui"},c=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/chromium/i],describe:function(a){var u={name:"Chromium"},c=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/chrome|crios|crmo/i],describe:function(a){var u={name:"Chrome"},c=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/GSA/i],describe:function(a){var u={name:"Google Search"},c=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:function(a){var u=!a.test(/like android/i),c=a.test(/android/i);return u&&c},describe:function(a){var u={name:"Android Browser"},c=r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/playstation 4/i],describe:function(a){var u={name:"PlayStation 4"},c=r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/safari|applewebkit/i],describe:function(a){var u={name:"Safari"},c=r.default.getFirstMatch(s,a);return c&&(u.version=c),u}},{test:[/.*/i],describe:function(a){var u=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(u,a),version:r.default.getSecondMatch(u,a)}}}];e.default=l,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),l=[{test:[/Roku\/DVP/],describe:function(a){var u=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:u}}},{test:[/windows phone/i],describe:function(a){var u=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:u}}},{test:[/windows /i],describe:function(a){var u=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=r.default.getWindowsVersionName(u);return{name:s.OS_MAP.Windows,version:u,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var u={name:s.OS_MAP.iOS},c=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(u.version=c),u}},{test:[/macintosh/i],describe:function(a){var u=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=r.default.getMacOSVersionName(u),m={name:s.OS_MAP.MacOS,version:u};return c&&(m.versionName=c),m}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var u=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:u}}},{test:function(a){var u=!a.test(/like android/i),c=a.test(/android/i);return u&&c},describe:function(a){var u=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=r.default.getAndroidVersionName(u),m={name:s.OS_MAP.Android,version:u};return c&&(m.versionName=c),m}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var u=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:s.OS_MAP.WebOS};return u&&u.length&&(c.version=u),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var u=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||r.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:u}}},{test:[/bada/i],describe:function(a){var u=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:u}}},{test:[/tizen/i],describe:function(a){var u=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:u}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var u=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:u}}}];e.default=l,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),l=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var u=r.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return u&&(c.model=u),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var u=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return u&&!c},describe:function(a){var u=r.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:u}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var u=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&u>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=l,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),l=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var u=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:u}}},{test:[/trident/i],describe:function(a){var u={name:s.ENGINE_MAP.Trident},c=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:function(a){return a.test(/presto/i)},describe:function(a){var u={name:s.ENGINE_MAP.Presto},c=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:function(a){var u=a.test(/gecko/i),c=a.test(/like gecko/i);return u&&!c},describe:function(a){var u={name:s.ENGINE_MAP.Gecko},c=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var u={name:s.ENGINE_MAP.WebKit},c=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(u.version=c),u}}];e.default=l,t.exports=e.default}})})});var Mi=H((Dd,Ni)=>{var Kr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);Kr?(ki=new Uint8Array(16),Ni.exports=function(){return Kr(ki),ki}):(Bi=new Array(16),Ni.exports=function(){for(var e=0,i;e<16;e++)e&3||(i=Math.random()*4294967296),Bi[e]=i>>>((e&3)<<3)&255;return Bi});var ki,Bi});var ji=H((kd,Wr)=>{var Gr=[];for(bt=0;bt<256;++bt)Gr[bt]=(bt+256).toString(16).substr(1);var bt;function nc(t,e){var i=e||0,n=Gr;return[n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]]].join("")}Wr.exports=nc});var Xr=H((Bd,$r)=>{var rc=Mi(),sc=ji(),Jr,Li,Hi=0,zi=0;function oc(t,e,i){var n=e&&i||0,r=e||[];t=t||{};var s=t.node||Jr,l=t.clockseq!==void 0?t.clockseq:Li;if(s==null||l==null){var a=rc();s==null&&(s=Jr=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),l==null&&(l=Li=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:new Date().getTime(),c=t.nsecs!==void 0?t.nsecs:zi+1,m=u-Hi+(c-zi)/1e4;if(m<0&&t.clockseq===void 0&&(l=l+1&16383),(m<0||u>Hi)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hi=u,zi=c,Li=l,u+=122192928e5;var p=((u&268435455)*1e4+c)%4294967296;r[n++]=p>>>24&255,r[n++]=p>>>16&255,r[n++]=p>>>8&255,r[n++]=p&255;var h=u/4294967296*1e4&268435455;r[n++]=h>>>8&255,r[n++]=h&255,r[n++]=h>>>24&15|16,r[n++]=h>>>16&255,r[n++]=l>>>8|128,r[n++]=l&255;for(var f=0;f<6;++f)r[n+f]=s[f];return e||sc(r)}$r.exports=oc});var Zr=H((Nd,Yr)=>{var ac=Mi(),lc=ji();function uc(t,e,i){var n=e&&i||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||ac)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e)for(var s=0;s<16;++s)e[n+s]=r[s];return e||lc(r)}Yr.exports=uc});var qi=H((Md,es)=>{var cc=Xr(),Qr=Zr(),Vi=Qr;Vi.v1=cc;Vi.v4=Qr;es.exports=Vi});var is=H((Ld,ts)=>{ts.exports=class{utils;config;ue_config;oid;oeid;sent;ocm_pvc_items;now;engaged;engaged_time;disengaged_time;engagement_timer;totalCompletion;totalEngagedTime;hasPageviewCompleteFired;isLinkClicked;isFormSubmitted;constructor(e,i,n,r){this.utils=e,this.config=e.config,this.ue_config=this.config.services.user_engagement,this.oid=n,this.oeid=r,this.sent=!1,this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items"))||[],this.engaged=!1,this.engaged_time=this.getCurrentTime(),this.disengaged_time=this.engaged_time+2e3,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.isLinkClicked=!1,this.isFormSubmitted=!1,this.now=this.getCurrentTime()}async run(){await this.sendAndEmptyEvents(),await this.createPvcEvent(),this.initEngagementListener(),this.updateEventListener()}async sendAndEmptyEvents(){return new Promise(async(e,i)=>{let n=[...this.ocm_pvc_items];if(this.utils.window.document.visibilityState==="visible")for(let r=0;r<n.length;r++){let s=n[r],l=JSON.parse(this.utils.window.localStorage.getItem(s))||null;if(l){if(l.tet===0){l.tl+18e5<=this.now&&await this.deletePvcEvent(s);continue}await this.deletePvcEvent(s),await this.sendEventToAPI(l).then(()=>{}).catch(()=>{})}}e()})}initEngagementListener(){["touchstart","mousemove","mousedown","scroll","keydown","resize","focus"].forEach(i=>{this.utils.window.addEventListener(i,this.utils.throttle(()=>{this.engaged=!0,this.engaged_time=this.getCurrentTime(),this.engagement_timer&&clearTimeout(this.engagement_timer),this.engagement_timer=setTimeout(()=>{this.engaged=!1,this.disengaged_time=this.getCurrentTime(),this.totalEngagedTime+=this.disengaged_time-this.engaged_time},2e3)},1e3))})}updateEventListener(){setInterval(()=>{this.utils.window.document.visibilityState==="visible"&&(this.ocm_pvc_items.filter(e=>e===`ocm_pvc_${this.oeid}`).length||(this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(this.updatePvcEvent("updateEventListener"))))},this.ue_config.interval)}async createPvcEvent(){return new Promise((e,i)=>{let n=this.updatePvcEvent("createPvcEvent");this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(n)),e()})}updatePvcEvent(e){let i=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=this.getCurrentCompletion();this.totalEngagedTime+=this.engaged&&e==="updateEventListener"?this.getCurrentTime()-this.engaged_time:0,this.totalCompletion=i;let r="";if(this.config.build){let s=this.config.build.split(".");s.length>1&&(r=s[1])}return{u:this.utils.window.location.href,o:this.oeid,oi:this.oid,d:this.utils.window.location.hostname.replace("www.",""),tet:Math.ceil(parseInt(this.totalEngagedTime)/1e3),s:n,ts:this.totalCompletion,tm:this.now,tl:this.getCurrentTime(),v:r}}async deletePvcEvent(e){return new Promise((i,n)=>{this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items")).filter(r=>r!==e),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.removeItem(e),i()})}async sendEventToAPI(e){if(!e)return;let i="";if(this.config.build){let a=this.config.build.split(".");a.length>1&&(i=a[1])}let n={u:e.u,t:e.t,oi:e.oi,tet:parseInt(e.tet),s:e.s||0,ts:e.ts||0,o:e.o,h:e.d,tm:e.tm,v:i},r=new URLSearchParams(this.utils.window.location.search),s=Object.fromEntries(r.entries());return await fetch("https://windrunner.orangeclickmedia.com/pvc",{method:"POST",headers:{"Content-Type":"text/plain",Accept:"*/*"},body:JSON.stringify({events:[n]}),keepAlive:!0})}getCurrentCompletion(){let e=this.utils.window.document.documentElement.scrollHeight,i=this.utils.window.pageYOffset+this.utils.window.innerHeight;return i<=0?0:i>=e?1:i/e}getCurrentTime(){let e=new Date;return e.toLocaleString("el-GR",{timeZone:"Europe/Athens"}),e.getTime()}}});var ss=H((zd,rs)=>{var dc="[OCM][Reaper] ",hc="https://windrunner.orangeclickmedia.com/insert",ns="//windrunner.orangeclickmedia.com/usync",Ui=Oi(),fc=Ur(),gc=qi();rs.exports=class{utils;config;reaper_config;_oid;_oeid;_oeid_time;data;ip;device_access;constructor(e,i){this.utils=e,this.config=i,this._oid=null,this.cookie_type=null,this._oeid=gc.v4(),this.utils.window.OCM._oeid=this._oeid,this._oeid_time=new Date().getTime(),this.reaper_config=i.services.reaper,this.data={},this.device_access=!0,this.ip=null,this.utils.window.OCM.site_language=this?.reaper_config?.language||null}run(){!this.utils.window.OCM?.hasPurposeOneConsent&&this.config.services.iab_compliance.active&&(console.warn(dc+"Device access was denied. Forcing first party."),this.device_access=!1),this.targetEventId(),this.getUserIP().catch(()=>{}).finally(()=>{this.collect().then(()=>{this.send()}).catch(e=>{})})}async getUserIP(){return new Promise(async(e,i)=>{fetch("https://www.cloudflare.com/cdn-cgi/trace").then(n=>n.text()).then(n=>{try{n=n.trim().split(`
`).reduce(function(r,s){return s=s.split("="),r[s[0]]=s[1],r},{}),this.ip=n.ip,e()}catch{fetch("https://api64.ipify.org").then(s=>s.text()).then(s=>{this.ip=s,e()}).catch(s=>{i()})}}).catch(n=>{fetch("https://api64.ipify.org").then(r=>r.text()).then(r=>{this.ip=r,e()}).catch(r=>{i()})})})}runUserEngagement(e,i){if(this.config.services?.user_engagement?.active){let n=is();new n(this.utils,this.config,e,i).run()}}hasAlreadyRun(){return this.utils.window.sessionStorage.getItem("has_reaper_already_run")||!1}cleanSessionStorageOnUnload(){this.utils.window.addEventListener("beforeunload",()=>{this.utils.window.sessionStorage.removeItem("has_reaper_already_run")})}targetEventId(){this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().setTargeting("oeid",[this._oeid])})}async collect(){return new Promise((e,i)=>{let n=fc.parse(this.utils.window.navigator.userAgent);this.reap().then(()=>{this.data={ip:this.ip,oid:this._oid,oeid:this._oeid,oeid_time:this._oeid_time,eids:"",consent:this.utils.window.OCM.hasPurposeOneConsent,cookie_type:this.cookie_type,os:`${n.os.name||""}/${n.os.versionName||""}/${n.os.version||""}`,browser:`${n.browser.name}/${n.browser.version}`||"",platform:n.platform.type||"",pageType:this.utils.window.OCM.pageType,url:`${this.utils.window.location.protocol}//${this.utils.window.location.hostname+this.utils.window.location.pathname}`,language:this.utils.window.navigator.language,hostname:this.utils.window.location.hostname.replace("www.",""),searchParams:this.utils.window.location.search,city:window.OCM?.geo?.city||window.xtbClient?.cookies.city||"",pixelRatio:this.utils.window.devicePixelRatio||null,connection:this.getConnectionSpeed(),referrer:document.referrer,viewportSize:`${document.documentElement.clientWidth}x${document.documentElement.clientHeight}`,windowSize:`${this.utils.window.outerWidth}x${this.utils.window.outerHeight}`,site_language:this?.reaper_config?.language||"-"},this.runUserEngagement(this._oid,this._oeid);let r=10,s=()=>{if(r<=0){e();return}window.ocmpbjs?typeof window.ocmpbjs.getUserIdsAsEids=="function"&&window.ocmpbjs.getUserIdsAsEids().length?(this.data.eids=JSON.stringify(window.ocmpbjs.getUserIdsAsEids()),e()):(r--,setTimeout(()=>{s()},200)):(r--,setTimeout(()=>{s()},200))};s()}).catch(r=>{i(r)})})}isDailyCallMade(){let e=this.utils.window.localStorage.getItem("ocm_sync_date");return e?this.isToday(new Date(e)):!1}isToday(e){let i=new Date;return e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()}reap(){return new Promise(async(e,i)=>{this._oid=Ui.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,this.thirdPartyCall(n=>{n?(this.saveOidInStorage(),e(n)):i()})})}updateSyncDate(){this.utils.window.localStorage.setItem("ocm_sync_date",new Date)}saveOidInStorage(){Ui.set("_oid",this._oid,{expires:400,domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.setItem("_oid",this._oid)}deleteOidFromStorage(){Ui.remove("_oid",{domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.removeItem("_oid")}thirdPartyCall(e){let i=new XMLHttpRequest;i.open("GET",ns),i.setRequestHeader("Content-Type","text/plain"),i.withCredentials=!0,i.send(),i.onloadend=()=>{let n=JSON.parse(i.response);if(n.hasOwnProperty("result")&&n.result)this.cookie_type="third",this._oid=n._oid,e(!0);else if(this._oid)this._oid=n._oid,this.cookie_type="first",e(!0);else{let r=new XMLHttpRequest;r.open("GET",ns),r.setRequestHeader("Content-Type","text/plain"),r.withCredentials=!0,r.send(),r.onloadend=()=>{let s=JSON.parse(r.response);s.hasOwnProperty("result")&&s.result?this.cookie_type="third":this.cookie_type="first",this._oid=s._oid,e(!0)},r.onerror=()=>{this.deleteOidFromStorage(),e(!1)}}},i.onerror=()=>{this.deleteOidFromStorage(),e(!1)}}getConnectionSpeed(){let e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e||e.saveData)return null;switch(e.effectiveType){case"4g":return 3;case"3g":return 2;case"2g":case"slow-2g":return 1;default:return null}}send(){let e=new XMLHttpRequest;e.open("POST",hc),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(this.data)),e.onerror=()=>{}}}});var as=H((Vd,os)=>{var pc="[OCM][Ads behind Adblock] ",mc=t=>{let e=document.createElement("script");e.src="https://cdn.unblockia.com/h.js",document.head.appendChild(e),(t.debug||t.services.blockthrough.debug)&&console.info(pc+"Loaded")};os.exports=mc});var us=H((Ud,ls)=>{var U="[OCM][Fizz] ";ls.exports=class{utils;config;fizz_config;slots=[];lazyload;headerBiddingFunctionality;engaging=!1;engagementTimer=null;slotsObserver=null;INTERSECTION_OBSERVER_TIMEOUT=1e3;FULLSCREEN_INTERVAL=7e3;TEADS_MAX_VIDEO_DURATION=3e4;INTERSECTION_OBSERVER_OPTIONS={root:null,rootMargin:"0px",threshold:.5};isRefreshIntervalStarted=!1;TRIGGER_REFRESH_INTERVAL=3e3;constructor(e,i){this.utils=e,this.config=i,this.fizz_config=i.services.fizz,this.headerBiddingFunctionality=i.services.hasOwnProperty("header_bidding")&&i.services.header_bidding.active?i.services.header_bidding.functionality:null}run(){if(this.utils.url.includes("google_preview=")){(this.config.debug||this.fizz_config.debug)&&console.log(U+"SEIZE FIRE. Will not run in google_preview mode.");return}if(!this.utils.allowPageType(this.fizz_config.page_types)){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Page type not allowed, terminating process",this.fizz_config.page_types);return}(this.config.debug||this.fizz_config.debug)&&console.log(U+"Running..."),this.trackUserEngagement(),this.slotsObserver=this.createSlotsObserver(),this.slotRenderEndedListener(),this.adRenderSucceededListener()}allowByAdUnit(e){return!!this.fizz_config.ads_whitelist.find(i=>i.path===e)}isHBOnly(e){let i=this.fizz_config.ads_whitelist.find(n=>n.path===e);return!!(i&&i.hb_only)}allowByAdvertiser(e){if(this.fizz_config.advertisers_whitelist&&this.fizz_config.advertisers_whitelist.length===0)return!0;let i=this.fizz_config.advertisers_whitelist.find(n=>n.id===e);return i&&(this.config.debug||this.fizz_config.debug)&&console.log(U+`Found whitelisted advertiser ${i.name}`),!!i}removeFromSlots(e,i,n){this.slots.hasOwnProperty(e)&&((this.config.debug||this.fizz_config.debug)&&console.log(U,`Removing ad slot "${i}" due to not whitelisted advertiserId = ${n.advertiserId}`),this.slots.splice(this.slots.findIndex(e),1))}getAdDivElement(e){let i=null;if(this.utils.config.services.lazyload.active)i=this.utils.window.document.querySelector('[data-oau-code="'+e+'"]');else{let n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);n.length&&typeof n[0]=="object"&&(i=this.utils.window.document.getElementById(n[0].getSlotElementId()))}return i}trackUserEngagement(){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Running user engagement listener"),["touchstart","touchmove","click","scroll","keyup"].forEach(e=>{this.utils.window.addEventListener(e,this.utils.throttle(()=>{this.engaging=!0,(this.config.debug||this.fizz_config.debug)&&console.log(U+"User engaged"),this.engagementTimer&&clearTimeout(this.engagementTimer),this.engagementTimer=setTimeout(()=>{this.engaging=!1,(this.config.debug||this.fizz_config.debug)&&console.log(U+"User disengaged")},1e4)},1e3))})}createSlotsObserver(){return new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&setTimeout(()=>{let n=i?.target?.id;n&&this.utils.isSlotInViewport(n)?(this.slots[n].viewedAt=Date.now(),(this.config.debug||this.fizz_config.debug)&&console.log(U+`[Intersection Observer] Slot "${i.target.id}" is visible at viewport`),this.slotsObserver.unobserve(i.target)):(this.config.debug||this.fizz_config.debug)&&console.log(U+`[Intersection Observer] Slot "${i.target.id}" is out of viewport`)},this.INTERSECTION_OBSERVER_TIMEOUT)})},this.INTERSECTION_OBSERVER_OPTIONS)}slotRenderEndedListener(){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Looking for rendered slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.slot.getAdUnitPath(),n=e.slot.getSlotElementId(),r=this.utils.window.document.getElementById(n),s=e.isEmpty?null:e.slot.getResponseInformation();if((this.config.debug||this.fizz_config.debug)&&console.log(U+`Checking if ad unit "${i}" is in whitelisted ad units`,this.fizz_config.ads_whitelist),!this.allowByAdUnit(i))return(this.config.debug||this.fizz_config.debug)&&console.log(U+`Blocking refresh of "${i}" due to not whitelisted ad unit path`),null;if(!e.isEmpty){if((this.config.debug||this.fizz_config.debug)&&console.log(U+`Checking "${i}" for whitelisted advertiserId = ${s.advertiserId}`),!this.allowByAdvertiser(s.advertiserId))return(this.config.debug||this.fizz_config.debug)&&console.log(U+`Removing "${i}" from fizz slots due to not allowed by advertiser`),this.removeFromSlots(n,i,s),null;let l=this.getMaxHeightForSlot(i),a=this.utils.window.document.querySelector(`#${n} iframe`);if(a){let u=a.clientHeight||a.offsetHeight;u&&l===u&&!n.includes("ocm_sticky")&&!r.parentNode.classList.contains("ocm-mis-wrapper")&&(r.style.minHeight=l+"px",(this.config.debug||this.fizz_config.debug)&&console.log(U,"Attaching min height to ",i))}}if(this.slots.hasOwnProperty(n))this.slots[n].renderedAt=Date.now(),(this.config.debug||this.fizz_config.debug)&&console.log(U+`Updated time for slot "${n}"`,this.slots[n]);else{let l=+this.fizz_config.interval;this.slots[n]={gptslot:e.slot,div:n,code:i,renderedAt:Date.now(),isEmpty:e.isEmpty,viewedAt:null,hb_only:this.isHBOnly(i),adUnitInterval:l/2,refreshTurn:"HB"},r&&(this.slotsObserver.observe(this.utils.window.document.getElementById(n)),(this.config.debug||this.fizz_config.debug)&&console.log(U+`Created a new slot for "${n}"`,this.slots[n]))}(this.config.debug||this.fizz_config.debug)&&console.log(U+"All Slots: ",this.slots)})})}adRenderSucceededListener(){this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.bid.adUnitCode,n=+this.fizz_config.interval;this.slots[i]={gptslot:null,div:i,code:i,renderedAt:Date.now(),isEmpty:!1,viewedAt:Date.now()+1e3,hb_only:this.isHBOnly(i),adUnitInterval:n/2,refreshTurn:"HB"},(this.config.debug||this.fizz_config.debug)&&console.log(U+"All Slots: ",this.slots)})})}getMaxHeightForSlot(e){let i=this.utils.window.OCM.ad_units.find(n=>n.code===e);return i?i.sizes.reduce((n,r)=>Math.max(n,r[1]),0):0}getSlotByCode(e){let i=Object.keys(this.slots).find(n=>this.slots[n].code===e);return this.slots[i]}adjustMediaTypesSizes(e,i){let n={...i},r=this.getSlotByCode(e);if(r){let s=this.utils.window.document.querySelector(`#${r.div}`),l=this.utils.window.document.querySelector(`#${r.div} iframe`);if(s&&l){let a=l.clientHeight||l.offsetHeight,u=s.style&&s.style.minHeight&&s.style.minHeight!="";a&&(n.banner&&(n.banner.sizes=i.banner.sizes.filter(c=>u?c[1]===a||c[1]<a:c[1]===a),n.banner.sizes.length===0&&delete n.banner),n.video&&(n.video.playerSize=i.video.playerSize.filter(c=>u?c[1]===a||c[1]<a:c[1]===a),n.video.playerSize.length===0&&delete n.video))}}return n}determineHbAdUnits(e,i=!1,n=!1){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Determining HB ad units");let r=[];for(let s of e)for(let l of this.utils.window.OCM.ad_units)if(l.code===s.code){let a=l?.ortb2Imp?JSON.parse(JSON.stringify(l.ortb2Imp)):{ext:{data:{}}};if(a.ext.data.fizz=!0,n){let u=this.adjustMediaTypesSizes(l.code,l.mediaTypes);(u.banner&&u.banner.sizes&&u.banner.sizes.length||u.video&&u.video.playerSize&&u.video.playerSize.length)&&r.push({code:l.code,mediaTypes:u,bids:i?l.bids.filter(m=>m.bidder!=="amazon"):l.bids,ortb2Imp:a})}else r.push({code:l.code,mediaTypes:l.mediaTypes,bids:i?l.bids.filter(u=>u.bidder!=="amazon"):l.bids,ortb2Imp:a})}return(this.config.debug||this.fizz_config.debug)&&console.log(U+"Determined HB ad units",r),r}refreshHb(e){(this.config.debug||this.fizz_config.debug)&&console.log(U+"in refreshHb");let i=this.determineHbAdUnits(e,!0,!0);i.length?this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.removeAdUnit(),(this.config.debug||this.fizz_config.debug)&&console.log(U+" Removing old ad units"),this.utils.window.ocmpbjs.addAdUnits(i),(this.config.debug||this.fizz_config.debug)&&console.log(U+"Adding new ad units",i),this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(n=>n.code),bidsBackHandler:(n,r,s)=>{(this.config.debug||this.fizz_config.debug)&&console.log(U+"Auction has finished and the bids are : ",n),Object.keys(n).forEach(l=>{n[l].bids=n[l].bids.filter(a=>a.statusMessage!=="bidRejected"&&a.status!=="bidRejected")}),Object.keys(n).forEach(l=>{n[l].bids.length||delete n[l]}),Object.keys(n).length>0&&this.renderBidResponses(n),e.forEach(l=>{this.slots[l.div].isEmpty=n[l.div]&&n[l.div].bids&&n[l.div].bids.length||!1})}})}):e.forEach(n=>{this.slots[n.div].refreshTurn="GAM"})}renderBidResponses(e){for(let i in e){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Found bid for #"+i,e[i]);let n=i,r=this.getAdDivElement(i);if(r){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let l=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if((this.config.debug||this.fizz_config.debug)&&console.log(U+"adServerTargeting",l),l&&l.hb_adid){(this.config.debug||this.fizz_config.debug)&&console.log(U+"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(c=>c.remove()),r.append(s);let u=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(u,l.hb_adid),u.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),u.body.style.margin="0px !important",this.slotsObserver.observe(r)}}else(this.config.debug||this.fizz_config.debug)&&console.log(U+"Ad div #"+n+" not found")}}slotContainsVideo(e){let i=this.utils.window.document.getElementById(e.div),r=Date.now()-e.renderedAt||0,s=!!(i&&i.querySelector(".teads-inread")&&r<=this.TEADS_MAX_VIDEO_DURATION),l=!!(i&&i.querySelector("video")),a=i&&i.querySelector("iframe"),u=!!(a&&a.contentDocument&&a.contentDocument.querySelector("video"));return(this.config.debug||this.fizz_config.debug)&&console.log(U+`Slot ID: "${e.div}" hasVideo: ${l} hasTeads: ${s} hasVideoInIframe: ${u}`),l||u||s}startRefreshInterval(){setInterval(()=>{if((this.config.debug||this.fizz_config.debug)&&console.log(U+"Refresh interval triggered"),this.engaging){(this.config.debug||this.fizz_config.debug)&&console.log(U+"User is engaged during refresh interval trigger.");let e=Date.now(),i=[],n=[];Object.keys(this.slots).forEach(r=>{let s=this.slots[r],l=e-s.renderedAt||0,a=e-s.viewedAt||0,u=s.div&&s.div.includes("fullscreen")?this.FULLSCREEN_INTERVAL:s.adUnitInterval,c=!!s.hb_only;if(this.slotContainsVideo(s)){(this.config.debug||this.fizz_config.debug)&&console.log(U+`Slot "${s.div}" playing video. Skipping refresh for this slot.`);return}if(s.refreshTurn==="HB")l>=u&&a>=5e3&&((this.config.debug||this.fizz_config.debug)&&console.log(U+s.div+`HB Slot "${s.div}" passed time requirements. Turn: ${s.refreshTurn}`),this.utils.isSlotInViewport(s.div)?i.push(s):(this.config.debug||this.fizz_config.debug)&&console.log(U+`HB Slot "${s.div}" not inside viewport`));else if(s.refreshTurn==="GAM"){let m=this.fizz_config.interval-u>0?this.fizz_config.interval-u:this.fizz_config.interval;l>=m&&a>=3e3&&((this.config.debug||this.fizz_config.debug)&&console.log(U+s.div+`GAM Slot "${s.div}" passed time requirements`),this.utils.isSlotInViewport(s.div)&&!c?n.push(s):(this.config.debug||this.fizz_config.debug)&&console.log(U+`GAM Slot "${s.div}" not inside viewport`))}}),this.refreshHbBubbles(i),this.refreshGAMBubbles(n)}else(this.config.debug||this.fizz_config.debug)&&console.log(U+"No user engagement during refresh interval trigger")},this.TRIGGER_REFRESH_INTERVAL)}refreshHbBubbles(e){e.length?((this.config.debug||this.fizz_config.debug)&&console.log(U+"Found HB bubbles: ",e),this.refreshHb(e),e.forEach(i=>{this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn=i.hb_only?"HB":"GAM"}),(this.config.debug||this.fizz_config.debug)&&console.log(U+"Resetting all HB slots after refresh",this.slots)):(this.config.debug||this.fizz_config.debug)&&console.log(U+"No HB bubbles found")}refreshGAMBubbles(e){if(e.length){switch((this.config.debug||this.fizz_config.debug)&&console.log(U+"Found GAM bubbles: ",e),this.headerBiddingFunctionality){case null:this.refreshDfp(e);break;case"no_adserver":this.refreshHb(e);break;case"lazyload_v1":case"lazyload_v2":this.refreshDfpHbLazyload(e);break;default:this.refreshDfpHb(e);break}e.forEach(i=>{this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn="HB"}),(this.config.debug||this.fizz_config.debug)&&console.log(U+"Resetting all GAM slots after refresh",this.slots)}else(this.config.debug||this.fizz_config.debug)&&console.log(U+"No GAM bubbles found")}refreshDfp(e){(this.config.debug||this.fizz_config.debug)&&console.log(U+"in refreshDfp");let i=[];Object.keys(e).forEach(n=>{this.utils.window.googletag.cmd.push(()=>{e[n].gptslot.setTargeting("ocmFizz",["true"])}),i.push(e[n].gptslot)}),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().refresh(i)})}refreshDfpHbLazyload(e){(this.config.debug||this.fizz_config.debug)&&console.log(U+"in refreshDfpHbLazyload");for(let i of e){let n=document.querySelector('div[data-oau-code="'+i.code+'"]');n&&!n.hasAttribute("data-lazyincluded-by-ocm")&&(n.removeAttribute("data-lazyloaded-by-ocm"),n.removeAttribute("data-oau-code"),this.utils.window.googletag.cmd.push(()=>{i.gptslot.setTargeting("ocmFizz",["true"])}))}}refreshDfpHb(e){(this.config.debug||this.fizz_config.debug)&&console.log(U+"in refreshHbDfp"),this.utils.window.ocmpbjs.adUnits=[];let i=this.determineHbAdUnits(e,!1,!1);this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.addAdUnits(i),this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(function(n){return n.code}),bidsBackHandler:()=>{let n=[];try{Object.keys(e).forEach(r=>{this.utils.window.googletag.cmd.push(()=>{e[r].gptslot.setTargeting("ocmFizz",["true"])}),n.push(e[r].gptslot)})}catch(r){console.error("OCM Fizz: ",r)}n.length&&(this.utils.window.ocmpbjs.setTargetingForGPTAsync(n.map(function(r){return r.getAdUnitPath()})),this.utils.window.googletag.pubads().refresh(n),this.utils.window.ocmpbjs.initAdserverSet=!0,(this.config.debug||this.fizz_config.debug)&&console.log(U+"=> HB: Called initAdServer"))}})})})}}});var ds=H((Kd,cs)=>{var vc=(t,e)=>{let i="[OCM][MWI] ";if(t.services.mwi.hasOwnProperty("code")){if((t.debug||t.services.mwi.debug)&&console.log(i+"Running..."),!e.allowPageType(t.services.mwi.page_types)){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to page type");return}if(!t.services.mwi.safari&&e.browser.isSafari){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to Safari browser");return}if(!t.services.mwi.mobile&&e.is_mobile){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to mobile device");return}if(!t.services.mwi.desktop&&!e.is_mobile){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to desktop device");return}let n;e.window.googletag.cmd.push(()=>{n=googletag.defineOutOfPageSlot(t.services.mwi.code,googletag.enums.OutOfPageFormat.INTERSTITIAL),n&&(e.loadStyle("ins[data-vignette-loaded] { position:fixed !important; z-index: 2147483647 !important }"),(t.debug||t.services.mwi.debug)&&console.log(i+"Slot created"),n.addService(googletag.pubads()),(e.config.services.header_bidding.active||e.config.services.lazyload.active)&&((t.debug||t.services.mwi.debug)&&console.log(i+"disableInitialLoad is on, refreshing"),e.gptPubAdsReady().then(()=>{googletag.pubads().refresh([n],{changeCorrelator:t.change_correlator!==void 0?t.change_correlator:!0})})))})}else!t.services.mwi.hasOwnProperty("code")&&(t.debug||t.services.mwi.debug)&&console.error(i+"Ad unit code missing from config")};cs.exports=vc});var fs=H((Wd,hs)=>{var yt="[OCM][Injected Tags] ";hs.exports=class{utils;config;it_config;parent_el;constructor(e,i,n=null){this.parent_el=n,this.utils=e,this.config=i,this.it_config=i.services.injected_tags}run(){for(let e of this.it_config.tags)e.active&&this.utils.allowPageType(e.conditions.page_types)&&this.createTag(e)}createTag(e){this.utils.contentLoaded().then(()=>{this.inject(e)})}inject(e){let i=e.div_id+"-"+this.utils.getRandomString(7);if((this.config.debug||this.it_config.debug)&&console.log(yt+"injecting "+e.path),e.device_category!==void 0){if(e.device_category.mobile===!1&&this.utils.is_mobile){(this.config.debug||this.it_config.debug)&&console.info(yt+"injected tag: "+e.path+" has been disabled on mobile");return}if(e.device_category.desktop===!1&&!this.utils.is_mobile){(this.config.debug||this.it_config.debug)&&console.info(yt+"injected tag: "+e.path+" has been disabled on desktop");return}}this.parent_el&&(e.conditions.selector=this.parent_el+" "+e.conditions.selector);let n=this.utils.determineInjectionTarget(e.conditions.selector,e.conditions.position,e.conditions.count_gt,e.conditions.word_count,e.conditions.words_gt);if(!n){(this.config.debug||this.it_config.debug)&&console.info(yt+"node NOT found, stopping process",n);return}(this.config.debug||this.it_config.debug)&&console.info(yt+"node found: ",n);let r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("script"),a=e.hasOwnProperty("mobile_inread_sticky")&&this.utils.is_mobile?e.mobile_inread_sticky:!1;if(a){r.classList.add("ocm-mis");let u=document.createElement("div");u.classList.add("ocm-mis-expand");let c=document.createElement("div");c.classList.add("ocm-mis-wrapper"),s.id=i,s.setAttribute("data-ocm-mis","true"),c.append(s),u.append(c),r.append(u)}else r.id=i;e.style!==""&&(r.style=e.style),e.classes&&typeof e.classes<"u"&&e.classes!==""&&r.setAttribute("class",e.classes),e.hasOwnProperty("size_mapping")&&e.size_mapping!==null&&e.size_mapping.hasOwnProperty("code")&&e.size_mapping.hasOwnProperty("name")&&e.size_mapping.code!==null&&e.size_mapping.name!==null?l.text="googletag.cmd.push(function() {  "+e.size_mapping.code.replace(/g\n/,"")+' googletag.defineSlot("'+e.path+'", '+e.sizes+', "'+i+'").defineSizeMapping('+e.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+i+'")});':l.text='googletag.cmd.push(function() { googletag.defineSlot("'+e.path+'", '+e.sizes+', "'+i+'").addService(googletag.pubads());  googletag.display("'+i+'") })',e.conditions.hasOwnProperty("place")&&e.conditions.place&&this.utils.injectTag(n,r,e.conditions.place)&&(a?(s.append(l),this.utils.clipHiddenOverflows(r)):r.append(l))}}});var Ki=H(()=>{(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(w){try{return w.defaultView&&w.defaultView.frameElement||null}catch{return null}}var e=function(w){for(var _=w,A=t(_);A;)_=A.ownerDocument,A=t(_);return _}(window.document),i=[],n=null,r=null;function s(w){this.time=w.time,this.target=w.target,this.rootBounds=v(w.rootBounds),this.boundingClientRect=v(w.boundingClientRect),this.intersectionRect=v(w.intersectionRect||f()),this.isIntersecting=!!w.intersectionRect;var _=this.boundingClientRect,A=_.width*_.height,C=this.intersectionRect,x=C.width*C.height;A?this.intersectionRatio=Number((x/A).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function l(w,_){var A=_||{};if(typeof w!="function")throw new Error("callback must be a function");if(A.root&&A.root.nodeType!=1&&A.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=u(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=w,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(A.rootMargin),this.thresholds=this._initThresholds(A.threshold),this.root=A.root||null,this.rootMargin=this._rootMarginValues.map(function(C){return C.value+C.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return n||(n=function(w,_){!w||!_?r=f():r=g(w,_),i.forEach(function(A){A._checkForIntersections()})}),n},l._resetCrossOriginUpdater=function(){n=null,r=null},l.prototype.observe=function(w){var _=this._observationTargets.some(function(A){return A.element==w});if(!_){if(!(w&&w.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:w,entry:null}),this._monitorIntersections(w.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(w){this._observationTargets=this._observationTargets.filter(function(_){return _.element!=w}),this._unmonitorIntersections(w.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var w=this._queuedEntries.slice();return this._queuedEntries=[],w},l.prototype._initThresholds=function(w){var _=w||[0];return Array.isArray(_)||(_=[_]),_.sort().filter(function(A,C,x){if(typeof A!="number"||isNaN(A)||A<0||A>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return A!==x[C-1]})},l.prototype._parseRootMargin=function(w){var _=w||"0px",A=_.split(/\s+/).map(function(C){var x=/^(-?\d*\.?\d+)(px|%)$/.exec(C);if(!x)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(x[1]),unit:x[2]}});return A[1]=A[1]||A[0],A[2]=A[2]||A[0],A[3]=A[3]||A[1],A},l.prototype._monitorIntersections=function(w){var _=w.defaultView;if(_&&this._monitoringDocuments.indexOf(w)==-1){var A=this._checkForIntersections,C=null,x=null;this.POLL_INTERVAL?C=_.setInterval(A,this.POLL_INTERVAL):(c(_,"resize",A,!0),c(w,"scroll",A,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in _&&(x=new _.MutationObserver(A),x.observe(w,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(w),this._monitoringUnsubscribes.push(function(){var I=w.defaultView;I&&(C&&I.clearInterval(C),m(I,"resize",A,!0)),m(w,"scroll",A,!0),x&&x.disconnect()});var E=this.root&&(this.root.ownerDocument||this.root)||e;if(w!=E){var F=t(w);F&&this._monitorIntersections(F.ownerDocument)}}},l.prototype._unmonitorIntersections=function(w){var _=this._monitoringDocuments.indexOf(w);if(_!=-1){var A=this.root&&(this.root.ownerDocument||this.root)||e,C=this._observationTargets.some(function(F){var I=F.element.ownerDocument;if(I==w)return!0;for(;I&&I!=A;){var P=t(I);if(I=P&&P.ownerDocument,I==w)return!0}return!1});if(!C){var x=this._monitoringUnsubscribes[_];if(this._monitoringDocuments.splice(_,1),this._monitoringUnsubscribes.splice(_,1),x(),w!=A){var E=t(w);E&&this._unmonitorIntersections(E.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var w=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var _=0;_<w.length;_++)w[_]()},l.prototype._checkForIntersections=function(){if(!(!this.root&&n&&!r)){var w=this._rootIsInDom(),_=w?this._getRootRect():f();this._observationTargets.forEach(function(A){var C=A.element,x=h(C),E=this._rootContainsTarget(C),F=A.entry,I=w&&E&&this._computeTargetAndRootIntersection(C,x,_),P=null;this._rootContainsTarget(C)?(!n||this.root)&&(P=_):P=f();var R=A.entry=new s({time:a(),target:C,boundingClientRect:x,rootBounds:P,intersectionRect:I});F?w&&E?this._hasCrossedThreshold(F,R)&&this._queuedEntries.push(R):F&&F.isIntersecting&&this._queuedEntries.push(R):this._queuedEntries.push(R)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(w,_,A){if(window.getComputedStyle(w).display!="none"){for(var C=_,x=b(w),E=!1;!E&&x;){var F=null,I=x.nodeType==1?window.getComputedStyle(x):{};if(I.display=="none")return null;if(x==this.root||x.nodeType==9)if(E=!0,x==this.root||x==e)n&&!this.root?!r||r.width==0&&r.height==0?(x=null,F=null,C=null):F=r:F=A;else{var P=b(x),R=P&&h(P),M=P&&this._computeTargetAndRootIntersection(P,R,A);R&&M?(x=P,F=g(R,M)):(x=null,C=null)}else{var T=x.ownerDocument;x!=T.body&&x!=T.documentElement&&I.overflow!="visible"&&(F=h(x))}if(F&&(C=p(F,C)),!C)break;x=x&&b(x)}return C}},l.prototype._getRootRect=function(){var w;if(this.root&&!S(this.root))w=h(this.root);else{var _=S(this.root)?this.root:e,A=_.documentElement,C=_.body;w={top:0,left:0,right:A.clientWidth||C.clientWidth,width:A.clientWidth||C.clientWidth,bottom:A.clientHeight||C.clientHeight,height:A.clientHeight||C.clientHeight}}return this._expandRectByRootMargin(w)},l.prototype._expandRectByRootMargin=function(w){var _=this._rootMarginValues.map(function(C,x){return C.unit=="px"?C.value:C.value*(x%2?w.width:w.height)/100}),A={top:w.top-_[0],right:w.right+_[1],bottom:w.bottom+_[2],left:w.left-_[3]};return A.width=A.right-A.left,A.height=A.bottom-A.top,A},l.prototype._hasCrossedThreshold=function(w,_){var A=w&&w.isIntersecting?w.intersectionRatio||0:-1,C=_.isIntersecting?_.intersectionRatio||0:-1;if(A!==C)for(var x=0;x<this.thresholds.length;x++){var E=this.thresholds[x];if(E==A||E==C||E<A!=E<C)return!0}},l.prototype._rootIsInDom=function(){return!this.root||y(e,this.root)},l.prototype._rootContainsTarget=function(w){var _=this.root&&(this.root.ownerDocument||this.root)||e;return y(_,w)&&(!this.root||_==w.ownerDocument)},l.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},l.prototype._unregisterInstance=function(){var w=i.indexOf(this);w!=-1&&i.splice(w,1)};function a(){return window.performance&&performance.now&&performance.now()}function u(w,_){var A=null;return function(){A||(A=setTimeout(function(){w(),A=null},_))}}function c(w,_,A,C){typeof w.addEventListener=="function"?w.addEventListener(_,A,C||!1):typeof w.attachEvent=="function"&&w.attachEvent("on"+_,A)}function m(w,_,A,C){typeof w.removeEventListener=="function"?w.removeEventListener(_,A,C||!1):typeof w.detatchEvent=="function"&&w.detatchEvent("on"+_,A)}function p(w,_){var A=Math.max(w.top,_.top),C=Math.min(w.bottom,_.bottom),x=Math.max(w.left,_.left),E=Math.min(w.right,_.right),F=E-x,I=C-A;return F>=0&&I>=0&&{top:A,bottom:C,left:x,right:E,width:F,height:I}||null}function h(w){var _;try{_=w.getBoundingClientRect()}catch{}return _?(_.width&&_.height||(_={top:_.top,right:_.right,bottom:_.bottom,left:_.left,width:_.right-_.left,height:_.bottom-_.top}),_):f()}function f(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function v(w){return!w||"x"in w?w:{top:w.top,y:w.top,bottom:w.bottom,left:w.left,x:w.left,right:w.right,width:w.width,height:w.height}}function g(w,_){var A=_.top-w.top,C=_.left-w.left;return{top:A,left:C,height:_.height,width:_.width,bottom:A+_.height,right:C+_.width}}function y(w,_){for(var A=_;A;){if(A==w)return!0;A=b(A)}return!1}function b(w){var _=w.parentNode;return w.nodeType==9&&w!=e?t(w):(_&&_.assignedSlot&&(_=_.assignedSlot.parentNode),_&&_.nodeType==11&&_.host?_.host:_)}function S(w){return w&&w.nodeType===9}window.IntersectionObserver=l,window.IntersectionObserverEntry=s})()});var ps=H((Yd,gs)=>{var Gi="[OCM][IMA-PLAYER] ";gs.exports=class{adDiv;size;bid;utils;config;hb_config;vastUrl;vastXml;videoElement;adContainer;controlsContainer;playButton;playState;volumeButton;volumeState;viewportObserver;player;visible;playerState;constructor(e,i,n,r){this.utils=e,this.config=this.utils.config,this.hb_config=this.utils.config.services.header_bidding,this.adDiv=i,this.size=n,this.bid=r,this.vastUrl=this.bid.vastUrl||null,this.vastXml=this.bid.vastXml||null,this.playerState=!1,this.visible=!1,this.volumeState=!1,this.playState=!1}run(){this.styles(),this.html(),this.AdPlayer()}AdPlayer(){let e="url";this.vastUrl&&!this.vastXml?e="url":this.vastXml&&(e="xml");let i={vastLoadTimeout:1e4};e==="xml"&&(i={vastLoadTimeout:1e4,adsResponse:this.vastXml}),(this.utils.config.debug||this.utils.config.services.header_bidding.debug)&&(console.log(Gi+"vastUrl",this.vastUrl),console.log(Gi+"adsRequestOptions",i)),ImaAdPlayer({video:this.videoElement,displayContainer:this.adContainer,vpaidMode:ImaAdPlayer.vpaidMode.INSECURE,locale:window?.navigator?.language?window.navigator.language:"en",tag:e==="url"?this.vastUrl:"",maxDuration:3e4,restoreVideo:!0,adsRequestOptions:i,adsRenderingOptions:{loadVideoTimeout:1e4,useStyledLinearAds:!1,useStyledNonLinearAds:!1},adWillPlayMuted:!0,timeout:5e3,debug:this.utils.config.debug||this.hb_config.debug},(n,r)=>{this.player=n;try{window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0)}catch(s){console.log(Gi,s)}if(r){let s=o.data?.j?.j;this.handleAdError(s);return}this.player.on("ad_play",s=>{this.handleAdPlay()}),this.player.on("loaded",s=>{this.handleLoaded(s)}),this.player.on("impression",s=>{this.handleAdImpression()}),this.player.on("ad_error",s=>{let l=s.data?.j?.j;this.handleAdError(l)}),this.player.on("ad_end",s=>{this.handleAdEnd()}),this.player.on("click",s=>{this.handleVideoEvents("click",s)}),this.player.on("first_quartile",s=>{this.handleVideoEvents("first_quartile",s)}),this.player.on("midpoint",s=>{this.handleVideoEvents("midpoint",s)}),this.player.on("third_quartile",s=>{this.handleVideoEvents("third_quartile",s)}),this.player.on("complete",s=>{this.handleVideoEvents("complete",s)}),this.player.play(),this.controlsContainer&&window.getComputedStyle(this.controlsContainer).display=="none"&&this.controlsContainer.setAttribute("style","display:block !important")})}handleLoaded(e){try{e.data.B.vpaid||(this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3))}catch{this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3)}this.resizeAd()}resizeAd(){if(this.bid.width<=this.size.width)return;let e=this.bid.height/this.bid.width;this.size.height=Math.floor(this.size.width*e),this.player.resize(this.size.width,this.size.height)}handleAdPlay(){this.controlsMute(),this.player.setVolume(0)}handleAdImpression(){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let e=this.utils.window.OCM.vidimps[this.bid.auctionId];fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)}).then(i=>{i.json().then(n=>console.log(n))}).catch(i=>{console.error(i)})}}handleVideoEvents(e,i){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let n=this.utils.window.OCM.vidimps[this.bid.auctionId],r={eventName:e,adUnit:n.data.adUnit,auctionId:n.data.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(r)}).then(s=>{s.json().then(l=>{})}).catch(s=>{console.error(s)})}}handleAdEnd(){this.player.destroy(),this.videoElement.style.height=0,setTimeout(()=>{this.videoElement.remove()},500),this.refreshAd()}handleAdError(e){this.refreshAd()}refreshAd(){if(this.hb_config.functionality!=="no_adserver")if(this.hb_config.functionality.includes("lazyload"))this.resetLazyLoadForAdDiv();else{let e=this.utils.window.googletag.pubads().getSlots().filter(i=>i.getSlotElementId()===this.adDiv.id);e.length&&this.utils.window.googletag.pubads().refresh(e)}}resetLazyLoadForAdDiv(){this.adDiv.removeAttribute("data-lazyloaded-by-ocm"),this.adDiv.removeAttribute("data-oau-code")}html(){let e=`<div id="ocm-video-${this.adDiv.id}" class="ocm-video-player">  <div id="ocm-ad-container-${this.adDiv.id}"></div>  <div class="ocm-ad-controls">    <div class="ocm-ad-label">Ad</div>    <div class="ocm-ad-play"></div>    <div class="ocm-ad-volume"></div>    <div class="ocm-ad-replay"></div>  </div></div>`;this.adDiv.insertAdjacentHTML("afterbegin",e),this.videoElement=document.getElementById(`ocm-video-${this.adDiv.id}`),this.adContainer=document.getElementById(`ocm-ad-container-${this.adDiv.id}`),this.controlsContainer=document.querySelector(`#ocm-video-${this.adDiv.id} .ocm-ad-controls`),this.volumeButton=document.querySelector(`#ocm-video-${this.adDiv.id} .ocm-ad-controls .ocm-ad-volume`),this.size.width===300&&(this.controlsContainer.classList.add("scaled"),this.volumeButton.classList.add("scaled")),this.elementListeners()}elementListeners(){this.volumeButton.addEventListener("click",e=>{this.volumeState?(this.controlsMute(),this.player.setVolume(0)):(this.controlsUnMute(),this.player.setVolume(.6))})}controlsMute(){this.volumeState=!1,this.player.setVolume(0),this.volumeButton.classList.remove("unmuted"),this.volumeButton.classList.add("muted")}controlsUnMute(){this.volumeState=!0,this.player.setVolume(1),this.volumeButton.classList.remove("muted"),this.volumeButton.classList.add("unmuted")}styles(){this.utils.loadStyle(`
        .ocm-video-player {
           display:block; margin:0 auto; width:${this.size.width}px; height:${this.size.height}px; transition: height 1s, transform 1s;
        }
        .ocm-ad-controls {
        	display:none;
        	width:0px;
        	height:auto;
        	bottom:0px;
        	position: relative;
        	z-index:101;
        }
        /*.ocm-ad-play, */
        .ocm-ad-volume {
        	position:absolute;
        	top:10px;
        	width:32px;
        	height:32px;
        	cursor: pointer;
        	border-radius:50%;
        	background-color: rgb(223 129 0 / 85%);
        	background-origin:border-box;
        	background-position:center center;
        	background-repeat: no-repeat;
        	background-size:20px;
        }
        .ocm-ad-label {
        	position:absolute;
        	top:16px;
        	left:50px;
        	width:16px;
        	height:16px;
        	font-size:12px;
        	color:#000;
        	text-shadow:1px 1px 0px rgba(255, 255, 255, 0.6)
        }
        .scaled {
            transform: scale(0.8) !important;        
        }
        .ocm-ad-label.scaled {
            left: 46px !important;
        }
        .ocm-ad-volume {
        	left:10px;
        }
        /*
        .ocm-ad-play {
    		left:10px;
        }
        .ocm-ad-play.playing {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/pause.png');
        }
        .ocm-ad-play.paused {
        	background-position: 9px 6px;
		    background-size: 18px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/play.png');
        }
        */
        .ocm-ad-volume.unmuted {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/mute.png');
        }
        .ocm-ad-volume.muted {
        	background-position: 9px 9px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/unmute.png');
        }
        `)}}});var Wi=H((Qd,ms)=>{var se="[OCM][HB] ",bc=ps();ms.exports=class{utils;config;hb_config;mode;ratio;screen_width;screen_height;analytics_adapters=[];viewedBids=[];constructor(e,i){this.utils=e,this.config=i,this.hb_config=i.services.header_bidding,this.mode=this.hb_config.functionality,this.mode==="lazyload_v2"&&this.utils.browser.isSafari&&(this.mode="lazyload_v1"),this.ratio=1,this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.loadPrebidLib();let n=["Article","article","news_article","Recipe","Teen Article"];(this.hb_config.adsqRTDModuleEnabled||this.window?.ADSQ?.response)&&n.includes(this.utils.window.OCM.pageType)&&Math.random()<.1&&this.loadAdformCookie()}async prepare(e){return new Promise(async(i,n)=>{if(e=typeof e>"u"?!1:e,this.hb_config.bidderTimeout===1){(this.config.debug||this.hb_config.debug)&&console.log(se+"Timeout was set to 1ms, terminating process.");return}this.adjustBidderTimeout(e),this.buildAdUnits().then(()=>{this.utils.window.OCM.adBlocked||this.setupAnalytics(),this.configure(),this.mode!=="no_adserver"&&this.gptEventListeners(),i()})})}configure(){let e={buckets:[{precision:2,min:.01,max:10,increment:.01},{precision:2,max:20,increment:.1},{precision:2,max:50,increment:.5}]};this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidViewable",n=>{if(this.viewedBids.includes(n.adId))return;this.viewedBids.push(n.adId),(this.config.debug||this.hb_config.debug)&&console.log(se+"bidViewable",n);let r={eventName:"bidViewable",adUnit:n.adUnitCode.toLowerCase(),auctionId:n.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-viewability",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(r)}).then(s=>{}).catch(s=>{console.error(s)})}),(typeof this.config.uses_cmp>"u"||this.config.uses_cmp)&&this.utils.window.ocmpbjs.setConfig({consentManagement:{gdpr:{cmpApi:"iab",timeout:this.hb_config.bidderTimeout+2e4,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExclusions:["ocmpba","pubCommonId","sharedId"],softVendorExclusions:["ocmpba"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0}]},usp:{cmpApi:"iab",timeout:100}}}),this.utils.window.ocmpbjs.setConfig({enableTIDs:!0,bidViewabilityIO:{enabled:!0},auctionOptions:{suppressStaleRender:!0},floors:{enforcement:{floorDeals:!1,bidAdjustment:!0},data:{currency:this.hb_config.adServerCurrency,schema:{fields:["mediaType"]},values:{banner:.05,video:.3}}},ortb2:{device:{geo:{},ext:{data:{}}},site:{inventorypartnerdomain:"orangeclickmedia.com",ext:{data:{hostname:this.utils.hostname.replace("www.","")}},content:{},cat:[]},user:{ext:{data:{}},geo:{}}},firstPartyData:{skipEnrichments:!1},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},priceGranularity:this.hb_config.custom_granularity?e:"high",realTimeData:this.setupRealTimeData(),gptPreAuction:{enabled:!0,useDefaultPreAuction:!0},schain:this.config.schain,currency:{adServerCurrency:this.hb_config.adServerCurrency,conversionRateFile:"https://cdn.orangeclickmedia.com/tech/libs/latest_currencies.txt",defaultRates:{EUR:{AED:3.910817,AFN:84.894456,ALL:107.055056,AMD:413.808926,ANG:1.935814,AOA:881.072944,ARS:372.591364,AUD:1.646941,AWG:1.919208,AZN:1.807316,BAM:1.956531,BBD:2.168715,BDT:117.86401,BGN:1.957687,BHD:.401352,BIF:3042.621899,BMD:1.064748,BND:1.461279,BOB:7.421817,BRL:5.184894,BSD:1.074052,BTC:40030548e-12,BTN:89.133502,BWP:14.61379,BYN:2.711069,BYR:20869.052451,BZD:2.164993,CAD:1.437393,CDF:2629.926215,CHF:.953586,CLF:.034314,CLP:946.81573,CNY:7.630087,COP:4173.01193,CRC:572.599852,CUC:1.064748,CUP:28.215811,CVE:110.321736,CZK:24.548287,DJF:191.238349,DKK:7.456109,DOP:60.971929,DZD:146.5753,EGP:32.945315,ERN:15.971214,ETB:59.379353,FJD:2.40899,FKP:.852689,GBP:.857154,GEL:2.798147,GGP:.852689,GHS:12.335344,GIP:.852689,GMD:64.41333,GNF:9220.915298,GTQ:8.453268,GYD:224.715566,HKD:8.333391,HNL:26.464107,HRK:7.468894,HTG:145.53758,HUF:384.59713,IDR:16360.006187,ILS:4.070828,IMP:.852689,INR:88.437826,IQD:1406.610175,IRR:44998.893087,ISK:145.295917,JEP:.852689,JMD:165.94846,JOD:.754055,JPY:157.011405,KES:156.196944,KGS:94.41479,KHR:4405.348314,KMF:493.08561,KPW:958.274829,KRW:1413.276748,KWD:.328964,KYD:.895052,KZT:500.462676,LAK:21368.78876,LBP:16062.338222,LKR:347.46543,LRD:198.504247,LSL:20.283725,LTL:3.143923,LVL:.644056,LYD:5.21068,MAD:10.906609,MDL:19.29074,MGA:4857.543739,MKD:61.531041,MMK:2255.55998,MNT:3702.293959,MOP:8.659572,MRO:380.114701,MUR:47.696163,MVR:16.40762,MWK:1170.613012,MXN:18.202284,MYR:4.98142,MZN:67.34523,NAD:20.283568,NGN:818.460413,NIO:39.301319,NOK:11.416378,NPR:142.618024,NZD:1.796133,OMR:.409911,PAB:1.074042,PEN:3.973384,PGK:3.946066,PHP:60.583601,PKR:319.806569,PLN:4.633989,PYG:7819.021134,QAR:3.876718,RON:4.970454,RSD:117.281535,RUB:101.682601,RWF:1287.786467,SAR:3.993773,SBD:8.94888,SCR:13.727802,SDG:640.004824,SEK:11.892751,SGD:1.450218,SHP:1.295531,SLE:23.682072,SLL:21028.764683,SOS:605.287384,SRD:40.737446,STD:22038.125066,SSP:639.913082,SYP:13843.498701,SZL:20.286433,THB:38.085492,TJS:11.793855,TMT:3.726617,TND:3.359295,TOP:2.546504,TRY:28.694091,TTD:7.290681,TWD:34.020779,TZS:2667.013813,UAH:39.670474,UGX:4001.057648,USD:1.064748,UYU:41.100751,UZS:13054.591054,VEF:3544567605004e-6,VES:35.632779,VND:25825.452408,VUV:129.731959,WST:2.928959,XAF:656.306851,XAG:.04655,XAU:556e-6,XCD:2.877533,XDR:.812826,XOF:656.294516,XPF:119.89017,YER:266.56004,ZAR:20.247877,ZMK:9584.016189,ZMW:22.04513,ZWL:342.848284}}},userSync:{syncsPerBidder:5,auctionDelay:700,filterSettings:{iframe:{bidders:["iprom"],filter:"exclude"}},userIds:[{name:"lotamePanoramaId"},{name:"identityLink",params:{pid:"1258"},storage:{type:"html5",name:"idl_env",expires:90,refreshInSeconds:8*3600}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json",type:"html5",name:"_unifiedid",expires:30}},{name:"criteo"},{name:"id5Id",params:{partner:347},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{type:"html5",name:"_pubcid",expires:365}}],aliasSyncEnabled:!0},maxRequestsPerOrigin:4,bidderTimeout:Number(this.hb_config.bidderTimeout),timeoutBuffer:400,useBidCache:!0,suppressEmptyKeys:!0,enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0},pageUrl:this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,ix:{timeout:Number(this.hb_config.bidderTimeout)},rubicon:{singleRequest:!0},amazon:{sid:this.hb_config.amazon_sid}}),[{bidder:"pubmatic",domain:"pubmatic.com",id:"157884"},{bidder:"appnexus",domain:"xandr.com",id:"14808"},{bidder:"teads",domain:"teads.tv",id:"16578"},{bidder:"adyoulike",domain:"adyoulike.com",id:"7ddaba905b34014f9bd3fe2c57d6d46e"},{bidder:"gumgum",domain:"gumgum.com",id:"14064"},{bidder:"medianet",domain:"media.net",id:"8CU32RQ72"},{bidder:"triplelift",domain:"triplelift.com",id:"9262"}].forEach(n=>{let r=n.bidder==="appnexus"?{bidders:[n.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"adops.gr",sid:this.config.adops_seller_id,hp:1}]}}}}:{bidders:[n.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[this.config.schain.config.nodes[0],{asi:`${n.domain}`,sid:`${n.id}`,hp:1}]}}}};this.utils.window.ocmpbjs.setBidderConfig(r)}),this.utils.window.ocmpbjs.bidderSettings=this.setupBidderSettings(this.hb_config.custom_granularity),this.analytics_adapters.length&&this.utils.window.ocmpbjs.enableAnalytics(this.analytics_adapters)}),this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidWon",i=>{if(i.mediaType==="banner"){let n=this.utils.window.googletag.pubads().getSlots().find(l=>l.getAdUnitPath()===i.adUnitCode&&l.getTargeting("hb_adid")[0]===i.adId);if(!n)return;let r=this.utils.window.document.querySelector(`div[id^="google_ads_iframe_${n.getSlotId().getId().replace(/(\.|\/)/g,"\\$1")}"]`);r&&(r.style.height=`${i.height}px !important`,r.style.width=`${i.width}px !important`);let s=this.utils.window.document.getElementById(n.getSlotElementId());if(s&&s.classList.contains("ocm-sticky-ad")){let l=s.parentNode,a=l.parentNode,u=a.parentNode;if(u.classList.contains("left")||u.classList.contains("right")){let c=document.createElement("div");c.classList.add("ocm-close-icon-container");let m=document.createElement("span");m.classList.add("ocm-button-close"),this.utils.is_mobile||(c.addEventListener("mouseenter",()=>{m.classList.add("ocm-button-close-hover")}),c.addEventListener("mouseleave",()=>{m.classList.remove("ocm-button-close-hover")})),u.style.width=`${i.width}px !important`,u.style.height=`${i.height}px !important`,u.style.marginTop=`-${i.height/2}px`,u.classList.contains("right")&&(a.style.marginLeft=`-${i.width}px`),l.style.width=`${i.width}px !important`,l.style.height=`${i.height}px !important`,a&&a.childNodes&&Array.from(a.childNodes).find(h=>h.className==="ocm-close-icon-container")||(c.append(m),a.append(c)),m.addEventListener("click",h=>{u.classList.contains("left")?u.style.marginLeft="-"+String(i.width)+"px":u.classList.contains("right")&&(u.style.marginRight="-"+String(i.height)+"px"),setTimeout(()=>{u.remove()},500),h.stopPropagation()})}}}})}),this.mode.includes("lazyload")||this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.addAdUnits(this.utils.window.OCM.ad_units),this.hb_config.debug&&console.log(se+"Added this.utils.window.OCM.ad_units to prebid",this.utils.window.ocmpbjs.adUnits),this.mode==="no_adserver"?this.utils.window.ocmpbjs.requestBids({adUnitCodes:this.hb_config.adUnits.map(i=>i.code),bidsBackHandler:(i,n,r)=>{(this.config.debug||this.hb_config.debug)&&console.log(se+"no_adserver bidResponses",i),Object.keys(i).forEach(s=>{i[s].bids=i[s].bids.filter(l=>l.statusMessage!=="bidRejected"&&l.status!=="bidRejected")}),Object.keys(i).forEach(s=>{i[s].bids.length||delete i[s]}),Object.keys(i).length>0&&this.directRenderBids(i)}}):this.utils.window.ocmpbjs.requestBids({bidsBackHandler:(i,n,r)=>{this.initAdServer([],!1)}})})}initAdServer(e,i=!1){if(i){(this.config.debug||this.hb_config.debug)&&console.log(se+"Calling initAdServer with slots:",e);let n=[];for(let r of e){let s=this.utils.window.document.querySelector('[id="'+r.getSlotElementId()+'"]');s&&(s.removeAttribute("data-lazyincluded-by-ocm"),s.setAttribute("data-lazyloaded-by-ocm",""),n.push(r.getAdUnitPath()))}typeof e<"u"&&e.length&&this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.setTargetingForGPTAsync(n),this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})}catch(r){console.error(se,r)}})})}else(this.config.debug||this.hb_config.debug)&&console.log(se+"Calling initAdServer for all slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.setTargetingForGPTAsync(),this.utils.window.googletag.pubads().refresh(),this.utils.window.OCM.init_ad_server_set=!0})})}async buildAdUnits(){return new Promise((e,i)=>{(this.config.debug||this.hb_config.debug)&&console.log(se+"Building OCM.ad_units...");let n=this.utils.window.OCM?.ad_units?JSON.parse(JSON.stringify(this.utils.window.OCM.ad_units)):[],r=this.hb_config.adUnits.map(s=>{let l=!0,a=!0,u=!0;if(l=this.filterAdUnitByPageType(s),a=this.filterAdUnitByDevice(s),u=a&&l,u)return s=this.jsonifyAd(s),s=this.removeInactiveBidderBids(s),!s||(s=this.removeNullBidParams(s),s=this.hbSizeMap(s),!s)?null:(s=this.removeBadBidSizes(s),this.config.services.geolocation.active&&this.utils.window.OCM?.geo?.country&&(s=this.geoFilter(s)),s=this.buildMediaTypes(s),s)}).filter(s=>s!=null);this.utils.window.OCM.ad_units=[...new Set([...n,...r])],e()})}filterAdUnitByPageType(e){return this.utils.allowPageType(e.page_types)?!0:((this.config.debug||this.hb_config.debug)&&console.log(se+"Removing "+e.code+" due to page type"),!1)}filterAdUnitByDevice(e){if(this.utils.is_mobile){if(e.visibility.hasOwnProperty("mobile")&&!e.visibility.mobile)return(this.config.debug||this.hb_config.debug)&&console.log(se+"Removing "+e.code+" due to hidden in mobile"),!1}else if(e.visibility.hasOwnProperty("desktop")&&!e.visibility.desktop)return(this.config.debug||this.hb_config.debug)&&console.log(se+"Removing "+e.code+" due to hidden in desktop"),!1;return!0}jsonifyAd(e){typeof e.sizes<"u"&&(e.sizes.ocmStartsWith("[[")||(e.sizes="["+e.sizes+"]"),this.utils.hasJsonStructure(e.sizes)&&(e.sizes=JSON.parse(e.sizes))),e.hasOwnProperty("size_mapping")&&(e.size_mapping=e.size_mapping.map(a=>(this.utils.hasJsonStructure(a.ad_sizes)&&(a.ad_sizes=JSON.parse(a.ad_sizes)),this.utils.hasJsonStructure(a.window_size)&&(a.window_size=JSON.parse(a.window_size)),a)));let i=!1,n=!1,r=!1,s,l;return e.bids=e.bids.map(a=>{for(let u=0;u<Object.keys(a.params).length;u++){let c=Object.keys(a.params)[u],m=a.params[c];c==="size"&&m!==null&&m.indexOf("[[")<0&&a.bidder!=="ix"&&(m="["+m+"]"),a.bidder==="criteo"&&(i=!0),a.bidder==="smartadserver"&&(n=!0,s=a.params.siteId,l=a.params.pageId),a.bidder==="triplelift"&&(r=!0),this.utils.hasJsonStructure(m)&&(a.params[c]=JSON.parse(m))}return a}).filter(a=>a!==void 0),(e.media_types.indexOf("video")>-1||e.media_types.indexOf("videoInArticle")>-1)&&(i&&e.bids.push({bidder:"criteo",params:{zoneId:1697471}}),n&&e.bids.push({bidder:"smartadserver",params:{siteId:s,pageId:l,formatId:67950,domain:"//www14.smartadserver.com",video:{protocol:8}}})),e}removeInactiveBidderBids(e){for(let i=0;i<e.bids.length;i++)this.hb_config.bidders.forEach(n=>{e.bids[i]&&e.bids[i].bidder===n.name&&!n.active&&delete e.bids[i]});return e.bids=e.bids.filter(i=>i!==null&&i!=="undefined"),e.bids.length?e:null}removeNullBidParams(e){for(let i of e.bids)for(let n in i.params)i.params[n]===null&&delete i.params[n];return e}hbSizeMap(e){if(typeof e.size_mapping<"u"&&e.size_mapping.length){let i=e.size_mapping;for(let n=i.length-1;n>=0;n--){if(this.utils.screen_width>=i[n].window_size[0]){e.sizes=i[n].ad_sizes;break}if(n-1>=0){if(this.utils.screen_width<i[n].window_size[0]&&this.utils.screen_width>=i[n-1].window_size[0])return e.sizes=i[n-1].ad_sizes,e}else if(this.utils.screen_width>=i[n].window_size[0])return e.sizes=i[n].ad_sizes,e}e.sizes.length===0&&((this.config.debug||this.hb_config.debug)&&console.log(se+"Removing "+e.code+" due to empty size mapping for this window size"),e=null)}else if(e){let i;this.utils.hasJsonStructure(e.sizes)?i=JSON.parse(e.sizes):i=e.sizes;let n=!1;for(let r=0;r<i.length;r++)i[r][0]>728&&(n=!0);for(let r=0;r<i.length;r++)i[r][0]>this.utils.screen_width&&((this.config.debug||this.hb_config.debug)&&console.log(se+"Removing "+i[r][0]+" from"+e.code+" due to screen width"),i.splice(r,1),r--);for(let r=0;r<i.length;r++)this.utils.screen_width>=768&&i[r][0]<728&&n&&(i.splice(r,1),r--);e.sizes=JSON.parse(JSON.stringify(i))}return e}removeBadBidSizes(e){let i=[];return e.bids=e.bids.filter(n=>{if(i=[],typeof n.params.size<"u"){let r=[1,1];if(n.params.size[0]===r&&n.bidder==="sovrn")return!0;if(!Array.isArray(n.params.size[0])&&e.sizes.containsArray(n.params.size)?i.push(n.params.size):Array.isArray(n.params.size[0])&&(i=n.params.size.filter(s=>n.params.size[0][0]===1&&n.params.size[0][1]===1&&n.bidder==="sovrn"?!0:e.sizes.containsArray(s))),i.length)n.bidder==="ix"?n.params.size=JSON.parse(JSON.stringify(i[0])):n.params.size=JSON.parse(JSON.stringify(i));else return(this.config.debug||this.hb_config.debug)&&console.log(se+"Removing ",n," due to ad unit sizes"),!1}return!0}),e}geoFilter(e){let i=[];for(let n of this.hb_config.bidders){if(!n.geo.length){(this.config.debug||this.hb_config.debug)&&console.log(se+"Bidder "+n.name+" has no geo filtering, keeping and moving to the next one."),i.push(n.name);continue}n.geo.length>0&&n.geo.includes(this.utils.window.OCM.geo.country)&&((this.config.debug||this.hb_config.debug)&&console.log(se+"Keeping "+n.name+" due to country = "+this.utils.window.OCM.geo.country),i.push(n.name))}return i.length&&((this.config.debug||this.hb_config.debug)&&console.log(se+"Keeping ",i," due to country = "+this.utils.window.OCM.geo.country),e.bids=e.bids.filter(n=>i.includes(n.bidder))),e}buildMediaTypes(e){let i={};return typeof e.media_types<"u"?(e.media_types.includes("banner")&&(i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes}),e.media_types.indexOf("native")>-1&&(i.native=e.native,this.utils.hasJsonStructure(i.native.image.sizes)&&(i.native.image.sizes=JSON.parse(i.native.image.sizes))),(e.media_types.indexOf("videoInArticle")>-1||e.media_types.indexOf("video")>-1)&&(i.video={},i.video.context="outstream",this.utils.hasJsonStructure(e.video.playerSize)?i.video.playerSize=this.utils.is_mobile?[[300,169]]:JSON.parse(e.video.playerSize):i.video.playerSize=this.utils.is_mobile?[[300,169]]:e.video.playerSize,i.video.mimes=["video/webm","video/mp4","application/javascript"],i.video.pos=1,i.video.delivery=[2],i.video.minduration=5,i.video.maxduration=30,i.video.protocols=[2,3,5,6,7,8],i.video.api=[1,2],i.video.skip=0,i.video.startdelay=0,i.video.linearity=1,i.video.placement=i.video.playerSize[0][0]===640&&!this.utils.is_mobile?3:2,i.video.playbackmethod=[2],i.video.playbackend=1,i.video.renderer={url:"https://cdn.orangeclickmedia.com/tech/libs/ima-ad-player.min.js",backupOnly:!1,render:n=>{try{let r=this.getAdDivElement(e.code);if(!r){console.error("Could not find element to render outstream ad",n);return}new bc(this.utils,r,{width:i.video.playerSize[0][0],height:i.video.playerSize[0][1]},n).run()}catch(r){console.error(r),console.error("Error in ad rendering!")}}})):i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes},e.mediaTypes=i,e}adjustBidderTimeout(e){this.hb_config.bidderTimeout=Number(this.hb_config.bidderTimeout),(this.config.debug||this.hb_config.debug)&&console.log(se+"bidderTimeout = "+this.hb_config.bidderTimeout),this.utils.is_mobile&&(e?this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout*.5:this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout,(this.config.debug||this.hb_config.debug)&&console.log(se+"Mobile device, so bidderTimeout = ",this.hb_config.bidderTimeout))}loadPrebidLib(){(this.config.debug||this.hb_config.debug)&&console.log(se+"Loading OCM prebid library...");let e=this.utils.window.document.createElement("script");e.type="text/javascript",e.async=!0,e.src=this.utils.hostname.includes("youfly.com")?"https://cdn.orangeclickmedia.com/tech/libs/ocmpb-opti.js":"https://cdn.orangeclickmedia.com/tech/libs/ocmpb.js";let i=this.utils.window.document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}loadAdformCookie(){let e=this.utils.window.document.createElement("img");e.src="https://track.adform.net/Serving/TrackPoint/?pm=2776384",e.setAttribute("style","display:none"),this.utils.contentLoaded().then(()=>{try{(this.utils.doc_body||this.utils.window.document.body).insertAdjacentElement("beforeend",e)}catch(i){console.error(i)}})}prebidEventListeners(){(this.config.debug||this.hb_config.debug)&&console.log(se+"Setting up Prebid events for HB"),this.config.log&&(this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderFailed",e=>{e.bid.vastXml&&delete e.bid.vastXml,this.utils.log.error({service:"header_bidding",msg:"adRenderFailed",error:e})})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("auctionDebug",e=>{this.utils.calculateLoggingSamples();try{if(e.type!=="ERROR"&&e.type!=="WARNING")return;let i="";if(e.arguments.length){for(let n=0;n<e.arguments.length;n++)if(e.arguments[n])if(typeof e.arguments[n]=="string"&&e.arguments[n].indexOf("Invalid bid sent to bidder")>-1){let r=e.arguments[n].split(": "),s=JSON.parse(r[1]);i+="Invalid bid sent to bidder "+JSON.stringify({bidder:s.bidder,params:s.params,adUnitCode:s.adUnitCode})}else i+=JSON.stringify(e.arguments[n])}if(i==="")return;for(let n=0;n<this.utils.log_blacklist.length;n++)if(i.indexOf(this.utils.log_blacklist[n])>-1)return;e.type==="ERROR"?this.utils.willSampleErrors&&this.utils.log.error({service:"header_bidding",msg:"auctionDebug ERROR",error:i}):this.utils.willSampleWarnings&&this.utils.log.warning({service:"header_bidding",msg:"auctionDebug WARNING",error:i})}catch(i){console.error("inside auctionDebug listener",i)}})}))}gptEventListeners(){(this.config.debug||this.hb_config.debug)&&console.log(se+"Setting up GPT events for HB"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{e.slot.getAdUnitPath().indexOf("inread_pb")>-1&&e.isEmpty&&typeof this.utils.window.oopb<"u"&&this.utils.window.oopb()})})}setupRealTimeData(){return this.hb_config?.adsqRTDModuleEnabled?{auctionDelay:this.utils.window.OCM.ad_units.length===1&&this.utils.window.OCM.ad_units[0].code==="ocm-gone-mad"?1500:700,dataProviders:[{name:"adsquirrel",waitForIt:!0,params:{}}]}:{}}setupAnalytics(){typeof this.hb_config.analytics<"u"&&(this.hb_config.analytics.indexOf("ocmpba")>=0&&this.analytics_adapters.push({provider:"ocmpba"}),this.hb_config.analytics.indexOf("ga")>=0&&this.analytics_adapters.push({provider:"ga",options:{enableDistribution:!1}}),this.hb_config.analytics.indexOf("roxot")>=0&&this.analytics_adapters.push({provider:"roxot",options:{publisherIds:["6e522d36-dae0-45bd-9d3c-de88ef4334ee"]}}))}setupBidderSettings(e){(this.config.debug||this.hb_config.debug)&&console.log(se+"Setting up adserverTargeting & bidder settings");let i={standard:{suppressEmptyKeys:!0,adserverTargeting:[{key:"hb_auction",val:l=>l.auctionId},{key:"infi_article_count",val:l=>this.utils.window.OCM?.infi_article_count.toString()},{key:"hb_bidder",val:l=>l.bidderCode},{key:"hb_adid",val:l=>l.adId},{key:"hb_pb",val:l=>e?l.pbCg:l.pbHg},{key:"hb_size",val:l=>l.getSize()},{key:"hb_format",val:l=>l.mediaType},{key:"hb_cpm",val:l=>l.cpm},{key:"hb_deal",val:l=>l.dealId},{key:"hb_source",val:l=>l.source},{key:"hb_sf",val:l=>"false"},{key:"hb_cache_id",val:l=>l.videoCacheKey},{key:"hb_uuid",val:l=>l.videoCacheKey}]}},n,r=1,s="";if(typeof this.hb_config.bidders<"u")for(n=0;n<this.hb_config.bidders.length;n++)r=parseFloat(this.hb_config.bidders[n].bid_cpm_adjust),s=this.hb_config.bidders[n].name,i[this.hb_config.bidders[n].name]={storageAllowed:!0,bidCpmAdjustment:(l,a)=>{if(Object.keys(a).length===1)return l;let u=l;switch(a.bidderCode){case"smartadserver":a.netRevenue===!1&&a.dealId!==""&&(u=l*.9);break;case"improvedigital":a.isNet===!1&&a.dealId!==""&&(u=l*.9);break;case"adform":a.dealId&&(u=l>3.5&&a.height===1&&a.width===1?3.5:l*.8);break;case"pubmatic":a.dealId&&(u=l*.8);break;default:u=l;break}return u}};return i}getAdDivElement(e){let i=null;if(this.utils.config.services.header_bidding.functionality==="no_adserver")return this.utils.window.document.getElementById(e);if(this.utils.config.services.lazyload.active)i=this.utils.window.document.querySelector('[data-oau-code="'+e+'"]');else{let n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);n.length&&typeof n[0]=="object"&&(i=this.utils.window.document.getElementById(n[0].getSlotElementId()))}return i}directRenderBids(e){for(let i in e){(this.config.debug||this.hb_config.debug)&&console.log(se+"Found bid for #"+i);let n=i,r=this.utils.window.document.getElementById(n);if(r){(this.config.debug||this.hb_config.debug)&&console.log(se+"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let l=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if((this.config.debug||this.hb_config.debug)&&console.log(se+"adServerTargeting",l),l&&l.hb_adid){(this.config.debug||this.hb_config.debug)&&console.log(se+"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(c=>c.remove()),r.append(s);let u=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(u,l.hb_adid),setTimeout(()=>{u.body&&(u.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),u.body.style.margin="0px !important")},10),r.setAttribute("style","display:block;overflow:hidden;margin:0 auto;")}}else(this.config.debug||this.hb_config.debug)&&console.log(se+"Ad div #"+n+" not found")}}}});var bs=H((th,vs)=>{Ki();var yc=Wi(),ee="[OCM][LazyLoad] ";vs.exports=class{utils;config;ll_config;connection;include_observer;load_observer;custom_observers;include_offset;load_offset;offset_custom_observers;hb;scroll_direction;last_scroll_top;ticking;constructor(e,i){this.utils=e,this.config=i,this.ll_config=i.services.lazyload,this.scroll_direction="down",this.last_scroll_top=0,this.ticking=!1,this.include_offset=this.ll_config.include_offset,this.load_offset=this.ll_config.load_offset,this.offset_custom_observers=this.ll_config.load_offset,this.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,this.utils.serviceStates.header_bidding&&this.utils.allowPageType(this.config.services.header_bidding.page_types)?((this.config.debug||this.ll_config.debug)&&console.log(ee+"HB is active, instantiating HB"),this.hb=new yc(e,i)):this.hb=null}async run(){(this.config.debug||this.ll_config.debug)&&console.log(ee+"running lazy loaded ads..."),this.hb&&((this.config.debug||this.ll_config.debug)&&console.log(ee+"HB is active, instantiating HB"),(!this.utils.browser.isSafari||!this.utils.browser.isFacebookApp||!this.utils.browser.isIphone)&&this.networkInfo(),await this.hb.prepare(!0)),this.calculateDetectionPixels(this.ll_config.load_offset,!1),this.ll_config.version===1?await this.v1():this.utils.browser.isSafari?await this.v1():(await this.setupObservers(),this.v2())}async v1(){(this.config.debug||this.ll_config.debug)&&console.log(ee+"v1"),await this.utils.gptPubAdsReady(),this.detectNextAdUnits(),this.setupDetectionEvent()}v2(){(this.config.debug||this.ll_config.debug)&&console.log(ee+"v2"),this.utils.gptPubAdsReady().then(()=>{let e=()=>{let i=this.utils.window.googletag.pubads().getSlots().map(n=>{let r=this.utils.window.document.querySelector('[id="'+n.getSlotElementId()+'"]:not([data-oau-code]):not([data-lazyloaded-by-ocm]):not([data-lazyincluded-by-ocm])');return r?(r.setAttribute("data-oau-code",n.getAdUnitPath()),r):null});if(i=i.filter(n=>n!=null),i.length)for(let n=0;n<i.length;n++)this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length&&this.ll_config.ad_load_offsets.filter(r=>r.path===i[n].getAttribute("data-oau-code")&&r.offset===-1).length?((this.config.debug||this.ll_config.debug)&&console.log(ee+"ll excluded element, combust instantly",i[n]),i[n].setAttribute("data-lazyincluded-by-ocm",""),this.combust([i[n]])):i[n].hasAttribute("data-lazyincluded-by-ocm")||this.include_observer.observe(i[n]);setTimeout(e,250)};e()})}async setupObservers(){return new Promise((e,i)=>{this.custom_observers=[];let n={root:null,rootMargin:this.include_offset&&this.include_offset!=-1?String(this.include_offset)+"px 0px":"0px 0px"};(this.config.debug||this.ll_config.debug)&&console.log(ee+"Include observer config: ",n);let r={root:null,rootMargin:this.load_offset&&this.load_offset!=-1?String(this.load_offset)+"px 0px":"0px 0px"};if((this.config.debug||this.ll_config.debug)&&console.log(ee+"Load observer config: ",r),IntersectionObserver.prototype.POLL_INTERVAL=100,this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length)for(let s of this.ll_config.ad_load_offsets){this.offset_custom_observers=s.offset&&s.offset>0?s.offset:this.ll_config.load_offset;let l=this.calculateDetectionPixels(s.offset,!0),a=[];if(!s.path||s.path==="")continue;let u={root:null,rootMargin:l&&l!=-1?String(l)+"px 0px":"0px 0px"};(this.config.debug||this.ll_config.debug)&&console.log(ee+"Custom observer config: ",u),this.custom_observers[s.path]=new IntersectionObserver((c,m)=>{let p=!1;c.forEach(h=>{typeof h.isVisible>"u"&&(h.isVisible=!0),h.isIntersecting&&((this.config.debug||this.ll_config.debug)&&console.log("intersecting",h.target.getAttribute("data-oau-code"),h.target.hasAttribute("data-lazyincluded-by-ocm")),m.unobserve(h.target),a.push(h.target),p=!0)}),p&&this.combust(a)},u)}this.load_observer=new IntersectionObserver((s,l)=>{let a=!1,u=[];s.forEach(c=>{typeof c.isVisible>"u"&&(c.isVisible=!0),c.isIntersecting&&(l.unobserve(c.target),u.push(c.target),a=!0)}),a&&this.combust(u)},r),this.include_observer=new IntersectionObserver((s,l)=>{s.forEach(a=>{typeof a.isVisible>"u"&&(a.isVisible=!0),a.isIntersecting&&(a.target.hasAttribute("data-lazyincluded-by-ocm")||(a.target.setAttribute("data-lazyincluded-by-ocm",""),this.load_observer.observe(a.target))),a.target.hasAttribute("data-lazyincluded-by-ocm")&&l.unobserve(a.target)})},n),e(!0)})}async combust(e){e=e.filter(l=>l),this.utils.window.OCM.pb_done=!1,(this.config.debug||this.ll_config.debug)&&console.log(ee+"Combusting..",e);let i=Array.from(this.utils.window.document.querySelectorAll('div[id^="ocm_sticky_"][data-lazyincluded-by-ocm]'));e=i.length?e.concat(i):e,e.length&&e.forEach(l=>{l.removeAttribute("data-lazyincluded-by-ocm"),l.setAttribute("data-lazyloaded-by-ocm","")});let n=e.map(l=>l.getAttribute("data-oau-code"));n=n.filter((l,a,u)=>u.indexOf(l)===a);let r=e.map(l=>l.getAttribute("id"));await this.utils.gptPubAdsReady();let s=this.utils.window.googletag.pubads().getSlots().filter(l=>r.includes(l.getSlotElementId())?!0:null);if(!s.length){(this.config.debug||this.ll_config.debug)&&console.warn(ee+"No lazyincluded-by-com ad units found. Aborting ad calls.");return}if((this.config.debug||this.ll_config.debug)&&(console.log(ee+"includedAdUnits",n),console.log(ee+"includedAdSlots",s)),this.hb&&this.config.services.header_bidding.bidderTimeout>1){(this.config.debug||this.ll_config.debug)&&console.log(ee+"HB is active, refreshing ads");let l=this.findAdUnitsInHb(n);l.length?((this.config.debug||this.ll_config.debug)&&console.log(ee+"Found ad unit configuration in HB, running hbRefresh"),await this.hbRefresh(l,s)):((this.config.debug||this.ll_config.debug)&&console.log(ee+"No ad unit configuration found in HB, running gptRefresh"),this.gptRefresh(s))}else(this.config.debug||this.ll_config.debug)&&console.log(ee+"refreshing ad slots"),this.gptRefresh(s)}findAdUnitsInHb(e){let i=[];return i=this.utils.window.OCM.ad_units.map(n=>{if(e.indexOf(n.code)>-1)return n}).filter(n=>n!==void 0),i}async hbRefresh(e,i){this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.removeAdUnit(),this.utils.window.ocmpbjs.addAdUnits(e),this.utils.window.ocmpbjs.requestBids({adUnitCodes:e.map(n=>n.code),bidsBackHandler:(n,r,s)=>{this.hb.initAdServer(i,!0)},timeout:this.hb.bidderTimeout})}catch(n){console.error(n)}})}gptRefresh(e){this.utils.window.googletag.cmd.push(()=>{for(let i of e){let n=this.utils.window.document.getElementById(i.getSlotElementId());n.removeAttribute("data-lazyincluded-by-ocm"),n.setAttribute("data-lazyloaded-by-ocm","")}this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})})}calculateDetectionPixels(e,i){let n=this.utils.window.navigator.userAgent.indexOf("Safari")!==-1||this.utils.window.navigator.userAgent.indexOf("Firefox")!==-1||this.utils.window.navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode;if((this.config.debug||this.ll_config.debug)&&console.info(ee+"isSafariOrFirefoxOrIE is:",n),!(!n&&(typeof this.connection>"u"||typeof this.connection.effectiveType>"u"))){if(n&&(typeof this.connection>"u"||typeof this.connection.effectiveType>"u"))(this.config.debug||this.ll_config.debug)&&console.info(ee+"flagForCustomOffset is:",i),i||(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(ee+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=this.include_offset*2),(this.config.debug||this.ll_config.debug)&&console.log(ee+"Set include_offset to "+this.include_offset+"px")),this.load_offset=e,(this.config.debug||this.ll_config.debug)&&console.info(ee+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=this.load_offset*2),(this.config.debug||this.ll_config.debug)&&console.log(ee+"Set load_offset to "+this.load_offset+"px");else{if((this.config.debug||this.ll_config.debug)&&console.info(ee+"flagForCustomOffset is:",i),!i){switch(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(ee+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=this.include_offset*2),this.connection.effectiveType){case"2g":this.include_offset=Math.round(this.include_offset*5);break;case"3g":this.include_offset=Math.round(this.include_offset*1.38);break;default:break}(this.config.debug||this.ll_config.debug)&&console.log(ee+"Set include_offset to "+this.include_offset+"px")}switch(this.load_offset=e,(this.config.debug||this.ll_config.debug)&&console.info(ee+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=this.load_offset*2),this.connection.effectiveType){case"2g":this.load_offset=Math.round(this.load_offset*5);break;case"3g":this.load_offset=Math.round(this.load_offset*1.38);break;default:break}(this.config.debug||this.ll_config.debug)&&console.log(ee+"Set load_offset to "+this.load_offset+"px")}return this.load_offset}}networkInfo(){typeof this.connection<"u"&&typeof this.connection.effectiveType<"u"&&((this.config.debug||this.ll_config.debug)&&this.connection.addEventListener("change",this.logNetworkInfo.apply(this,[])),this.connection.addEventListener("change",()=>{this.calculateDetectionPixels(this.offset_custom_observers?this.offset_custom_observers:this.ll_config.load_offset,!1)}))}logNetworkInfo(){this.ll_config.debug&&(console.log(ee+"     downlink: "+this.connection.downlink+"Mb/s"),console.log(ee+"          rtt: "+this.connection.rtt+"ms"),console.log(ee+"========================================="))}setupDetectionEvent(){["scroll","size"].forEach(i=>{this.utils.window.addEventListener(i,this.utils.throttle(()=>{let n=this.utils.window.pageYOffset||document.documentElement.scrollTop;n>this.last_scroll_top?this.scroll_direction="down":this.scroll_direction="up",this.last_scroll_top=n<=0?0:n,this.ticking||(this.utils.window.requestAnimationFrame||setTimeout)(()=>{this.detectNextAdUnits(),this.ticking=!1}),this.ticking=!0},1e3))})}detectNextAdUnits(){(this.config.debug||this.ll_config.debug)&&console.log(ee+"Detecting next ad units");let e=[],i=[],n=[];e=googletag.pubads().getSlots();let r;for(let s of e)r=document.getElementById(s.getSlotElementId()),r&&(i.push(r),r.hasAttribute("data-oau-code")||r.setAttribute("data-oau-code",s.getAdUnitPath()));for(let s of i)!s.hasAttribute("data-lazyincluded-by-ocm")&&!s.hasAttribute("data-lazyloaded-by-ocm")&&this.lazyIncludeIt(s)!==!1&&s.setAttribute("data-lazyincluded-by-ocm","");n=Array.from(this.utils.window.document.querySelectorAll("div[data-lazyincluded-by-ocm]")),typeof n[0]<"u"&&this.lazyLoadIt(n[0])!==!1&&this.combust(n)}lazyIncludeIt(e){let i;if(e.style.display==="none"?(e.style.display="block",i=e.getBoundingClientRect(),e.style.display="none"):i=e.getBoundingClientRect(),this.scroll_direction==="down"){if(i.top>=0&&i.top<=this.utils.screen_height+this.ll_config.include_offset)return i.top}else if(this.scroll_direction==="up"&&i.bottom>=this.ll_config.include_offset*-1)return i.top;return!1}lazyLoadIt(e){let i;e.style.display==="none"?(e.style.display="block",i=e.getBoundingClientRect(),e.style.display="none"):i=e.getBoundingClientRect();let n=this.ll_config.load_offset,r=this.ll_config.ad_load_offsets.filter(s=>s.path===e.getAttribute("data-oau-code"));if(r.hasOwnProperty("offset")&&(n=r.offset),this.scroll_direction==="down"){if(i.top>=0&&i.top<=this.utils.screen_height+n)return i.top}else if(this.scroll_direction==="up"&&i.bottom>=n*-1)return i.top;return!1}}});var ws=H((ih,ys)=>{var wc="[OCM][FouAnalytics] ",Sc=(t,e)=>{let i=t.window.document.createElement("script");i.src="https://eu.b2c.com/api/init-224mtm6aorewjg83k2h.js",i.async=!0,i.setAttribute("data-cfasync","true"),t.doc_head.append(i),(e.debug||e.services.fou_analytics.debug)&&console.log(wc+"Loaded")};ys.exports=Sc});var xs=H((rh,Ss)=>{var Vt="[OCM][Outbrain] ";Ss.exports=class{utils;config;ob_config;constructor(e,i){this.utils=e,this.config=i,this.ob_config=this.utils.is_mobile?i.services.outbrain.mobile:i.services.outbrain.desktop}run(){if(!this.ob_config.enable)return;(this.config.debug||this.config.services.outbrain.debug)&&console.log(Vt+"Running...");let e=this.utils.determineInjectionTarget(this.ob_config.conditions.selector,this.ob_config.conditions.position,this.ob_config.conditions.count_gt,this.ob_config.conditions.word_count,this.ob_config.conditions.words_gt);if(e){let i=document.createElement("div");i.classList.add("OUTBRAIN"),i.setAttribute("data-ob-contentUrl",window.location.href),i.setAttribute("data-widget-id",this.ob_config.widgetId),i.setAttribute("data-ob-installation-key",this.ob_config.installationKey);let n=this.ob_config.styles,r=this.ob_config.classes.split(" ");n&&n!==""&&i.setAttribute("style",n),r.length&&(i.classList.add("OUTBRAIN"),i.classList.add(r));let s=document.createElement("script");s.async="async",s.src="https://widgets.outbrain.com/outbrain.js",this.utils.injectTag(e,i,this.ob_config.conditions.place)&&((this.config.debug||this.config.services.outbrain.debug)&&console.log(Vt+"Injected OUTBRAIN div in "+this.ob_config.conditions.place+" of ",e),this.utils.injectTag(e,s,this.ob_config.conditions.place)&&(this.config.debug||this.config.services.outbrain.debug)&&console.log(Vt+"Injected OUTBRAIN script in "+this.ob_config.conditions.place+" of ",e))}else(this.config.debug||this.ob_config.outbrain.debug)&&console.log(Vt+"Could not find defined selector: "+this.ob_config.selector)}}});var Es=H((oh,_s)=>{_s.exports=class{config;outstream_config;utils;constructor(e,i){this.config=e,this.outstream_config=e.services.outstream,this.utils=i}run(){this.outstream_config.hasOwnProperty("rules")&&this.ruleActions();let e=this.outstream_config.exclude_urls,i=e.length;for(let n=0;n<i.length;n++)if(this.utils.window.location.href.indexOf(e[n].url)>-1)return;this.outstream_config.hasOwnProperty("article_identifier")&&(this.outstream_config.article_identifier===null&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"),this.utils.window.document.querySelector(this.outstream_config.article_identifier)!==null&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"))}ruleActions(){for(let e of this.outstream_config.rules){let i=e.type,n=e.key,r=e.values,s=e.deals,l=document.getElementsByTagName("script");for(let a=0;a<l.length;a++){let u=l[a].innerHTML;if(/(setTargeting\()/.test(u)){let c=u.match(/(setTargeting\()(.+|\n*|\t*)(\))/g);for(let m=0;m<c.length;m++){let p=JSON.parse(c[m].replace(/'/g,'"').replace("setTargeting(","[").replace(")","]"));if(p[0]===n){for(let h=0;h<r.length;h++)if(p[1].indexOf(r[h])>=0){let f=Math.round(new Date().getTime()/1e3);for(let v=0;v<s.length;v++)this.utils.loadImage("https://t.window.teads.Tv/"+i+"?i="+s[v]+"&rnd="+f,"body")}}}}}}}runDemoInread(e){e.loadStyle(".teads-inread {max-width: 650px!important; margin: 10px auto;} ");var i=e.getParameterByName("vast_url")||"https://s8t.window.teads.Tv/vast/6753877076819280",n=112951,r=1,s=!1,l=!1,a="no";e.getParameterByName("view_to_start")==1&&(r=122779),e.getParameterByName("smart")==1&&(r=122781,s=!0,this.utils.window.DO_BYPASS_DO_FORCE_SMART=!0),e.getParameterByName("slider")==1&&(r=122782,l=!0,s=!0);var u="inread";this.utils.window._ttp={},this.utils.window._ttp[n]=[{slider:{allow_corner_position:!0,allow_top_position:!0},pid:r,format:u,parentWindow:!1,slot:{selector:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.selector,minimum:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.minimum,btf:!1,css:"margin: 0px auto 25px; max-width: 650px !important;"}}],this.utils.window._tta={},this.utils.window._tta[n]=[{type:"VastUrl",content:i,portfolio_item_id:1,settings:{values:{pageId:n,placementId:r,placementFormat:u,threshold:50,adType:"video"},components:{credits:{display:!1,text:"",link:"#"},closeButton:{display:!0}},behaviors:{onlyNative:!1,smartPosition:{corner:s,top:s},slider:{enable:l},videoPause:a}}}];var c=document.createElement("script");c.src="//a.teads.tv/media/format/v3/teads-format.js",document.head.appendChild(c)}}});var Fs=H((lh,As)=>{var Ee="[OCM][StoryTeller] ",xc="//cdn.orangeclickmedia.com/tech/libs/deckard-cain.js";As.exports=class{utils;config;st_config;conditions;stickyConfig;selector;constructor(e,i){this.utils=e,this.config=i,this.st_config=i.services.story_teller,this.conditions=e.is_mobile?this.st_config.mobile.conditions:this.st_config.desktop.conditions,this.stickyConfig=e.is_mobile?this.st_config.mobile.sticky:this.st_config.desktop.sticky,this.selector=null}run(){(this.config.debug||this.st_config.debug)&&console.log(Ee+"Running..."),this.setGlobals(),this.loadIma().then(()=>{if(!this.utils.allowPageType(this.conditions.page_types)){(this.config.debug||this.st_config.debug)&&console.log(Ee+"Page type not allowed, terminating process",this.conditions.page_types);return}this.getStories().then(()=>{let e=this.createWrapper(),i=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt);if(!i){(this.config.debug||this.st_config.debug)&&console.info(Ee+"selector NOT found, stopping process",i);return}e&&(this.utils.injectTag(i,e,this.conditions.place),this.utils.waitFor("ADSQ.response",()=>{(this.config.debug||this.st_config.debug)&&this.utils.window?.ADSQ?.response&&console.log(Ee+"ADSQ.response",this.utils.window?.ADSQ?.response),this.populateWrapper(e)},50,()=>{this.populateWrapper(e)}))}).catch(()=>{this.utils.window.OCM.ST.stories=null,this.utils.window.OCM.ST.video_url="//cdn.orangeclickmedia.com/videos/clouds-720.mp4",this.utils.window.OCM.ST.source="video"})})}getStories(){return new Promise((e,i)=>{if(this.st_config.source==="adsquirrel")this.fetchStoriesFromAdsquirrel().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(Ee+"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(Ee+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})});else if(this.st_config.source==="rss"){if(this.st_config.stories_type==="video"){e();return}this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(Ee+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})}else i()})}fetchStoriesFromRss(){return new Promise(async(e,i)=>{(!this.st_config.rss_url||this.st_config.rss_url==="")&&i(),this.utils.parseRss(this.st_config.rss_url).then(n=>{this.utils.window.OCM.ST.stories=[],n.forEach(r=>{(this.config.debug||this.st_config.debug)&&console.log(Ee+"Pushing to stories [",r.title,r.link,r.image,"]"),this.utils.window.OCM.ST.stories.push({url:r.link,title:r.title,img:r?.image})}),e()}).catch(n=>{console.error(n),i()})})}fetchStoriesFromAdsquirrel(){return new Promise((e,i)=>{this.utils.waitFor("ADSQ",()=>{if(this.utils.window.ADSQ.response===null||this.utils.window.ADSQ.response.classified_as===null){(this.config.debug||this.st_config.debug)&&console.warn(Ee+"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),i();return}let n="hostname="+this.utils.window.location.host+"&",r="classification="+encodeURIComponent(this.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&",s="";s+=n,s+=r,s=s.substring(0,s.length-1),s=btoa(s),fetch("https://api.adsquirrel.ai/stories?q="+s,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then(l=>l.json()).then(l=>{this.utils.window.OCM.ST.stories=l?.filter(a=>a.url!==this.utils.window.location.protocol+"//"+this.utils.window.location.host+this.utils.window.location.pathname),typeof this.utils.window.OCM.ST.stories>"u"&&((this.config.debug||this.st_config.debug)&&console.warn(Ee+"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i()),(this.config.debug||this.st_config.debug)&&console.log(Ee+"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.warn(Ee+"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i()})},100,()=>{(this.config.debug||this.st_config.debug)&&console.warn(Ee+"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i()})})}setGlobals(){(this.config.debug||this.st_config.debug)&&console.log(Ee+"Setting globals"),this.utils.window.OCM.ST={ad_tag_url:this.st_config.ad_tag_url,delay_first_ad_request:this.st_config.delay_first_ad_request,load_offset:this.st_config.load_offset,source:this.st_config.source,rss_url:this.st_config.rss_url,stories_type:this.st_config.stories_type,video_url:this.st_config.video_url,captions_url:this.st_config.captions_url,debug:this.config.debug||this.st_config.debug,color:this.st_config.color,link_target:this.st_config.link_target,link_text:this.st_config.link_text,branding:this.st_config.branding,sticky:this.stickyConfig,correlator:new Date().getTime(),device:this.utils.is_mobile?"mobile":"desktop"}}createWrapper(){(this.config.debug||this.st_config.debug)&&console.log(Ee+"Creating wrapper div#ocm-st"),this.utils.loadStyle("#ocm-st { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }");let e=this.utils.window.document.createElement("div");e.id="ocm-st";let i=this.utils.is_mobile?this.st_config.mobile.styles:this.st_config.desktop.styles,n=this.utils.is_mobile?this.st_config.mobile.classes:this.st_config.desktop.classes;return i&&i!==""&&(e.style=i),n&&n!==""&&e.setAttribute("class",n),e}loadIma(){return new Promise((e,i)=>{try{let n=this.utils.window.document.getElementsByTagName("script")[0],r=this.utils.window.document.createElement("script");r.src=this.config.debug||this.st_config.debug?"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js":"//imasdk.googleapis.com/js/sdkloader/ima3.js",n.parentNode.insertBefore(r,n),r.onload=()=>{e()}}catch{i()}})}populateWrapper(e){(this.config.debug||this.st_config.debug)&&console.log(Ee+"Populating #ocm-st");let i=this.utils.window.document.createElement("script");i.src=xc,e.append(i)}}});var Ps=H((ch,Cs)=>{var oe="[OCM][StoryTellerV2] ",_c="//cdn.orangeclickmedia.com/tech/libs/deckard-cain-v2.js",Ec=qi(),Is=Oi();Cs.exports=class{utils;config;stConfig;conditions;stickyConfig;selector;expirationTime;now;constructor(e,i){this.stVisitedURLs=[],this.utils=e,this.config=i,this.stConfig=i.services.story_teller_v2,this.conditions=e.is_mobile?this.stConfig.mobile.conditions:this.stConfig.desktop.conditions,this.stickyConfig=e.is_mobile?this.stConfig.mobile.sticky:this.stConfig.desktop.sticky,this.stickyBottomHeight=0,this.isIntersecting=!1,this.isMounted=!1,this.selector=null,this.now=new Date().getTime();let n=7*24*60*60*1e3;this.expirationTime=this.now+n,this.eId=Ec.v4(),this.ANALYTICS_TIMEOUT=15*60*1e3}run(){if((this.config.debug||this.stConfig.debug)&&console.log(oe+"Running..."),this.stConfig.enable_analytics&&((this.config.debug||this.stConfig.debug)&&console.log(oe+"Analytics are enabled"),this.startTrackAnalytics()),this.getVisitedStories(),this.setWindowGlobals(),!this.utils.allowPageType(this.conditions.page_types)){(this.config.debug||this.stConfig.debug)&&console.log(oe+"Page type not allowed, terminating process",this.conditions.page_types);return}this.getStories().then(()=>{this.filterStories();let e=this.createWrapper(),i=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt);if(!i){(this.config.debug||this.stConfig.debug)&&console.info(oe+"selector NOT found, stopping process",i);return}e&&(this.utils.injectTag(i,e,this.conditions.place),this.utils.waitFor("ADSQ.response",()=>{(this.config.debug||this.stConfig.debug)&&this.utils.window?.ADSQ?.response&&console.log(oe+"ADSQ.response",this.utils.window?.ADSQ?.response),this.handleBottomSticky(),this.populateWrapper(e)},50,()=>{(this.stConfig.source==="rss"||(this.stConfig.source==="adsquirrel"&&this.utils.window?.ADSQ?.response)(this.stConfig.source==="adsquirrel"&&this.stConfig.rss_url!==""))&&(this.handleBottomSticky(),this.populateWrapper(e))}))}).catch(()=>{this.utils.window.OCM.ST.stories=[]})}initAnalytics(){if(this.utils.window&&this.utils.window.localStorage)try{let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[];e.push({id:this.eId,o:Is.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils.window.OCM._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}),(this.config.debug||this.stConfig.debug)&&console.log(oe+"Initializing track analytics: ",e),this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(e)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId)}catch{let i=[{id:this.eId,o:Is.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils.window.OCM._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}];(this.config.debug||this.stConfig.debug)&&console.log(oe+"Initializing track analytics: ",i),this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId)}}startTrackAnalytics(){if(this.utils.window&&this.utils.window.localStorage){let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[],i=[...e],n=[];for(let r of e)r.t+this.ANALYTICS_TIMEOUT<=this.now&&(i=i.filter(s=>s.id!==r.id),r&&(r.nc&&r.nc.length>0||r.pc&&r.pc.length>0||r.vs&&r.vs.length>0||r.r&&r.r.length>0||r.ls&&r.ls.length>0)&&n.push(r));n&&n.length>0?fetch("https://storyteller-events-worker.ocm.workers.dev/st-events",{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({events:n})}).then(r=>{this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i))}).catch(r=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Failed to store st events: ",r)}).finally(()=>{this.initAnalytics()}):this.initAnalytics()}}getVisitedStories(){let e=this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,i=this.utils.window.localStorage.getItem("osturls");i||(this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})),i=this.utils.window.localStorage.getItem("osturls"));let n=JSON.parse(i);n&&this.now>=n.exp&&this.utils.window.localStorage.removeItem("osturls"),this.stVisitedURLs=n?n.urls:[],this.utils.window.location.href.includes("ref=storyteller")&&!this.stVisitedURLs.includes(e)&&(this.stVisitedURLs.push(e),this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})))}filterStories(){if(this.utils.window&&this.utils.window.localStorage.getItem("osturls")){let e=this.utils.window.OCM.ST.stories.filter(i=>!this.stVisitedURLs.includes(i.url));e.length>4&&(this.utils.window.OCM.ST.stories=JSON.parse(JSON.stringify(e)))}}getStories(){return new Promise((e,i)=>{this.stConfig.source==="adsquirrel"?this.fetchStoriesFromAdsquirrel().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})}):this.stConfig.source==="rss"?this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Failed fetchStoriesFromRss, falling back to cloud video"),i()}):i()})}fetchStoriesFromRss(){return new Promise(async(e,i)=>{(!this.stConfig.rss_url||this.stConfig.rss_url==="")&&i(),this.utils.parseRss(this.stConfig.rss_url).then(n=>{this.utils.window.OCM.ST.stories=[],n.forEach(r=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Pushing to stories [",r.title,r.link,r.image,"]"),this.utils.window.OCM.ST.stories.push({url:r.link,title:r.title,img:r?.image})}),e()}).catch(()=>{i()})})}fetchStoriesFromAdsquirrel(){return new Promise((e,i)=>{this.utils.waitFor("ADSQ",()=>{if(this.utils.window.ADSQ.response===null||this.utils.window.ADSQ.response.classified_as===null){(this.config.debug||this.stConfig.debug)&&console.log(oe+"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),i();return}let n="hostname="+this.utils.window.location.host+"&",r="classification="+encodeURIComponent(this.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&",s="";s+=n,s+=r,s=s.substring(0,s.length-1),s=btoa(s),fetch("https://api.adsquirrel.ai/stories?q="+s,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then(l=>l.json()).then(l=>{this.utils.window.OCM.ST.stories=l?.filter(a=>a.url!==this.utils.window.location.protocol+"//"+this.utils.window.location.host+this.utils.window.location.pathname),typeof this.utils.window.OCM.ST.stories>"u"&&((this.config.debug||this.stConfig.debug)&&console.log(oe+"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i()),(this.config.debug||this.stConfig.debug)&&console.log(oe+"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i()})},100,()=>{(this.config.debug||this.stConfig.debug)&&console.log(oe+"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i()})})}setWindowGlobals(){(this.config.debug||this.stConfig.debug)&&console.log(oe+"Setting window globals"),this.utils.window.OCM.ST={midRollTime:this.stConfig.midRollTime||5,playerTagId:this.stConfig.playerTagId,publisherId:this.stConfig.publisherId,source:this.stConfig.source,rss_url:this.stConfig.rss_url,debug:this.config.debug||this.stConfig.debug,redirect_target:this.stConfig.redirect_target,branding:this.stConfig.branding,sticky:this.stickyConfig,device:this.utils.is_mobile?"mobile":"desktop",enable_analytics:this.stConfig.enable_analytics||!1}}createWrapper(){(this.config.debug||this.stConfig.debug)&&console.log(oe+"Creating wrapper");let e=this.utils.window.document.createElement("div");e.setAttribute("data-id","ocm-st"),this.utils.loadStyle('div[data-id="ocm-st"] { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }');let i=this.utils.is_mobile?this.stConfig.mobile.styles:this.stConfig.desktop.styles,n=this.utils.is_mobile?this.stConfig.mobile.classes:this.stConfig.desktop.classes;return i&&i!==""&&(e.style=i),n&&n!==""&&e.setAttribute("class",n),e}handleBottomSticky(){new MutationObserver((i,n)=>{let r=this.utils.window.document.querySelector(".ocm-sticky.bottom");this.stickyBottomHeight=r&&r.clientHeight||0}).observe(this.utils.window.document,{childList:!0,subtree:!0})}handleStickiness(e,i,n){let r=this.stickyConfig&&this.stickyConfig.enable,s=this.stickyConfig?.full_width;if(this.isMounted&&r)if(n){let l=i.clientWidth,a=Math.ceil(l*9/16)+70;(this.config.debug||this.stConfig.debug)&&console.log(oe+"Width ",l," and height: ",a),i.style.height=a+"px",e.style.position="relative",e.classList.remove("ocm-st-sticky"),e.style.zIndex="0",e.style.width="100%",e.style.height=a+"px",e.style.bottom="",e.style.top="",e.style.left="",e.style.right=""}else if(e.style.position="fixed",e.classList.add("ocm-st-sticky"),e.style.zIndex="2147483646",s&&i.clientWidth<425){e.style.width="100%";let l=this.utils.is_mobile?i.clientWidth*.4>120?i.clientWidth*.4:120:i.clientWidth*.5;e.style.height=l+"px",this.stickyConfig.position==="bottom_right"||this.stickyConfig.position==="bottom_left"?(e.style.bottom=this.stickyConfig.offsets.bottom+"px",e.style.left="0%"):(this.stickyConfig.position==="top_right"||this.stickyConfig.position==="top_left")&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left="0%")}else{let l=this.utils.is_mobile?i.clientWidth*.4>288?i.clientWidth*.4:288:i.clientWidth*.5,a=Math.ceil(l*9/16)+70;e.style.width=l+"px",e.style.height=a+"px",this.stickyConfig.position==="bottom_right"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="bottom_left"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.left=this.stickyConfig.offsets.left+"px"):this.stickyConfig.position==="top_right"?(e.style.top=this.stickyConfig.offsets.top+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="top_left"&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left=this.stickyConfig.offsets.left+"px")}}appendIframeContent(e){let i=e.contentDocument||e.contentWindow.document,n=i.createElement("div");n.id="ocm-st";let r=i.createElement("script");r.src=_c,i.body.insertAdjacentElement("afterbegin",n),i.body.insertAdjacentElement("beforeend",r)}populateWrapper(e){(this.config.debug||this.stConfig.debug)&&console.log(oe+"Populating wrapper for the iframe");let i=e.clientWidth,n=Math.floor(i/1.28);(this.config.debug||this.stConfig.debug)&&console.log(oe+"Populating wrapper for the iframe with width: ",i," and height: ",n);let r=this.utils.window.document.createElement("iframe");r.setAttribute("id","ocm-st-frame"),r.setAttribute("FRAMEBORDER",0),r.setAttribute("SCROLLING","no"),r.setAttribute("MARGINHEIGHT",0),r.setAttribute("MARGINWIDTH",0),r.setAttribute("TOPMARGIN",0),r.setAttribute("LEFTMARGIN",0),r.setAttribute("ALLOWTRANSPARENCY","true"),e.style.height=n+"px",r.style.height=n+"px",r.style.width="100%",e.appendChild(r),navigator.userAgent.toLowerCase().includes("firefox")?r.onload=()=>{this.appendIframeContent(r)}:this.appendIframeContent(r),new IntersectionObserver(l=>{this.isIntersecting=l&&l.length>0&&l[0]?.isIntersecting,r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),(this.config.debug||this.stConfig.debug)&&console.log(oe+"Observer was triggered and we inform the iframe with the following event: ",{channel:"storyteller",event:"isIntersecting",value:this.isIntersecting})},{root:null,threshold:0}).observe(e),this.utils.window.addEventListener("message",l=>{let a=l.data;if(a?.channel==="storyteller"&&a?.event==="isSticky"){let u=a?.value;this.handleStickiness(r,e,!u),(this.config.debug||this.stConfig.debug)&&console.log(oe+"Parent received sticky event: ",a)}a?.channel==="storyteller"&&a?.event==="onMounted"&&(r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),this.isMounted=!0,(this.config.debug||this.stConfig.debug)&&console.log(oe+"The player inside the iframe was mounted successfully")),a?.channel==="storyteller"&&a?.event==="restart"&&this.restart()})}restart(){let e=document.querySelector('div[data-id="ocm-st"]');e&&((this.config.debug||this.stConfig.debug)&&console.log(oe+"Removing the wrapper and restarting storyteller."),e.remove(),this.run())}}});var Os=H((hh,Rs)=>{var Ts="[OCM][VI] ";Rs.exports=class{utils;config;vi_config;constructor(e,i){this.utils=e,this.config=i,this.vi_config=this.utils.is_mobile?this.config.services.vi.mobile:this.config.services.vi.desktop}run(){(this.config.debug||this.config.services.vi.debug)&&console.log(Ts+"Running..."),this.utils.loadStyle("#vi-stories-sponsor-container {display: none!important;}"),this.createElement()}createElement(){let e=document.createElement("div");e.id="vi-div",e.style=this.config.services.vi.style;let i=this.utils.determineInjectionTarget(this.vi_config.conditions.selector,this.vi_config.conditions.position,this.vi_config.conditions.count_gt,this.vi_config.conditions.word_count,this.vi_config.conditions.words_gt);if(!i){(this.config.debug||this.config.services.vi.debug)&&console.warn(Ts+"Could not find selector "+this.vi_config.conditions.selector);return}this.utils.injectTag(i,e,this.vi_config.conditions.place)&&this.viScript()}viScript(){let e=document,i=this.utils.window,n=e.createElement("script"),r={ChannelID:"5d8390ef28a0611e523a52aa",AdUnitType:"2",PublisherID:"133044126840134",PlacementID:"pltz9FljnNNm8YU6PEn",DivID:"vi-div",IAB_Category:this.config.services.vi.iab,Keywords:"",Language:"en-us",BG_Color:"",Text_Color:"",Font:"",FontSize:""};n.src="https://s.vi-serve.com/tagLoader.js",n.type="text/javascript",n.onload=function(){i[btoa("video intelligence start")].init(r)},(e.getElementsByTagName("head")[0]||e.documentElement.appendChild(e.createElement("head"))).appendChild(n)}}});var ks=H((gh,Ds)=>{var Ji="[OCM][Primis] ";Ds.exports=class{utils;config;primis_config;conditions;constructor(e,i){this.utils=e,this.config=i,this.primis_config=this.utils.is_mobile?this.config.services.primis.mobile:this.config.services.primis.desktop}run(){(this.config.debug||this.primis_config.debug)&&console.log(Ji+"Running...");let e=this.utils.determineInjectionTarget(this.primis_config.conditions.selector,this.primis_config.conditions.position,this.primis_config.conditions.count_gt,this.primis_config.conditions.word_count,this.primis_config.conditions.words_gt);if(!e){(this.config.debug||this.primis_config.debug)&&console.log(Ji+"Could not find selector "+this.primis_config.conditions.selector);return}this.create(e)}create(e){this.primis_config.conditions.geo_filtering&&this.utils.geolocation().then(r=>{if(!this.primis_config.conditions.geo_filtering_countries.includes(r)){(this.config.debug||this.primis_config.debug)&&console.log(Ji+"Terminating due to geo filter",this.primis_config.conditions.geo_filtering_countries,r);return}});let i=typeof this.config.schain<"u"?this.config.schain.config.nodes[0].sid:"",n=document.createElement("div");if(n.setAttribute("style",this.config.services.primis.style),this.utils.injectTag(e,n,this.primis_config.conditions.place)){let r=document.createElement("script");r.async=!0,r.src=this.config.services.primis.src+"&schain=1.0,1!orangeclickmedia.com,"+i+",1",n.appendChild(r)}}}});var Ns=H((mh,Bs)=>{Ki();var re="[OCM][inImage] ";Bs.exports=class{utils;config;in_image_config;window;include_observers;constructor(e,i){this.utils=e,this.config=i,this.in_image_config=i.services.in_image,this.include_observers=[]}run(){(this.config.debug||this.in_image_config.debug)&&console.log(re+"Running...");let e=this.in_image_config.fc?Number(this.in_image_config.fc/100):0,i=Math.random();if((this.config.debug||this.in_image_config.debug)&&console.log(re+"Math.random: "+i+" Frequency/100: "+e),!this.in_image_config.fc||i<=e){(this.config.debug||this.in_image_config.debug)&&console.log(re+"In at frequency condition and in_image_config.fc is:",this.in_image_config.fc),(this.config.debug||this.in_image_config.debug)&&console.info(re+"Is mobile =>",this.utils.is_mobile);for(let n of this.in_image_config.tags)n.active&&((this.config.debug||this.in_image_config.debug)&&console.info(re+"Tag =>",n),this.showAdInImage(n))}}showAdInImage(e){let i=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).length,n=[];i<=5?(n=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((l,a)=>{if(a%2===0)return l}),(this.config.debug||this.in_image_config.debug)&&console.info(re+"This site has ",i," images"," and is <= 5, so ads showing at every second img")):i>5&&(n=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((l,a)=>{if(a%3===0)return l}),(this.config.debug||this.in_image_config.debug)&&console.info(re+"This site has ",i," images"," and is > 5, so ads showing at every third img"));let r=n.length;(this.config.debug||this.in_image_config.debug)&&console.info(re+"This site has total",i," images:",n);let s=(l,a)=>{(this.config.debug||this.in_image_config.debug)&&console.info(re+"Start check images src");let u=n.filter(m=>m.currentSrc.indexOf("lazy_placeholder.gif")===-1||m.getAttribute("height")!==null&&m.getAttribute("width")!==null),c=[];if((this.config.debug||this.in_image_config.debug)&&console.info(re+"This site has",l+" images - images with filter = "+u.length),l===u.length)(this.config.debug||this.in_image_config.debug)&&console.info(re+"Start - normal image without ll"),this.addInImageAd(u,a);else{(this.config.debug||this.in_image_config.debug)&&console.info(re+"Start - image with ll");let m=setInterval(()=>{if((this.config.debug||this.in_image_config.debug)&&console.info(re+"Start run Interval"),u=n.filter(p=>p.currentSrc.indexOf("lazy_placeholder.gif")===-1||p.getAttribute("height")!==null&&p.getAttribute("width")!==null),l!==c.length){(this.config.debug||this.in_image_config.debug)&&console.info(re+"Start checking");let p=u,h=0;if(p.length!==0)if(c.length===0)c=p;else for(let f=0;f<p.length;f++)c.find(g=>p[f-h].currentSrc===g.currentSrc)?((this.config.debug||this.in_image_config.debug)&&console.info(re+"Remove image "+p[f-h].currentSrc),p.splice(f-h,1),h++):((this.config.debug||this.in_image_config.debug)&&console.info(re+"Done image "+p[f-h].currentSrc),c.push(p[f-h]));p.length>0&&this.addInImageAd(p,a)}else(this.config.debug||this.in_image_config.debug)&&console.info(re+"Stop run Interval"),clearInterval(m)},1e3)}};r===0?((this.config.debug||this.in_image_config.debug)&&console.info(re+"Wait Loaded"),this.utils.window.addEventListener("load",function(l){r=Array.from(l.currentTarget.window.document.querySelectorAll(`${e.selector}`)).length,s(r,e)})):s(r,e)}addInImageAd(e,i){(this.config.debug||this.in_image_config.debug)&&console.info(re+"add InImage Ad, images: "+e," tag:",i);for(let n=0;n<e.length;n++){let r=e[n],s=0,l=0,a=0,u=r.parentElement,c=0;u&&(c=u.getBoundingClientRect().width);let m=r.getBoundingClientRect().height.toString(),p=r.getBoundingClientRect().width.toString();r.hasAttribute("data-lazy-type")&&((this.config.debug||this.in_image_config.debug)&&console.info(re+"image with attr data-lazy-type ",r),p=r.clientWidth?r.clientWidth.toString():p,c=u.clientWidth?u.clientWidth.toString():c,r.getAttribute("height")&&r.getAttribute("width")&&r.getBoundingClientRect().width===r.getBoundingClientRect().height&&((this.config.debug||this.in_image_config.debug)&&console.info(re+"this image has height and width"),a=r.getAttribute("height")/r.getAttribute("width"),l=r.clientHeight?r.clientHeight*a:m,m=l.toString())),c>parseInt(p)&&(s=(c-parseInt(p))/2),(this.config.debug||this.in_image_config.debug)&&(console.log(re+"imageParent_width = ",c,typeof c),console.log(re+"image_height = ",m,typeof m),console.log(re+"imageParent_width > parseInt(image_width) = ",c>parseInt(p)),console.log(re+"image_width = ",p,typeof p),console.log(re+"new_left = ",s,typeof s),console.log(re+"new_left in css = ",String(s)+"px"));let h=this.in_image_config.available_sizes,f=null,v=!1;h=h.filter(g=>g.isMobile===this.utils.is_mobile).reverse();for(let g of h)if(p>=g.widthImg&&m>=g.heightImg&&g.isActive===!0){(this.config.debug||this.in_image_config.debug)&&console.info(re+`in_image_${n} has the conditions to render ad`,g);try{f=JSON.parse(g.adSizes)[0]}catch{break}v=!0;break}if(v){(this.config.debug||this.in_image_config.debug)&&console.log(re+`For div in_image_${n}, width:`+f[0]+" height:"+f[1]),this.topStyleForButton(f[1],n);let g=f[1]+6,y=document.createElement("div");y.setAttribute("id",`in_image_container_${n}`),y.classList.add("ocm-inImage-container"),y.style=`height:${m}px; width:${p}px; margin: auto;`,r.parentElement.insertBefore(y,r),y.appendChild(r),this.in_image_config.withoutLeft||(r.style=`position:absolute; left:${String(s)}px; top:0`);let b=`<div id="in_image_${n}" style="height:0;"></div>`,S=document.createElement("div");S.classList.add("ocm-inImage","reveal-top"),y.appendChild(S),S.insertAdjacentHTML("beforeend",b),this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push(()=>{let w=this.utils.window.googletag.defineSlot(`${i.ad_tag_url}`,[f],`in_image_${n}`).addService(googletag.pubads());this.utils.window.googletag.display(`in_image_${n}`),!this.utils.config.services.lazyload.active&&window.OCM.init_ad_server_set&&this.utils.window.googletag.pubads().refresh([w],{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0}),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",async _=>{if(!_.isEmpty&&_.slot.getSlotElementId()===`in_image_${n}`){let C=S.parentElement.getAttribute("id");if(this.utils.browser.isSafari)await this.isInViewportInImage(n,S,s,g);else{let x=document.querySelectorAll(`#in_image_container_${n}`)[0];await this.includeObserverInImage(C,S,s,g),this.include_observers[C].observe(x)}}})})}}}includeObserverInImage(e,i,n,r){IntersectionObserver.prototype.POLL_INTERVAL=100;let s={root:null,rootMargin:"20px 0px",threshold:.5};this.include_observers[e]=new IntersectionObserver((l,a)=>{l.forEach(async u=>{e===u.target.id&&(typeof u.isVisible>"u"&&(u.isVisible=!0),u.isIntersecting&&(await this.addEffectAndCloseButton(i,n,r),a.unobserve(u.target)))})},s)}isPhotoInViewport(e){let i,n=!1,r=0,s=document.getElementById(e);if(!s||typeof s>"u")return!1;if(i=s.getBoundingClientRect(),n=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.utils.window.innerHeight||this.utils.window.document.documentElement.clientHeight)&&i.right<=(this.utils.window.innerWidth||this.utils.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(r=(i.height-Math.abs(i.top))/i.height*100,n){if(r>=67)return!0}else if(r>=51)return!0}return!1}isInViewportInImage(e,i,n,r){window.addEventListener("scroll",async()=>{this.isPhotoInViewport(`in_image_container_${e}`)&&await this.addEffectAndCloseButton(i,n,r)})}addEffectAndCloseButton(e,i,n){e.classList.add("menu--animatable"),e.classList.contains("menu--visible")?e.classList.remove("menu--visible"):e.classList.add("menu--visible");let r=this.in_image_config.bg_color;this.in_image_config.withoutLeft?e.style=`width:100%;height:${n}px !important;background-color:${r}`:e.style=`left:${String(i)}px; height:${n}px !important;background-color:${r}`;let s=document.createElement("div"),l=document.createElement("button");this.utils.is_mobile?(s.classList.add("close-icon-container-mobile"),l.classList.add("ocm-button-close-mobile")):(s.classList.add("close-icon-container"),l.classList.add("ocm-button-close")),this.utils.is_mobile||(s.addEventListener("mouseenter",()=>{l.classList.add("ocm-button-close-hover")}),s.addEventListener("mouseleave",()=>{l.classList.remove("ocm-button-close-hover")})),s.append(l),e.append(s),l.addEventListener("click",()=>{e.classList.add("ocm-inImage-remove")})}topStyleForButton(e,i){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

          .ocm-button-close-mobile{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 26px !important;
               height: 100% !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

            .ocm-button-close-mobile:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close-mobile:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

          .ocm-inImage-container {
             position:relative; 
             overflow: hidden;
          }

          .ocm-inImage.menu--visible  {
              -webkit-transform: none;
              transform: none;
}

          .ocm-inImage.menu--animatable {
             transition: all 1s ease-out;
}
         .ocm-inImage.menu--animatable > #in_image_`+i+` {
           height: `+e+`px !important; 
           transition: height 1s ease-out;
}
          .ocm-inImage {
             overflow: visible;             position:absolute; 
             padding-top:3px; 
             padding-bottom:3px; 
             bottom:0 !important; 
             height: 0px;
             width:100%; 
             display: flex; 
             align-items: center;
             justify-content: center;
          }

          .ocm-inImage .close-icon-container {
            position: absolute;
            top: -37px;
            height: 20px;
            width: 30px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon-container-mobile {
            position: absolute;
            top: -37px;
            height: 26px;
            width: 26px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon {
            display: inline-block;
            height: 26px;
            width: 26px;
            cursor: pointer;
            stroke: #fff;
            margin: 3px;
          }

          .ocm-inImage.reveal-top {
            opacity: 1;
          }

          .ocm-inImage.reveal-top.ocm-inImage-remove {
            transition: opacity 0.5s linear;
            opacity: 0;
          }

          .ocm-inImage .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}}});var js=H((vh,Ms)=>{var Ac="[OCM][Adlightning] ",Fc=t=>{let e=document.createElement("script");t.services.adlightning.site&&t.services.adlightning.site!==""?e.src=`https://tagan.adlightning.com/orangeclickmedia-${t.services.adlightning.site}/op.js`:e.src="https://tagan.adlightning.com/orangeclickmedia/op.js",e.setAttribute("defer",""),document.head.appendChild(e),(t.debug||t.services.adlightning.debug)&&console.info(Ac+"Loaded")};Ms.exports=Fc});var Hs=H((bh,Ls)=>{var Ic="[OCM][Teads Analytics]",Cc=t=>{let e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;e.teads_analytics=e.teads_analytics||{},e.teads_analytics.analytics_tag_id=`PUB_${t.services.teads_analytics.publisher_id}`,e.teads_analytics.share=e.teads_analytics.share||function(){(e.teads_analytics.shared_data=e.teads_analytics.shared_data||[]).push(arguments)};let i=document.createElement("script");i.src="https://a.teads.tv/analytics/tag.js",document.head.appendChild(i),(t.debug||t.services.teads_analytics.debug)&&console.info(Ic+"Loaded")};Ls.exports=Cc});var Vs=H((wh,zs)=>{var Z="[OCM][AniView] ";zs.exports=class{constructor(e,i){this.utils=e,this.config=i,this.aniview_config=this.utils.is_mobile?i.services.aniview.mobile:i.services.aniview.desktop,this.aniview_config.debug=this.config.services.aniview.debug,this.ADSQ_TARGETING=null,this.ANIVIEW_FEE=2e-4,this.isHeaderBidding=!1,typeof this.aniview_config.vchack>"u"&&(this.aniview_config.vchack=!0)}run(){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Running..."),this.utils.allowPageType(this.aniview_config.rules.page_types)?this.createPlayerElement():(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Page type doesn't match the selected ones: ",this.aniview_config.rules.page_types)}createPlayerElement(){this.utils.contentLoaded().then(()=>{this.inject()})}inject(){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Trying to inject player element");let e=this.utils.determineInjectionTarget(this.aniview_config.rules.selector,this.aniview_config.rules.position,this.aniview_config.rules.count_gt,this.aniview_config.rules.word_count,this.aniview_config.rules.words_gt);if((this.config.debug||this.aniview_config.debug)&&console.info(Z+"node found: ",e),!e){(this.config.debug||this.aniview_config.debug)&&console.info(Z+"node NOT found, stopping process",e);return}let i=document.createElement("script");i.id=`AV${this.aniview_config.playerTagId}`,i.type="text/javascript",i.src=`https://tg1.aniview.com/api/adserver/spt?AV_PUBLISHERID=${this.aniview_config.publisher}&AV_TAGID=${this.aniview_config.playerTagId}`,this.utils.window.OCM._oeid&&(i.src+=`&AV_CUSTOM5=${this.utils.window.OCM._oeid}`),i.async="true",i.setAttribute("data-config-api","avConfig"),i.setAttribute("data-player-api","avPassback"),this.aniview_config&&this.aniview_config.sticky&&this.aniview_config.sticky.enable&&((this.config.debug||this.aniview_config.debug)&&console.info(Z+" sticky option is enabled for aniview player"),this.appendStickStyle());let n=this.utils.window.document.createElement("div");n.classList.add("ocm-player"),this.aniview_config.classes&&n.classList.add(this.aniview_config.classes),this.aniview_config.styles&&(n.style=this.aniview_config.styles),window.top.document.querySelector('script[src*="chirp.js"]')||this.utils.config.services.header_bidding.adsqRTDModuleEnabled?this.utils.waitFor("ADSQ.response",()=>{let r=[],s=null;s=window.top.ADSQ?.response,s&&(s.classified_as&&s.classified_as.forEach(l=>{let a=[];a=l.split("/");let u=null;a.forEach(c=>{u?u+="/"+c:u=c,r.push(u)})}),this.ADSQ_TARGETING={adsq_bs:s.brandSafe?s.brandSafe===!0?"Yes":"No":"notEvaluated",adsq_bs_class:r.length?[...new Set(r)]:[],adsq_bs_ne:s.entities||[],adsq_bs_sent:s.sentiment||"",hostname:window.top.location.hostname.replace("www.",""),city:s?.geo?.city||"",country:s?.geo?.country||""},i.src+=`&AV_CUSTOM1=${this.ADSQ_TARGETING.adsq_bs}`,i.src+=this.ADSQ_TARGETING.adsq_bs_class.length?`&AV_CUSTOM2=${encodeURIComponent(this.ADSQ_TARGETING.adsq_bs_class.join(","))}`:"",i.src+=this.ADSQ_TARGETING.adsq_bs_sent!==""?`&AV_CUSTOM3=${this.ADSQ_TARGETING.adsq_bs_sent}`:"",i.src+=this.ADSQ_TARGETING.adsq_bs_ne.length?`&AV_CUSTOM4=${encodeURIComponent(this.ADSQ_TARGETING.adsq_bs_ne.join(","))}`:""),this.appendTag(e,n,i)},50,()=>{this.appendTag(e,n,i)}):this.appendTag(e,n,i)}appendStickStyle(){let e=`${this.aniview_config?.sticky?.offsets?.top||0}px`,i=`${this.aniview_config?.sticky?.offsets?.bottom||0}px`,n=`${this.aniview_config?.sticky?.offsets?.left||0} px`,r=`${this.aniview_config?.sticky?.offsets?.right||0}px`,s=`${this.aniview_config?.sticky?.height||0}px`,l=`${this.aniview_config?.sticky?.width||0}px`;switch(this.aniview_config?.sticky?.position){case"bottom_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; right: ${r};  height: ${s}; width: ${l}; }`);break;case"bottom_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; left: ${n};  height: ${s}; width: ${l}; }`);break;case"top_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; right: ${r};  height: ${s}; width: ${l}; }`);break;case"top_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; left: ${n};  height: ${s}; width: ${l}; }`);break}}appendTag(e,i,n){this.utils.window.googletag.pubads?this.utils.gptPubAdsReady().then(()=>{this.utils.window.googletag.cmd.push(()=>{let r=this.utils.window.googletag.pubads().getTargetingKeys().map(s=>encodeURIComponent(`${s}=${this.utils.window.googletag.pubads().getTargeting(s).join(",")}`)).join("%26");n.src+=`&AV_CUSTOM6=${r}`,this.utils.injectTag(e,i,this.aniview_config.rules.place),i.append(n),(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Selector found and script added"),this.createPassbacks()})}):(this.utils.injectTag(e,i,this.aniview_config.rules.place),i.append(n),(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Selector found and script added"))}resizePlayerForVerticalAd(e,i){try{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdImpression Event: ",e);let n=e?.tagInfo?.mediaInfo?.width,r=i.getWidth(),s=e?.tagInfo?.mediaInfo?.height;if(s<=n)return;(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Tag width: ",n," Tag height: ",s);let l=n/s,a=r/l;i.resize(r,a)}catch(n){(this.config.debug||this.aniview_config.debug)&&console.error(Z+"Error: ",n)}}handleAdImpression(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new impression event was triggered:",e);let i={...e.tagInfo};if(i){let n=i.bidder&&this.auction&&this.auction.bidders&&this.auction.bidders[i.bidder].size,r=this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),s=i.bidCpm;if(s>0&&(s=r?parseFloat(((s-this.ANIVIEW_FEE)*r).toFixed(5)):s-this.ANIVIEW_FEE),this.isHeaderBidding=i.bidder&&i.bidder!=="GAM"&&i.bidder!=="amazon",!this.isHeaderBidding)return;let l={data:{adUnit:"aniview_outstream",auction:this.auction,auctionId:this.auctionId,bidder:i.bidder,consent:this.utils.window.OCM.hasPurposeOneConsent,cpm:s,dealId:i.bidData.dealId||null,fizz:!1,isNew:1,mediaType:"video",meta:JSON.stringify(i.bidData.meta),oeid:this.utils.window.OCM._oeid,size:n,source:"client"},event:"pba-update",eventName:"Bid won",options:this.options};fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(l)}).then(a=>{a.json().then(()=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"A pba update was sent to wind runner successfully with data: ",l)})}).catch(a=>{console.error(a)})}}handleAnalyticsCallback(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new analytics callback event was triggered:",e);let i=e.data;if(i){let n=Object.assign({},e.options);delete n.callback,n.options={},this.options=n;let r=Object.keys(i.adUnits).map(l=>Object.keys(i.adUnits[l].bidders).map(a=>i.adUnits[l].bidders[a])).flat().reduce((l,a)=>({...l,[a.bidder]:a}),{});this.bidders=r,Object.keys(this.bidders).forEach(l=>{let a=this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),u=this.bidders[l].cpm;u>0&&(u=a?parseFloat(((u-this.ANIVIEW_FEE)*a).toFixed(5)):u-this.ANIVIEW_FEE),this.bidders[l].cpm=u}),this.auction={adUnit:"aniview_outstream",bidders:r,finish:i.finish,start:i.start,status:"finished",timeout:i.timeout},this.auctionId=i.id;let s={data:{id:this.auctionId,start:i.start,timeout:i.timeout,adUnits:{aniview_outstream:this.auction},finish:i.finish,oeid:this.utils.window.OCM._oeid,consent:this.utils.window.OCM.hasPurposeOneConsent},event:"pba-stream",eventName:"Auction",options:e.options};fetch("https://windrunner.orangeclickmedia.com/pba-stream",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(s)}).then(l=>{l.json().then(()=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"A pba stream was sent to wind runner successfully with data: ",s)})}).catch(l=>{console.error(l)})}}handleVideoEvents(e){if(!this.isHeaderBidding)return;let i={eventName:e,adUnit:"aniview_outstream",auctionId:this.auctionId};fetch(e==="bidViewable"?"https://windrunner.orangeclickmedia.com/pba-viewability":"https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(i)}).then(r=>{r.json().then(s=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"A pba video event was sent to wind runner successfully with data: ",i)})}).catch(r=>{console.error(r)})}handleAdViewableImpression(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new viewable impression event was triggered:",e),this.handleVideoEvents("bidViewable")}handleAdVideoFirstQuartile(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new first quartile event was triggered:",e),this.handleVideoEvents("first_quartile")}handleAdVideoMidpoint(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new mid point event was triggered:",e),this.handleVideoEvents("midpoint")}handleAdVideoThirdQuartile(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new third quartile event was triggered:",e),this.handleVideoEvents("third_quartile")}handleAdVideoComplete(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new video complete event was triggered:",e),this.handleVideoEvents("complete")}handleAdClickThru(e){(this.config.debug||this.aniview_config.debug)&&console.log(Z+"An new ad click thru event was triggered:",e),this.handleVideoEvents("click")}handleVCHackFloatingConfig(e){!this.initialAvConfig?.floating&&this.aniview_config.vchack&&(e.floating={resize:!0,position:this.aniview_config.vchack_position||(this.utils.is_mobile?"Top":"Top-Right"),closeButton:!1,floatOnImp:!0,resizingMethod:1,size:this.utils.is_mobile?.4:.5,floatOnBottom:!0,backgroundColor:"White",right:0,left:0,top:0,bottom:0})}createPassbacks(){this.utils.window.avConfig=(e,i)=>{this.initialAvConfig=JSON.parse(JSON.stringify(e)),e.openRtb={site:{ext:{data:this.ADSQ_TARGETING}}},e.pbanalytics=[{provider:"ocmpba",options:{callback:n=>{this.handleAnalyticsCallback(n)}}}]},this.utils.window.avPassback=(e,i)=>{if((this.config.debug||this.aniview_config.debug)&&(console.log(Z+"Checking if I should run OCM.oipb for specific player"),console.log(Z+"config.tagId !== this.aniview_config.playerTagId",e.tagId,this.aniview_config.playerTagId)),e.tagId===this.aniview_config.playerTagId){if(this.aniview_config&&this.aniview_config.sticky&&this.aniview_config.sticky.enable){let n=this.aniview_config?.sticky?.height||0,r=this.aniview_config?.sticky?.width||0;i.resize(r,n)}e?.playOnViewPerc&&(e.playOnViewPerc=30),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!1),e.floating.closeButton=!1,e.floating.backgroundColor="White"),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomFloatingConfig&&typeof this.utils.window.OCM.handleCustomFloatingConfig=="function"?(this.utils.window.OCM.handleCustomFloatingConfig(e,i),(this.config.debug||this.aniview_config.debug)&&console.log(Z+"Custom handling for the configuration: ",e)):(this.handleVCHackFloatingConfig(e),(this.config.debug||this.aniview_config.debug)&&console.log(Z+"VCHack handling for the configuration:",e)),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"&&(e.enableViewability=!0),i.updateGui(e),i.on("AdImpression",(n,r)=>{this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"&&this.utils.window.OCM.handleCustomAdImpression(e,i,n),this.utils.is_mobile&&this.resizePlayerForVerticalAd(n,i),this.handleAdImpression(n)}),i.on("AdViewableImpression",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdViewableImpression",n,r),this.handleAdViewableImpression(n),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!0),e.floating.closeButton=!0,i.updateGui(e)),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdViewableImpression&&typeof this.utils.window.OCM.handleCustomAdViewableImpression=="function"?(e=this.utils.window.OCM.handleCustomAdViewableImpression(e,i,n),i.updateGui(e)):this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"||!this.initialAvConfig?.floating&&this.aniview_config.vchack&&setTimeout(()=>{i.stopFloat()},2e3)}),i.on("AdVideoFirstQuartile",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdVideoFirstQuartile",n,r),this.handleAdVideoFirstQuartile(n)}),i.on("AdVideoMidpoint",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdVideoMidpoint",n,r),this.handleAdVideoMidpoint(n)}),i.on("AdVideoThirdQuartile",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdVideoThirdQuartile",n,r),this.handleAdVideoThirdQuartile(n)}),i.on("AdVideoComplete",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdVideoComplete",n,r),this.handleAdVideoComplete(n)}),i.on("AdClickThru",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdClickThru",n,r),this.handleAdClickThru(n)}),i.on("AdError",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(Z+"AdError",n,r),typeof this.utils.window.OCM.oipb=="function"&&this.utils.window.OCM.oipb(n,r)})}}}}});var Us=H((_h,qs)=>{var Sh=Ci(),xh=Pi();qs.exports=async(t,e,i)=>{let n=i.hasOwnProperty("use_window_top")?i.use_window_top?window.top:window:window.top;if(i.services.hasOwnProperty("reaper")&&i.services.reaper.active){let s=ss();new s(e,i).run()}let r=await t(e).then(s=>(n.OCM.pageType=s,s));if(e.ocmChromeExt(i),await e.isAdBlocked(),n.OCM.adBlocked&&i.services.hasOwnProperty("blockthrough")&&i.services.blockthrough.active&&as()(i),i.services.hasOwnProperty("geolocation")&&i.services.geolocation.active&&await e.geolocation(),i.services.hasOwnProperty("fizz")&&i.services.fizz.active){let s=us();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("mwi")&&i.services.mwi.active&&ds()(i,e),i.services.hasOwnProperty("injected_tags")&&i.services.injected_tags.active){let s=fs();new s(e,i,null).run()}if(i.services.hasOwnProperty("sticky")&&i.services?.sticky.active){let s=Ci();await new s(e,i).run()}if(i.services.hasOwnProperty("mobile_inread_sticky")&&i.services?.mobile_inread_sticky.active&&e.is_mobile){let s=Pi();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("lazyload")&&i.services.lazyload.active&&e.allowPageType(i.services.lazyload.page_types)){let s=bs();await new s(e,i).run()}else i.services.lazyload.active=!1,i.services.header_bidding.functionality=i.services.header_bidding.functionality.includes("lazyload")||i.services.header_bidding.functionality==="adserver"?"adserver":"no_adserver";if(i.services.hasOwnProperty("lazyload")&&i.services.hasOwnProperty("header_bidding")&&!i.services?.lazyload.active&&i.services?.header_bidding.active&&i.services?.header_bidding.hasOwnProperty("page_types")&&e.allowPageType(i.services?.header_bidding.page_types)){let s=Wi();await new s(e,i).prepare(!1)}if(i.services.hasOwnProperty("fou_analytics")&&i.services?.fou_analytics.active&&ws()(e,i),i.services.hasOwnProperty("outbrain")&&i.services.outbrain.active){let s=e.is_mobile?i.services?.outbrain.mobile.conditions.page_types:i.services?.outbrain.desktop.conditions.page_types;if(e.allowPageType(s)){let l=xs(),a=new l(e,i);e.contentLoaded().then(()=>{a.run()})}}if(e.getParameterByName("vast_url")){let s=Es();e.waitFor("teads",()=>{setTimeout(()=>{new s(i,e).runDemoInread(e)},1e3)})}if(i.services.hasOwnProperty("story_teller")&&i.services?.story_teller.active){let s=Fs();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("story_teller_v2")&&i.services.story_teller_v2.active){let s=Ps();"requestIdleCallback"in window?window.requestIdleCallback(()=>{new s(e,i).run()},{timeout:1e3}):e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("vi")&&i.services?.vi.active){let s=e.is_mobile?i.services?.vi.mobile.conditions.page_types:i.services?.vi.desktop.conditions.page_types;if(e.allowPageType(s)){let l=Os();e.contentLoaded().then(()=>{new l(e,i).run()})}}if(i.services.hasOwnProperty("primis")&&i.services?.primis.active){let s=e.is_mobile?i.services?.primis.mobile.conditions.page_types:i.services?.primis.desktop.conditions.page_types;if(e.allowPageType(s)){let l=ks();e.contentLoaded().then(()=>{new l(e,i).run()})}}if(i.services.hasOwnProperty("in_image")&&i.services?.in_image?.active){let s=Ns();new s(e,i).run()}if(i.services.hasOwnProperty("adlightning")&&i.services?.adlightning?.active&&js()(i),i.services.hasOwnProperty("teads_analytics")&&i.services?.teads_analytics?.active&&Hs()(i),i.services.hasOwnProperty("aniview")&&i.services?.aniview?.active){let s=Vs();new s(e,i).run()}}});var Gs=H((Eh,Ks)=>{var Pc=async t=>new Promise((e,i)=>{let n="ROS";window.location.hostname.includes("1xbet")?n="1xbet":n="Home",t.loadStyle(".ocm-sticky.bottom {padding:0px !important}"),e(n)});Ks.exports=Pc});var Js=H((Ah,Ws)=>{var Tc="[OCM][GPT] ",Rc=t=>{let e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;window.googletag=window.googletag||{cmd:[]},(t.debug||t.services.gpt.debug)&&console.log(Tc+"Loading GPT library...");let i=document.createElement("script"),n=document.getElementsByTagName("script")[0],r="//securepubads.g.doubleclick.net/tag/js/gpt.js";i.async=!0,i.type="text/javascript",i.src=r,n.parentNode.insertBefore(i,n),window.googletag.cmd.push(()=>{t.services.gpt.collapseEmptyDivs[0]&&(t.services.gpt.collapseEmptyDivs[1]?googletag.pubads().collapseEmptyDivs(!0):googletag.pubads().collapseEmptyDivs()),t.services.gpt.enableSingleRequest&&googletag.pubads().enableSingleRequest(),t.services.gpt.setCentering&&googletag.pubads().setCentering(!0),t.services.gpt.disableInitialLoad&&googletag.pubads().disableInitialLoad(),googletag.enableServices()})};Ws.exports=Rc});var Xs=H((Fh,$s)=>{var Oc=t=>{if((t.debug||t.services.gpt.debug)&&console.info("[OCM] Loading CMP library..."),!t.use_window_top){console.error("[OCM][CMP] Use window top to run CMP service");return}(function(){let e=window.location.hostname,i=document.createElement("script"),n=document.getElementsByTagName("script")[0],r="https://cmp.inmobi.com".concat("/choice/",t.services.cmp.network_id,"/",e,"/choice.js?tag_version=V3"),s=0,l=3,a;i.async=!0,i.type="text/javascript",i.src=r,n.parentNode.insertBefore(i,n);function u(){let p="__tcfapiLocator",h=[],f=window,v;function g(){let S=f.document,w=!!f.frames[p];if(!w)if(S.body){let _=S.createElement("iframe");_.style.cssText="display:none",_.name=p,S.body.appendChild(_)}else setTimeout(g,5);return!w}function y(){let S,w=arguments;if(w.length)if(w[0]==="setGdprApplies")w.length>3&&w[2]===2&&typeof w[3]=="boolean"&&(S=w[3],typeof w[2]=="function"&&w[2]("set",!0));else if(w[0]==="ping"){let _={gdprApplies:S,cmpLoaded:!1,cmpStatus:"stub"};typeof w[2]=="function"&&w[2](_)}else w[0]==="init"&&typeof w[3]=="object"&&(w[3]=Object.assign(w[3],{tag_version:"V3"})),h.push(w);else return h}function b(S){let w=typeof S.data=="string",_={};try{w?_=JSON.parse(S.data):_=S.data}catch{}let A=_.__tcfapiCall;A&&window.__tcfapi(A.command,A.version,function(C,x){let E={__tcfapiReturn:{returnValue:C,success:x,callId:A.callId}};w&&(E=JSON.stringify(E)),S&&S.source&&S.source.postMessage&&S.source.postMessage(E,"*")},A.parameter)}for(;f;){try{if(f.frames[p]){v=f;break}}catch{}if(f===window.top)break;f=f.parent}v||(g(),f.__tcfapi=y,f.addEventListener("message",b,!1))}u();let c=function(){let p=arguments;typeof window.__uspapi!==c&&setTimeout(function(){typeof window.__uspapi<"u"&&window.__uspapi.apply(window.__uspapi,p)},500)},m=function(){s++,window.__uspapi===c&&s<l?console.warn("USP is not accessible"):clearInterval(a)};typeof window.__uspapi>"u"&&(window.__uspapi=c,a=setInterval(m,6e3))})()};$s.exports=Oc});var Zs=H((Ih,Ys)=>{var Xe="[OCM][IAB] ",Dc=t=>{let e=window.top;return e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],new Promise((i,n)=>{let r=s=>{s?(kc(t),i(s)):n(s)};if(t.uses_cmp){let l=1,a=()=>{(t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"Waiting for tcfapi"),typeof e.__tcfapi>"u"&&typeof e.__cmp>"u"?((t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"tcfapi not found, retrying"),l++,l>=60?(e.googletag.cmd.push(()=>{e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})}),r(!0)):setTimeout(a,100)):typeof e.__tcfapi<"u"?e.__tcfapi("addEventListener",2,function(u,c){if(c&&!u.eventStatus&&!u.gdprApplies&&((t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"GDPR does not apply, run ads normally"),r(!0)),c&&(u.eventStatus==="tcloaded"||u.eventStatus==="useractioncomplete"))if((t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"tcfapi found, calculating values"),t.use_window_top&&(e.OCM.consentData=u),!u.gdprApplies)(t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"GDPR does not apply, run ads normally"),r(!0);else{t.use_window_top&&(e.OCM.gdprApplies=!0);let m=u.purpose.consents[1]===!0||u.purpose.legitimateInterests[1]===!0,p=u.purpose.consents[2]===!0||u.purpose.legitimateInterests[2]===!0,h=u.purpose.consents[3]===!0||u.purpose.legitimateInterests[3]===!0,f=u.purpose.consents[4]===!0||u.purpose.legitimateInterests[4]===!0,v=u.purpose.consents[7]===!0||u.purpose.legitimateInterests[7]===!0,g=u.purpose.consents[9]===!0||u.purpose.legitimateInterests[9]===!0,y=u.purpose.consents[10]===!0||u.purpose.legitimateInterests[10]===!0,b=u.vendor.consents[755]&&u.vendor.legitimateInterests[755],S=!1,w=!0,_=!1;b&&m&&p&&v&&g&&y&&(S=!0),m&&p&&h&&f&&v&&g&&y&&S?w=!1:m&&p&&!h&&!f&&v&&g&&y&&S&&(w=!0),g||(_=!1),t.use_window_top&&(e.OCM.hasPurposeOneConsent=m,e.OCM.hasPurposeTwoConsent=p,e.OCM.hasPurposeThreeConsent=h,e.OCM.hasPurposeFourConsent=f,e.OCM.hasPurposeSevenConsent=v,e.OCM.hasPurposeNineConsent=g,e.OCM.hasPurposeTenConsent=y,e.OCM.hasGoogleConsent=S,e.OCM.serveNonPersonalized=w,e.OCM.restrictDataProcessing=_),(t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"GDPR applies",e.OCM),e.googletag.cmd.push(()=>{e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:w,restrictDataProcessing:_})}),r(!0)}}):typeof e.__cmp<"u"?((t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"cmp api found, run ads normally"),r(!0)):((t.debug||t.services.iab_compliance.debug)&&console.log(Xe+"no iab api found,nonPersonalizedAds true"),e.googletag.cmd.push(()=>{e.OCM.hasPurposeOneConsent=!1,e.OCM.hasPurposeTwoConsent=!1,e.OCM.hasPurposeThreeConsent=!1,e.OCM.hasPurposeFourConsent=!1,e.OCM.hasPurposeSevenConsent=!1,e.OCM.hasPurposeNineConsent=!1,e.OCM.hasPurposeTenConsent=!1,e.OCM.hasGoogleConsent=!1,e.OCM.serveNonPersonalized=!0,e.OCM.restrictDataProcessing=!0,e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0,restrictDataProcessing:!0})}),r(!0))};a()}else r(!0)})},kc=t=>{let e,i,n,r=t.use_window_top?window.top:window,s=r.document.querySelectorAll("script[data-cmp-src]");if(s.length)for(let a of s){for(e=document.createElement("script"),i=Array.prototype.slice.call(a.attributes);n=i.pop();)n.nodeName==="data-cmp-src"?e.setAttribute("src",n.nodeValue):e.setAttribute(n.nodeName,n.nodeValue);a.parentNode.insertBefore(e,a),a.remove()}let l=r.document.querySelectorAll("script[data-cmp-script]");if(l.length)for(let a of l){for(e=document.createElement("script"),i=Array.prototype.slice.call(a.attributes);n=i.pop();)n.nodeName==="data-cmp-script"?e.setAttribute("type","text/javascript"):n.nodeName!=="type"&&e.setAttribute(n.nodeName,n.nodeValue);e.text=a.text,a.parentNode.insertBefore(e,a),a.remove()}};Ys.exports=Dc});var $i=H((Ch,Qs)=>{var Bc=t=>new Promise((e,i)=>{e(!0)});Qs.exports=Bc});(()=>{let t=Zi(),e=zr(),i=new e(t);if(i.getParameterByName("ocm_dev")=="1"&&t.env==="prod"){let c=document.createElement("script");c.src=`//cdn.orangeclickmedia.com/tech/dev/${t.script_tag}/ocm.js`,c.crossOrigin="anonymous",i.doc_head.append(c);return}let n=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;Array.prototype.containsArray||Object.defineProperty(Array.prototype,"containsArray",{enumerable:!1,value:function(c){let m={};for(let p=0;p<this.length;p++)m[this[p]]=p;return m.hasOwnProperty(c)}}),String.prototype.ocmStartsWith||Object.defineProperty(String.prototype,"ocmStartsWith",{value:function(c,m){let p=m>0?m|0:0;return this.substring(p,p+c.length)===c}}),n.googletag=n.googletag||{},n.googletag.cmd=n.googletag.cmd||[],n.googletag.cmd.push(()=>{n.googletag.pubads().setTargeting("ocm_domain",[n.location.hostname.replace("www.","")])}),n.OB_extId=n.location.hostname.replace("www.","");let r={pageType:window.top?.OCM?.pageType||window?.OCM?.pageType||"ROS",adBlocked:window.top?.OCM?.adBlocked||window.OCM?.adBlocked||!0,_log:i.config?.log?i.log:null,geo:window?.ADSQ?.response?.geo||null,ad_units:window.top?.OCM?.ad_units||window?.OCM?.ad_units||[],infi_article_count:1,init_ad_server_set:!1,site_categories:t?.site_categories||[]};n.OCM=n.OCM?{...n.OCM,...r}:r,i.getParameterByName("ocm_debug")&&(t.debug=!0);let l=Us(),a=i.isMobile();n.OCM.isMobile=a;let u=Gs();t.services.hasOwnProperty("gpt")&&t.services.gpt.active&&Js()(t),t.services.cmp.active&&t.services.cmp.network_id&&Xs()(t),t.services.iab_compliance.active?Zs()(t).then(async()=>{await l(u,i,t),await $i()(i)}).catch(m=>{console.error("[IAB COMPLIANCE] Error:",m)}):(async()=>(await l(u,i,t),await $i()(i)))()})();})();
//# sourceMappingURL=ocm.js.map
